(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{630:function(e,t,n){var a=n(631);"string"==typeof a&&(a=[[e.i,a,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};n(66)(a,l);a.locals&&(e.exports=a.locals)},631:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,'#eventDetails {\n  display: flex;\n  width: 100%;\n  background-color: var(--color-gs00);\n  flex-direction: column;\n  overflow: hidden;\n  position: absolute;\n  height: 100%;\n  color: var(--color-gs100); }\n\n.event-show-divider {\n  border-top-width: 0.2rem;\n  border-top-style: solid;\n  border-top-color: var(--color-gs80);\n  margin: 2rem; }\n\n.event-show-details-subtitle {\n  margin: 2rem 2rem 0 0;\n  width: auto;\n  height: 1.9rem;\n  color: var(--color-gs70); }\n\nhtml[dir="rtl"] .event-show-details-subtitle {\n  margin-left: 2rem;\n  margin-right: 0; }\n\n.event-show-details-text {\n  margin: 0;\n  color: var(--color-gs70);\n  word-wrap: break-word;\n  white-space: pre-wrap; }\n\n.event-detail-content-wrapper {\n  overflow: auto;\n  height: 23.6rem; }\n\n.event-show-details-title {\n  color: var(--color-gs90);\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  margin: 0;\n  line-height: 1; }\n\n#delete-event-dialog kai-radio {\n  pointer-events: none; }\n\n.event-detail-content-wrapper div {\n  margin: 1rem; }\n\n#eventDetails .event-account {\n  background-color: var(--color-gs00); }\n\n.event-show-details-text.p-pri {\n  color: var(--color-gs90); }\n',""])},639:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});var a=n(0),l=n(45),o=n.n(l),i=n(11),r=n(21),s=n(2),c=n(26),d=n(51),u=n(164),v=n(599);n(630);function p(e,t,n,a,l,o,i){try{var r=e[o](i),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(a,l)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=a.default.createElement("p",{className:"event-show-details-text p-pri","data-l10n-id":"agenda-all-day-event"}),g=a.default.createElement("p",{className:"event-show-details-text p-pri","data-l10n-id":"agenda-all-day-event"}),w=a.default.createElement("p",{className:"event-show-details-subtitle subtitle-2","data-l10n-id":"event-time"}),b=a.default.createElement("p",{className:"event-show-details-subtitle p-sec","data-l10n-id":"event-description"}),y=a.default.createElement("p",{className:"event-show-details-subtitle p-sec","data-l10n-id":"event-reminder"}),E=a.default.createElement("p",{className:"event-show-details-subtitle p-sec","data-l10n-id":"event-calendar"}),O=function(e){var t,n;function l(t){var n;h(m(n=e.call(this,t)||this),"busyTime",void 0),h(m(n),"focus",function(){n.updateSoftkey()}),h(m(n),"updateSoftkey",function(){r.a.register({left:"delete",center:"",right:"edit"},document)}),h(m(n),"scrollByStep",function(e,t){var n=e.scrollHeight-e.clientHeight,a=e.scrollTop;"down"===t?a<n&&(e.scrollTop=a+50>=n?n:a+50):"up"===t&&(e.scrollTop=a-50>=0?a-50:0)}),h(m(n),"buildOptionMenuItems",function(){n.optionItems={delAllItem:{id:"delete-all-events",callback:function(){n.handleOptionMenu("allEvent")}},delAllFutureItem:{id:"delete-all-future-events",callback:function(){n.handleOptionMenu("futureEvent")}}}}),h(m(n),"showDelOptions",function(){var e=[];e.push(n.optionItems.delAllItem),e.push(n.optionItems.delAllFutureItem),i.a.request("showOptionMenu",{options:e})}),h(m(n),"showDelEventDialg",function(){Object(s.P)({header:"delete",type:"confirm",cancel:"cancel",ok:"delete",content:"deleteEvent-confirmation",onCancel:n.delEventCancel.bind(m(n)),onOk:n.delEvent.bind(m(n))})}),h(m(n),"showDelDialog",function(){n.showDelEventDialg()}),h(m(n),"handleClickSoftLeft",function(){Object(s.G)("left")&&("never"!==n.busyTime.repeat?n.showDelOptions():n.showDelDialog())}),h(m(n),"handleKeydown",function(e){switch(e.key){case"Backspace":e.stopPropagation(),e.preventDefault(),d.a.go(-1);break;case"SoftLeft":e.stopPropagation(),e.preventDefault(),n.handleClickSoftLeft();break;case"SoftRight":e.stopPropagation(),e.preventDefault(),n.modifyEventshow();break;case"ArrowDown":e.stopPropagation(),e.preventDefault(),n.scrollByStep(n.eventDetailContainer,"down");break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),n.scrollByStep(n.eventDetailContainer,"up")}}),h(m(n),"timeFormatChanged",function(){n.forceUpdate()}),h(m(n),"handleLocalize",function(){n.forceUpdate()});var a=n.props.location;return n.busyTime=a.state.event,n.buildOptionMenuItems(),n.handleOptionMenu=n.handleOptionMenu.bind(m(n)),n.handleKeydown=n.handleKeydown.bind(m(n)),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,l.renderEventTime=function(e,t){var n={hour:"numeric",minute:"numeric",hour12:window.api.hour12},l={weekday:"long",month:"short",day:"numeric",year:"numeric"},i={weekday:"short",month:"long",day:"numeric",year:"numeric"},r=new Date(e.busytimeSDate),c=new Date(e.busytimeEDate),d=null,u=null;if(e.allDayEvent){return Math.ceil((c.valueOf()-r.valueOf())/864e5)>1?(d=Object(s.a)("event-detail-start",{time:r.toLocaleString(navigator.language,l)}),u=Object(s.a)("event-detail-end",{time:c.toLocaleString(navigator.language,l)}),a.default.createElement("div",null,a.default.createElement("p",{className:"event-show-details-text p-sec"},d),a.default.createElement("p",{className:"event-show-details-text p-sec"},u),f,a.default.createElement("p",{className:"event-show-details-text p-sec"},Object(s.a)("event-detail-repeat-item",{repeat:t})))):a.default.createElement("div",null,a.default.createElement("p",{className:"event-show-details-text p-sec"},r.toLocaleString(navigator.language,l)),g,a.default.createElement("p",{className:"event-show-details-text p-sec"},Object(s.a)("event-detail-repeat-item",{repeat:t})))}return o()(e.startDate,e.endDate)?(d=Object(s.a)("event-detail-start",{time:r.toLocaleString(navigator.language,n)}),u=Object(s.a)("event-detail-end",{time:c.toLocaleString(navigator.language,n)}),a.default.createElement("div",null,a.default.createElement("p",{className:"event-show-details-text p-sec"},r.toLocaleString(navigator.language,l)),a.default.createElement("p",{className:"event-show-details-text p-pri"},d+" "+u),a.default.createElement("p",{className:"event-show-details-text p-sec"},Object(s.a)("event-detail-repeat-item",{repeat:t})))):(d=Object(s.a)("cross-event-detail-start",{time:r.toLocaleString(navigator.language,n),date:r.toLocaleString(navigator.language,i)}),u=Object(s.a)("cross-event-detail-end",{time:c.toLocaleString(navigator.language,n),date:c.toLocaleString(navigator.language,i)}),a.default.createElement("div",null,w,a.default.createElement("p",{className:"event-show-details-text subtitle-1"},d),a.default.createElement("p",{className:"event-show-details-text subtitle-1"},u),a.default.createElement("p",{className:"event-show-details-text p-sec"},Object(s.a)("event-detail-repeat-item",{repeat:t}))))};var O=l.prototype;return O.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,a,l,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateSoftkey(),(t=this.element.querySelector(".event-detail-content-wrapper"))&&t.focus(),window.addEventListener("localized",this.handleLocalize),u.a.on("settings-time-format-changed",this.timeFormatChanged),n=this.busyTime.authenticatorId,a=this.busyTime.account,e.next=9,Object(s.q)();case 9:l=e.sent,o=!l||l[this.busyTime.authenticatorId+":"+a],(o="calendar-local"===a||"caldav"===n||o)||Toaster.showToast({messageL10nId:"account-sync-off-tip"}),window.addEventListener("keydown",this.handleKeydown),i.a.register("focus",this);case 15:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(a,l){var o=e.apply(t,n);function i(e){p(o,a,l,i,r,"next",e)}function r(e){p(o,a,l,i,r,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),O.componentWillUnmount=function(){window.removeEventListener("localized",this.handleLocalize),u.a.removeListener("settings-time-format-changed",this.timeFormatChanged),window.removeEventListener("keydown",this.handleKeydown),i.a.unregister("focus",this)},O.delEvent=function(){"calendar-local"===this.props.location.state.event.account||Object(s.H)()?(c.a.del(this.busyTime),d.a.go(-1)):this.showNoInternetDialog()},O.delEventCancel=function(){this.updateSoftkey()},O.showNoInternetDialog=function(){Object(s.P)({header:"dialog-title-error",type:"alert",ok:"dialog-button-ok",content:"dialog-delete-event-message"})},O.modifyEventshow=function(){Object(s.G)("right")&&d.a.push("/modifyEvent",{item:this.busyTime})},O.handleOptionMenu=function(e){var t=this.props.location.state.event,n=e;t.busytimeSDate.valueOf()===t.repeatSDate.valueOf()&&(n="allEvent"),c.a.del(t,n),d.a.go(-1)},O.getRepeatString=function(e){var t=Object(s.a)("never");switch(e){case"never":t=Object(s.a)("view-never");break;case"every day":t=Object(s.a)("view-every-day");break;case"every week":t=Object(s.a)("view-every-week");break;case"every 2 weeks":t=Object(s.a)("view-every-2-weeks");break;case"every month":t=Object(s.a)("view-every-month")}return t},O.getEventDescription=function(e){return e.description?a.default.createElement("div",null,b,a.default.createElement("p",{className:"event-show-details-text p-pri"},e.description)):null},O.renderLocation=function(e){return e?a.default.createElement(a.default.Fragment,null,a.default.createElement("p",{className:"event-show-details-text subtitle-1"},e)):null},O.render=function(){var e=this,t=this.props.location.state.event,n=this.getRepeatString(t.repeat);return a.default.createElement("div",{id:"eventDetails",className:"eventDetails",tabIndex:"-1",role:"heading","aria-labelledby":"event-show",ref:function(t){e.element=t}},a.default.createElement(v.a,{view:"event-show",headerStr:Object(s.a)("event-show-header")}),a.default.createElement("div",{className:"event-detail-content-wrapper",ref:function(t){e.eventDetailContainer=t},tabIndex:"-1",role:"menuitem"},a.default.createElement("div",null,a.default.createElement("p",{id:"modify-event-title",className:"event-show-details-title h2"},t.title?t.title:Object(s.a)("event-no-title")),this.renderLocation(t.location)),l.renderEventTime(t,n),a.default.createElement("div",null,y,a.default.createElement("p",{className:"event-show-details-text p-pri"},t.allDayEvent?Object(s.s)(t.reminder):Object(s.x)(t.reminder))),a.default.createElement("div",{className:"event-account"},E,a.default.createElement("p",{className:"event-show-details-text p-pri"},"calendar-local"===t.account?Object(s.a)("calendar-local"):t.account)),this.getEventDescription(t)))},l}(a.default.Component)}}]);