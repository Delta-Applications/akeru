(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{606:function(e,t,n){var a=n(607);"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(66)(a,o);a.locals&&(e.exports=a.locals)},607:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,".weekday-row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  height: 2.2rem; }\n\n.weekday-col {\n  flex-grow: 1;\n  flex-basis: 0;\n  max-width: 100%;\n  text-align: center;\n  color: var(--color-gs70);\n  text-transform: uppercase;\n  height: 2.2rem;\n  width: 3.4rem;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  background-color: #f5f5f5;\n  font-size: 1.2rem;\n  font-weight: 600; }\n",""])},608:function(e,t,n){var a=n(609);"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(66)(a,o);a.locals&&(e.exports=a.locals)},609:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,".week-row-cell {\n  position: relative;\n  border-right: 1px solid var(--border-color);\n  overflow: hidden;\n  cursor: pointer;\n  color: var(--color-gs100);\n  font-size: 1.6rem;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  flex-grow: 1;\n  flex-basis: 0;\n  text-align: center;\n  width: 3.4rem;\n  height: 3rem; }\n\n.week-row-disable-date,\n.week-row-navigable-wrapper {\n  margin: auto;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column; }\n\n.week-row-current-day {\n  border: 2px solid var(--color-gs80);\n  box-sizing: border-box;\n  border-radius: 2.3rem; }\n\n.week-row-pre-next-month-day {\n  border: 0 solid var(--color-gs80);\n  box-sizing: border-box;\n  border-radius: 2.3rem;\n  color: var(--color-gs00);\n  background-color: var(--color-gs45); }\n\n.week-row-disable-date {\n  color: var(--color-gs45); }\n\n.week-row-event-dots-wrapper {\n  display: flex;\n  flex-direction: row;\n  text-align: center;\n  align-items: center;\n  position: absolute;\n  pointer-events: none;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 0;\n  justify-content: center;\n  padding-top: 2.2rem; }\n\n.week-row-event-dot-circle-selected,\n.week-row-event-dot-circle-normal {\n  background: var(--color-gs45);\n  width: 0.4rem;\n  height: 0.4rem;\n  border-radius: 50%;\n  margin: 0.1rem;\n  pointer-events: none; }\n\n.week-row-navigable-wrapper.focus .week-row-event-dot-circle-selected,\n.week-row-navigable-wrapper.focus .week-row-event-dot-circle-normal {\n  background-color: var(--color-gs00); }\n\n.week-row-month-cell-span {\n  pointer-events: none; }\n\n.week-row-disable-date .week-row-month-cell-span {\n  font-size: 1.2rem; }\n\n.week-row-current-day-and-selected-day,\n.week-row-current-day {\n  border: 0.2rem solid var(--highlight-color-pressed);\n  border-radius: 0.2rem; }\n",""])},610:function(e,t,n){var a=n(611);"string"==typeof a&&(a=[[e.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(66)(a,o);a.locals&&(e.exports=a.locals)},611:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,".day-cells-row {\n  padding: 0;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n  height: 3rem;\n  border-bottom: 1px solid var(--border-color); }\n\n.day-cells-row:last-child {\n  border-bottom: none; }\n",""])},643:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(597),r=n.n(o),i=n(244),s=n.n(i),c=n(162),l=n.n(c),d=n(45),u=n.n(d),h=n(3),f=n.n(h),p=n(92),m=n.n(p),v=n(18),w=n.n(v),g=n(11),y=n(21),b=n(51),D=n(117),k=n.n(D);n(606);function E(){var e=[];return k()(7,function(t){e.push(a.default.createElement("div",{className:"weekday-col body-2",key:t,"data-l10n-id":"weekday-"+t+"-single-char"}))}),a.default.createElement("div",{className:"weekday-row"},e)}var C=n(115),S=n.n(C),x=n(90),O=n.n(x),I=n(241),M=n.n(I),L=n(44),T=n.n(L),N=n(593),j=n.n(N),A=n(600),_=n(2);var R=function(e){var t,n;function o(){for(var t,n,a,o,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=function(e){(0,t.props.tapTogoDate)(e)},(a="tapToGotoDate")in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=o.prototype;return r.shouldComponentUpdate=function(e){var t=this.props,n=t.disable,a=t.currentDay,o=t.selectedDay,r=t.dayEvents,i=t.weekStartDay;return!u()(i,e.weekStartDay)||(n!==e.disable||a!==e.currentDay||o!==e.selectedDay||JSON.stringify(r)!==JSON.stringify(e.dayEvents))},r.render=function(){var e=this,t=this.props,n=t.weekStartDay,o=t.dayEvents,r=t.disable,i=t.currentDay,s=t.selectedDay,c=t.handleDayCellClick,l=t.currentMonth,d="week-row-navigable-wrapper";r&&i&&!s?d=j()("week-row-disable-date","week-row-current-day"):r?d=j()("week-row-disable-date"):i&&s?d=j()(d,"week-row-current-day-and-selected-day","focus"):i&&!s?d=j()(d,"week-row-current-day"):!i&&s&&(d=j()(d,"week-row-selected-day","focus"),l||(d=j()(d,"week-row-pre-next-month-day")));var u=n.toLocaleString(navigator.language,{weekday:"long"}),h=n.toLocaleString(navigator.language,{day:"numeric"}),f=u+" "+h+" "+Object(_.a)("busy",{n:o.length});return a.default.createElement("div",{className:"week-row-cell",onClick:function(){c(o)}},a.default.createElement("div",{tabIndex:"-1",className:d,"aria-label":f,role:"heading",onClick:r?function(){}:function(){e.tapToGotoDate(n)}},a.default.createElement("span",{className:"week-row-month-cell-span subtitle-1","aria-hidden":"true"},h),a.default.createElement("div",{className:"week-row-event-dots-wrapper","data-num":o.length},Object(A.c)(s,o))))},o}(a.default.Component);n(608);var F=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.render=function(){for(var e=[],t=this.props,n=t.weekData,o=t.arrangeEvents,r=t.selectedDate,i=t.tapTogoDate,s=t.currentMonth,c=t.handleDayCellClick,d=n,h=0;h<7;h++){var f=u()(d,new Date),p=u()(r,d),m=l()(d,r);e.push(a.default.createElement(R,{weekStartDay:d,tapTogoDate:i,dayEvents:o[h].dayEvents,key:h,disable:!m,currentDay:f,selectedDay:p,currentMonth:s,handleDayCellClick:c})),d=T()(d,1)}return e},o}(a.default.Component);n(610);var q=function(e){var t,n;function o(){return e.apply(this,arguments)||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.prototype.render=function(){for(var e=this.props,t=e.selectedDate,n=e.arrangeEvents,o=e.tapTogoDate,r=e.currentMonth,i=e.handleDayCellClick,s=[],c=S()(t),l=O()(c),d=2;d<8;d++)s.push(a.default.createElement("div",{className:"day-cells-row",key:d},a.default.createElement(F,{weekData:l,selectedDate:t,arrangeEvents:n.slice(7*d,7*(d+1)),tapTogoDate:o,currentMonth:r,handleDayCellClick:i}))),l=M()(l,1);return s},o}(a.PureComponent),P=n(94),U=n(26),z=n(95),V=(n(602),n(599));function G(e,t,n,a,o,r,i){try{var s=e[r](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function K(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var r=e.apply(t,n);function i(e){G(r,a,o,i,s,"next",e)}function s(e){G(r,a,o,i,s,"throw",e)}i(void 0)})}}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return Q});var H=a.default.createElement(E,null),B=a.default.createElement("div",{id:"sync-progress"}),W=a.default.createElement("option",{"aria-hidden":"true","data-l10n-id":"calendar-local"}),Q=function(e){var t,n;function o(t){var n;Y(J(n=e.call(this,t)||this),"logger",new z.a("MonthView","trace")),Y(J(n),"rootNode",void 0),Y(J(n),"monthContentNode",void 0),Y(J(n),"calendarDisplay",void 0),Y(J(n),"currentContent",void 0),Y(J(n),"rootItem",document.getElementById("root")),Y(J(n),"FOCUS_SELECTOR",".week-row-navigable-wrapper"),Y(J(n),"componentDidCache",function(){n.logger.info("Month View cached!"),n.removeAllEvents()}),Y(J(n),"componentDidRecover",K(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.logger.info("Month View recovered!"),t=window,a=t.selectedDate,n.setState({selectedDate:a,arrangeEvents:U.a.arrangeEvents},function(){n.initAllEvents(),U.a.pullAllLocalEvents(a)});case 3:case"end":return e.stop()}},e)}))),Y(J(n),"changeFocus",function(){var e=n.FOCUS_SELECTOR+":focus .week-row-event-dots-wrapper",t=n.element.querySelector(e),a=t?parseInt(t.dataset.num,10):0;n.element.querySelector(".month-day-events").textContent=Object(_.a)("busy",{n:a})}),Y(J(n),"updateSoftkey",function(){if(!g.a.query("isShowOptionMenu")){var e=n.element.querySelector(".month-day-events").textContent!==Object(_.a)("busy",{n:0});y.a.register({left:"add",center:e?"select":"",right:"options"},document)}}),Y(J(n),"focus",function(){"select-multiple"!==document.activeElement.type&&n.updateSoftkey()}),Y(J(n),"fetchEventsSuccess",function(){n.logger.info("fetch all local events success!!!!!!"),n.setState({arrangeEvents:U.a.arrangeEvents})}),Y(J(n),"preMonth",function(e){var t=n.state.selectedDate,a=new Date(t.valueOf()),o=e?a.setDate(a.getDate()+e):r()(t,1);n.tapTogoDate(new Date(o)),n.processMonth(o)}),Y(J(n),"nextMonth",function(e){var t=n.state.selectedDate,a=new Date(t.valueOf()),o=e?a.setDate(a.getDate()+e):s()(t,1);n.tapTogoDate(new Date(o)),n.processMonth(new Date(o))}),Y(J(n),"swipeLeftToNextMonth",function(){n.nextMonth()}),Y(J(n),"swipeRightToPreMonth",function(){n.preMonth()}),Y(J(n),"tapTogoDate",function(e){n.setState({selectedDate:e,arrangeEvents:U.a.arrangeEvents},function(){Object(_.N)(e),n.updateSoftkey()})}),Y(J(n),"gotoDate",function(e){var t=e.target.value;if(t){var a=n.state.selectedDate,r=new Date(t);n.setState({selectedDate:r},function(){o.postProcessGotoDate(r,a)})}}),Y(J(n),"gotoToday",function(){var e=n.state.selectedDate;n.setState({selectedDate:new Date},function(){o.postProcessGotoDate(new Date,e)})}),Y(J(n),"handleCalendarDisplayChange",function(){Object(_.d)(),n.forceUpdate()}),Y(J(n),"handleLocalize",function(){n.logger.info("get lan changed event!!!!!!"),n.forceUpdate()}),Y(J(n),"handleTimeChange",function(){var e=new Date;n.setState({selectedDate:e},function(){Object(_.N)(e),U.a.pullAllLocalEvents(e,!1,!0)})}),Y(J(n),"buildOptionMenuItems",function(){n.optionItems={weekViewItem:{id:"week-view",callback:function(){b.a.replace("/week")}},dayViewItem:{id:"day-view",callback:function(){b.a.replace("/day")}},todayItem:{id:"today",callback:function(){n.gotoToday()}},gotodateItem:{id:"go-to-date",callback:function(){var e=n.state.selectedDate,t=n.element.querySelector(".date-hidden-input");t.value=f()(e,"YYYY-MM-DD"),t.focus()}},searchItem:{id:"search",callback:function(){b.a.push("/search")}},calendarToDisplayItem:{id:"calendar-to-display",callback:function(){Object(_.i)(),n.calendarDisplay.focus()}},syncCalendarItem:{id:"sync-calendar",callback:function(){Object(_.H)()?P.a.emit("synccalendar",{manualSyncMode:!0}):Toaster.showToast({messageL10nId:"error-account-offline"})}},settingsItem:{id:"settings",callback:function(){b.a.push("/settings")}}}}),Y(J(n),"handleSoftLeft",function(){Object(_.G)("left")&&b.a.push("/modifyEvent")}),Y(J(n),"showNormalModeOptions",function(){if(Object(_.G)("right")){var e=[],t=n.state.selectedDate;e.push(n.optionItems.weekViewItem),e.push(n.optionItems.dayViewItem),u()(new Date,t)||e.push(n.optionItems.todayItem),e.push(n.optionItems.gotodateItem),e.push(n.optionItems.searchItem),e.push(n.optionItems.calendarToDisplayItem),window.displayAccount.length>1&&e.push(n.optionItems.syncCalendarItem),e.push(n.optionItems.settingsItem),g.a.request("showOptionMenu",{options:e})}}),Y(J(n),"handleKeydown",function(e){if(!n.rootItem.classList.contains("hidden")){var t=null,a="rtl"===document.dir;switch(e.key){case"Enter":case"Accept":e.stopPropagation(),e.preventDefault(),n.element.querySelector(".focus").click();break;case"SoftRight":e.stopPropagation(),e.preventDefault(),n.showNormalModeOptions();break;case"SoftLeft":e.stopPropagation(),e.preventDefault(),n.handleSoftLeft();break;case"ArrowDown":e.stopPropagation(),e.preventDefault(),t=n.findNextFocus(7);break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),t=n.findNextFocus(-7);break;case"ArrowLeft":e.stopPropagation(),e.preventDefault(),Object(_.I)()||(t=n.findNextFocus(a?1:-1));break;case"ArrowRight":e.stopPropagation(),e.preventDefault(),Object(_.I)()||(t=n.findNextFocus(a?-1:1))}t&&n.changeFocusItem(t)}}),Y(J(n),"changeFocusItem",function(e){if(e){var t=n.element.querySelector(n.FOCUS_SELECTOR+".focus");t&&t.classList.remove("focus"),e.scrollIntoView(!1),e.classList.add("focus"),e.focus()}}),Y(J(n),"handleDayCellClick",function(e){1===e.length?b.a.push("/eventDetails",{event:e[0]}):e.length>1&&b.a.push("/agenda",{id:f()(e[0].busytimeSDate,"MMMM D")})});var a=window.selectedDate;return n.state={selectedDate:a,arrangeEvents:U.a.arrangeEvents},t.cacheLifecycles.didCache(n.componentDidCache),t.cacheLifecycles.didRecover(n.componentDidRecover),n.buildOptionMenuItems(),n.handleTimeChange=n.handleTimeChange.bind(J(n)),n.handleKeydown=n.handleKeydown.bind(J(n)),n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o.postProcessGotoDate=function(e,t){Object(_.N)(e),l()(t,e)||U.a.pullAllLocalEvents(e)};var i=o.prototype;return i.componentDidMount=function(){var e=K(regeneratorRuntime.mark(function e(){var t,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updateSoftkey(),(t=this.element.querySelector(".week-row-current-day-and-selected-day")).classList.add("focus"),g.a.query("isShowOptionMenu")||t.focus(),this.initAllEvents(),TimeService.addEventListener("timeChange",this.handleTimeChange),n=window,a=n.firstEnterMonth,o=this.state.selectedDate,U.a.on("open-db-success",function(){a||(window.firstEnterMonth=!0,U.a.pullAllLocalEvents(o))}),U.a.openDbSuccFlag&&!a&&(window.firstEnterMonth=!0,U.a.pullAllLocalEvents(o));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i.componentDidUpdate=function(){var e=this.element.querySelector(".focus");e&&!g.a.query("isShowOptionMenu")&&e.focus(),this.element.parentNode.classList.contains("cache-route-uncached")&&this.updateSoftkey()},i.componentWillUnmount=function(){this.removeAllEvents(),TimeService.removeEventListener("timeChange",this.handleTimeChange)},i.findNextFocus=function(e){var t=Array.from(this.element.querySelectorAll(this.FOCUS_SELECTOR));if(!t.length)return null;var n=this.element.querySelector(this.FOCUS_SELECTOR+".focus")||t[0],a=null,o=0;if(t.some(function(t,a){return t===n&&(o=a+e,!0)}),o<0){var r=this.element.querySelector(this.FOCUS_SELECTOR+".focus");r&&r.classList.remove("focus"),this.preMonth(e)}else if(o>=t.length){var i=this.element.querySelector(this.FOCUS_SELECTOR+".focus");i&&i.classList.remove("focus"),this.nextMonth(e)}else{a=t[o];var s=window.selectedDate,c=new Date(s.valueOf());c=c.setDate(c.getDate()+e),this.tapTogoDate(new Date(c))}return a},i.processMonth=function(e){U.a.pullAllLocalEvents(e)},i.initAllEvents=function(){U.a.on("fetch-events-success",this.fetchEventsSuccess),window.addEventListener("localized",this.handleLocalize),document.addEventListener("keydown",this.handleKeydown),g.a.register("focus",this),g.a.register("preMonth",this),g.a.register("nextMonth",this),g.a.register("changeFocus",this)},i.removeAllEvents=function(){U.a.removeListener("fetch-events-success",this.fetchEventsSuccess),window.removeEventListener("localized",this.handleLocalize),document.removeEventListener("keydown",this.handleKeydown),g.a.unregister("focus",this),g.a.unregister("preMonth",this),g.a.unregister("nextMonth",this),g.a.unregister("changeFocus",this)},i.getArrangeEvents=function(){var e=this.state.arrangeEvents,t=window.displayAccount;if(!e||!t||!t.length)return e;var n=[];return e.forEach(function(e){e.dayEvents.forEach(function(e){var a=t.findIndex(function(t){return t.value===e.account||Object(_.a)(t.value)===e.account});-1===n.findIndex(function(t){return t.busytimeId===e.busytimeId})&&-1!==a&&t[a].checked&&n.push(e)})}),Object(_.c)(window.selectedDate,n)},i.getHeaderStr=function(e){return e.toLocaleString(navigator.language,{year:"numeric",month:"long"})},i.renderCells=function(e){var t=this,n=this.state.selectedDate;return a.default.createElement("div",{className:"month-content",id:"current-month-content",ref:function(e){t.currentContent=e}},a.default.createElement(q,{selectedDate:n,arrangeEvents:e,tapTogoDate:this.tapTogoDate,handleDayCellClick:this.handleDayCellClick,currentMonth:!0}))},i.renderAgenda=function(e){var t=this.state.selectedDate,n=m()(e,function(e){return u()(e.day,t)}),o=!1;w()(n)||n.dayEvents.length>0&&(o=!0);var r=Object(_.a)("busy",{n:0});return o&&n&&n.dayEvents.length&&(r=Object(_.a)("busy",{n:n.dayEvents.length})),a.default.createElement("div",{className:"month-day-events"},r)},i.render=function(){var e=this,t=this.state.selectedDate,n=this.getArrangeEvents(),o=this.getHeaderStr(t);return a.default.createElement("div",{ref:function(t){e.element=t},role:"heading","aria-labelledby":"month-header"},a.default.createElement(V.a,{view:"month-header",headerStr:o}),a.default.createElement("div",{id:"monthView",className:"monthView",ref:function(t){e.rootNode=t},tabIndex:"-1"},H,B,a.default.createElement("div",{className:"monthsContents",id:"monthsContents",ref:function(t){e.monthContentNode=t}},this.renderCells(n)),this.renderAgenda(n)),a.default.createElement("input",{className:"date-hidden-input","aria-hidden":"true","data-track-class":"end-date-track",min:"1970-1-1",max:"2035-12-31",type:"date",onChange:function(t){return e.gotoDate(t)}}),a.default.createElement("select",{name:"calendarId",className:"p-sec calendarId-select","data-track-class":"title-calendar",multiple:"multiple",onChange:function(t){return e.handleCalendarDisplayChange(t)},ref:function(t){e.calendarDisplay=t},onBlur:function(){e.updateSoftkey()}},W))},o}(a.default.Component)}}]);