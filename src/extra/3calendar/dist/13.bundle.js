(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{628:function(e,t,n){var r=n(629);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(66)(r,a);r.locals&&(e.exports=r.locals)},629:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,"#searchView {\n  display: flex;\n  width: 100%;\n  background-color: var(--color-gs00);\n  flex-direction: column;\n  overflow: hidden;\n  position: absolute;\n  height: calc(100% - var(--statusbar-softkeybar-height)); }\n\n.search-events-wrapper {\n  overflow: auto;\n  height: 100%; }\n\n.search-result-color {\n  font-weight: bold; }\n\n.focus .search-result-color {\n  color: var(--color-gs00); }\n\n#searchView .search-bar-wrapper {\n  height: 2.6rem;\n  margin: 0;\n  padding: 0.5rem 1rem; }\n\n#event-search-input {\n  width: 20rem;\n  height: 2.6rem;\n  color: var(--color-gs90);\n  padding: 0 1rem;\n  border-radius: 0.2rem;\n  background-color: var(--color-gs00); }\n\n.search-hint-wrapper {\n  height: 2.4rem;\n  line-height: 2.4rem;\n  color: var(--color-gs70);\n  background-color: var(--color-gs10);\n  padding: 0 1rem; }\n\n.agenda-no-results {\n  display: flex;\n  align-items: center;\n  color: var(--color-gs90);\n  align-items: center;\n  justify-content: center;\n  height: 100%; }\n\n.search-event {\n  height: 4rem;\n  width: 100%;\n  padding: 1rem;\n  border-left: 0.4rem solid var(--highlight-color); }\n\n.search-event.focus {\n  border-left-color: var(--color-gs10); }\n\n.event-title {\n  line-height: normal;\n  margin-bottom: 0.5rem;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  padding-right: 2rem; }\n\n.event-reminder-icon {\n  position: absolute;\n  right: 0.5rem;\n  height: 1.6rem;\n  width: 1.6rem;\n  font-size: 1.6rem;\n  color: var(--highlight-color); }\n\n.focus .event-reminder-icon {\n  color: var(--color-gs00); }\n\n.event-start-datetime {\n  line-height: 136%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis; }\n",""])},638:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(0),a=n(63),s=n.n(a),o=n(21),i=n(2),l=n(51),c=n(26);n(628);function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=r.default.createElement("span",{className:"event-reminder-icon","data-icon":"reminder"}),v=r.default.createElement("div",{tabIndex:"-1",className:"agenda-no-results h2","data-l10n-id":"no-results"}),f=function(e){var t,n;function a(t){var n;return u(h(n=e.call(this,t)||this),"node",void 0),u(h(n),"FOCUS_SELECTOR",".search-focus"),u(h(n),"highlightSearchWord",function(e,t){var n=e.textContent,r=n.toLowerCase().indexOf(t);if(r>=0){var a=n.substring(0,r),s=n.substring(r,r+t.length),o='<span className="search-result-color">'+s+"</span>",i=n.substring(r+s.length,n.length);e.innerHTML=""+a+o+i}}),u(h(n),"matchFlag",function(e,t){var n=!1;return t.indexOf(e)>=0&&(n=!0),n}),u(h(n),"search",function(){var e=n.element.querySelector("#event-search-input").value,t=n.state.filterEvents,r=e.trim().toLowerCase();if(r.length>0){var a=s()(t,function(e){return n.matchFlag(r,e.title?e.title.toLowerCase():Object(i.a)("event-no-title").toLowerCase())});a.length>0?n.setState({renderFilterEvents:a,searchHint:"search-results"},function(){for(var e=document.querySelectorAll(".event-title"),t=0;t<e.length;t++)n.highlightSearchWord(e[t],r)}):n.setState({renderFilterEvents:[],searchHint:"search-results"})}else n.setState({renderFilterEvents:t,searchHint:"upcoming-events"})}),u(h(n),"exitSearchMode",function(){l.a.go(-1)}),u(h(n),"showEvent",function(e){l.a.push("/eventDetails",{event:e})}),u(h(n),"handleLocalize",function(){n.forceUpdate()}),u(h(n),"updateSoftkey",function(){o.a.register({left:"back",center:"",right:""},document)}),u(h(n),"handleKeydown",function(e){var t=null;switch(e.key){case"Enter":e.stopPropagation(),e.preventDefault(),n.handlKeydownClick();break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),t=n.findNext(-1);break;case"ArrowDown":e.stopPropagation(),e.preventDefault(),t=n.findNext(1);break;case"Backspace":case"SoftLeft":e.stopPropagation(),e.preventDefault(),l.a.go(-1)}n.changeFocusItem(t)}),u(h(n),"changeFocusItem",function(e){if(e){var t=n.element.querySelector(n.FOCUS_SELECTOR+".focus");t&&t.classList.remove("focus"),e.scrollIntoView(!1),e.classList.add("focus"),e.focus();var r=e.querySelector(".textfield");r&&r.focus()}}),u(h(n),"getSearchEvents",function(){c.a.pullAllSearchEvents(new Date)}),n.state={searchHint:"upcoming-events",filterEvents:[],renderFilterEvents:[]},n.updateEventsSuccess=n.updateEventsSuccess.bind(h(n)),n.handleKeydown=n.handleKeydown.bind(h(n)),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.getAllEventsInSearchRange=function(e){for(var t=[],n=e.startTime,r=e.endTime,a=c.a.arrangeSearchEvents.length,s=0;s<a;s++){for(var o=c.a.arrangeSearchEvents[s],l=o.dayEvents.length,h=[],u=0;u<l;u++){var d=o.dayEvents[u];Object(i.V)(n,r,new Date(d.startDate+" "+d.startTime),new Date(d.startDate+" "+d.startTime))&&h.push(d)}if(h.length>0)for(var v=Object(i.R)(h),f=0;f<v.length;f++)t.push(v[f])}return t};var f=a.prototype;return f.componentDidMount=function(){this.updateSoftkey(),this.element.focus();var e=this.element.querySelector(this.FOCUS_SELECTOR+".search-bar-wrapper"),t=e.querySelector(".textfield");e.classList.add("focus"),e.focus(),t.focus();var n=new Date,r=Object(i.l)(n);this.setState({filterEvents:a.getAllEventsInSearchRange(r),renderFilterEvents:a.getAllEventsInSearchRange(r)}),c.a.pullAllSearchEvents(new Date),this.initAllEvents()},f.shouldComponentUpdate=function(){for(var e=document.querySelectorAll(".event-title"),t=0;t<e.length;t++)e[t].innerHTML=""},f.componentWillUnmount=function(){this.removeAllEvents()},f.handlKeydownClick=function(){var e=this.element.querySelector(".focus");e&&e.click()},f.findNext=function(e){var t=Array.from(this.element.querySelectorAll(this.FOCUS_SELECTOR));if(!t.length)return null;var n=this.element.querySelector(this.FOCUS_SELECTOR+".focus")||t[0],r=-1;return t.some(function(a,s){return a===n&&(r=(s+t.length+e)%t.length,!0)}),-1===r?null:t[r]},f.updateEventsSuccess=function(){var e=new Date,t=Object(i.l)(e);this.setState({filterEvents:a.getAllEventsInSearchRange(t),renderFilterEvents:a.getAllEventsInSearchRange(t)})},f.initAllEvents=function(){window.addEventListener("localized",this.handleLocalize),c.a.on("fetch-search-events-success",this.updateEventsSuccess),c.a.on("fetch-events-success",this.getSearchEvents),window.addEventListener("keydown",this.handleKeydown)},f.removeAllEvents=function(){window.removeEventListener("localized",this.handleLocalize),c.a.removeListener("fetch-search-events-success",this.updateEventsSuccess),c.a.removeListener("fetch-events-success",this.getSearchEvents),window.removeEventListener("keydown",this.handleKeydown)},f.handleEventClick=function(e){l.a.push("/eventDetails",{event:e})},f.renderAllRangeEvents=function(){var e=this,t=this.state.renderFilterEvents,n=window.selectedDate,a=[];return t.forEach(function(t){var s=t.title?t.title:Object(i.a)("event-no-title"),o=Object(i.C)(t,n),l=r.default.createElement("li",{className:"search-event search-focus",tabIndex:"-1",role:"menuitem",onClick:function(){e.handleEventClick(t)}},r.default.createElement("div",{className:"event-text"},r.default.createElement("span",{className:"event-title p-pri"},s),d),r.default.createElement("span",{className:"event-start-datetime p-sec"},o));a.push(l)}),a},f.render=function(){var e=this,t=this.state,n=t.searchHint,a=t.renderFilterEvents;return r.default.createElement("div",{id:"searchView",className:"searchView",tabIndex:"-1",ref:function(t){e.element=t}},r.default.createElement("div",{className:"search-bar-wrapper search-focus"},r.default.createElement("input",{name:"search",className:"textfield p-pri",maxlength:"100","x-inputmode":"latin-prose",id:"event-search-input",type:"text","data-l10n-id":"kai-event-search-header",onInput:function(t){e.search(t)}})),r.default.createElement("div",{className:"search-hint-wrapper p-sec","data-l10n-id":n}),r.default.createElement("div",{className:"search-events-wrapper"},a.length>0?this.renderAllRangeEvents():v))},a}(r.default.Component)}}]);