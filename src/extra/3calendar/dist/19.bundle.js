(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{636:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var c=n(0),a=n(11),o=n(21),i=n(163),r=n(26),s=n(94),u=n(51),l=n(599),d=n(2);n(601);function h(e,t,n,c,a,o,i){try{var r=e[o](i),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(c,a)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){var t,n;function v(t){var n;p(f(n=e.call(this,t)||this),"isCaldavAcc",!1),p(f(n),"authenticatorId",""),p(f(n),"FOCUS_SELECTOR",".del-account-focus"),p(f(n),"handleLocalize",function(){n.forceUpdate()}),p(f(n),"successLogoutAccount",function(){var e=n.props.location;r.a.removeAccountEvents(e.state.account),u.a.go(-1)}),p(f(n),"failedLogoutAccount",function(e){r.a.showToaster(Object(d.b)(e.toString()))}),p(f(n),"removeAccount",function(){var e=n.props.location.state.account;"caldav"===e.authenticatorId?(Object(d.K)(e),u.a.go(-1)):i.a.managerLogout(e)}),p(f(n),"handleKeydown",function(e){var t=null;switch(e.key){case"Enter":case"Accept":n.isCaldavAcc||(e.stopPropagation(),e.preventDefault(),n.handlKeydownClick());break;case"Backspace":e.stopPropagation(),e.preventDefault(),u.a.go(-1);break;case"SoftLeft":e.stopPropagation(),e.preventDefault(),n.showDeleteAccDialog();break;case"ArrowDown":e.stopPropagation(),e.preventDefault(),t=n.findNext(1);break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),t=n.findNext(-1)}n.changeFocusItem(t)}),p(f(n),"changeFocusItem",function(e){if(e){var t=n.element.querySelector(n.FOCUS_SELECTOR+".focus");t&&t.classList.remove("focus"),e.scrollIntoView(!1),e.classList.add("focus"),e.focus(),n.updateSoftkey()}}),p(f(n),"updateSoftkey",function(){var e=n.element.querySelectorAll(n.FOCUS_SELECTOR),t="select",c="delete-account";e[0].classList.contains("focus")&&(n.isCaldavAcc||"google"===n.authenticatorId)&&(t=""),e.length>1&&e[1].classList.contains("focus")&&(c="",t=e[1].querySelector("input").checked?"deselect":"select"),o.a.register({left:c,center:t,right:""},document)});var c=n.props.location;return n.isCaldavAcc="caldav"===c.state.account.authenticatorId,n.authenticatorId=c.state.account.authenticatorId,n.handleKeydown=n.handleKeydown.bind(f(n)),n}n=e,(t=v).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var m=v.prototype;return m.componentDidMount=function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.element.querySelector(this.FOCUS_SELECTOR)).classList.add("focus"),t.focus(),this.updateSoftkey(),this.initAllEvents();case 5:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(c,a){var o=e.apply(t,n);function i(e){h(o,c,a,i,r,"next",e)}function r(e){h(o,c,a,i,r,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}(),m.componentWillUnmount=function(){this.removeAllEvents()},m.initAllEvents=function(){window.addEventListener("localized",this.handleLocalize),r.a.on("account-logout-success",this.successLogoutAccount),r.a.on("account-logout-failed",this.failedLogoutAccount),window.addEventListener("keydown",this.handleKeydown),a.a.register("hideDialog",this)},m.removeAllEvents=function(){window.removeEventListener("localized",this.handleLocalize),r.a.removeListener("account-logout-success",this.successLogoutAccount),r.a.removeListener("account-logout-failed",this.failedLogoutAccount),window.removeEventListener("keydown",this.handleKeydown),a.a.unregister("hideDialog",this)},m.hideDialog=function(){this.updateSoftkey()},m.showDeleteAccDialog=function(){Object(d.P)({header:"advances-settings-delete-account",type:"confirm",cancel:"cancel",ok:"delete",content:"advances-settings-delete-account-msg",onOk:this.removeAccount})},m.handlKeydownClick=function(){var e=this.element.querySelector(".focus"),t=this.element.querySelector(".focus .sync-switch-input");e&&e.click(),t&&t.click()},m.findNext=function(e){var t=Array.from(this.element.querySelectorAll(this.FOCUS_SELECTOR));if(!t.length)return null;var n=this.element.querySelector(this.FOCUS_SELECTOR+".focus")||t[0],c=-1;return t.some(function(a,o){return a===n&&(c=(o+t.length+e)%t.length,!0)}),-1===c?null:t[c]},m.handleAccountClick=function(e){"activesync"===e.authenticatorId&&u.a.push("/changePassword",{account:e})},m.handleCheckboxClick=function(e){var t=this.props.location,n=t.state.account.accountId,c=t.state.account.authenticatorId+":"+n;SettingsObserver.getValue("calendarSyncEnable").then(function(t){if(t){var n=e.target.checked;t[c]=n,SettingsObserver.setValue([{name:"calendarSyncEnable",value:t}]),window.calendarSync[c]=n,n&&s.a.emit("synccalendar",{manualSyncMode:!0})}}),this.updateSoftkey()},m.renderAsyncAccount=function(){var e=this,t=this.props.location.state.account,n=t.authenticatorId+":"+t.accountId;return c.default.createElement("li",{className:"sync-switch del-account-focus",tabIndex:"-1"},c.default.createElement("label",{className:"pack-checkbox-large"},c.default.createElement("input",{className:"sync-switch-input",type:"checkbox",onChange:function(t){e.handleCheckboxClick(t)},checked:window.calendarSync[n]}),c.default.createElement("span",{className:"sync-text p-pri"},Object(d.a)("syncing-header"))))},m.renderAccount=function(){var e=this,t=this.props.location;return c.default.createElement("div",{tabIndex:"-1",className:"delete-account-item del-account-focus",onClick:function(){e.handleAccountClick(t.state.account)}},c.default.createElement("span",{className:"account-show-details-text p-pri"},t.state.account.accountId))},m.render=function(){var e=this;return c.default.createElement("div",{id:"delete-account",className:"settings delete-account-view",tabIndex:"-1",role:"heading","aria-labelledby":"delete-account-head",ref:function(t){e.element=t}},c.default.createElement(l.a,{view:"delete-account-head",headerStr:Object(d.a)("delete-account-header")}),this.renderAccount(),this.isCaldavAcc?"":this.renderAsyncAccount())},v}(c.default.Component)}}]);