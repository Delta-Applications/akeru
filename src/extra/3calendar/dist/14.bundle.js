(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{619:function(e,t,n){var r=n(620);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(66)(r,a);r.locals&&(e.exports=r.locals)},620:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,'.weekView {\n  display: flex;\n  width: 100%;\n  background-color: var(--color-gs00);\n  color: var(--color-gs00);\n  flex-direction: column;\n  overflow: hidden;\n  position: absolute; }\n\n.week-view-sticker-date {\n  width: 100%;\n  height: 4rem;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: row;\n  background-color: var(--header-background); }\n\n.week-view-all-space {\n  position: absolute;\n  width: 3rem;\n  height: 4rem; }\n\n.week-view-days-wrapper {\n  height: 100%;\n  width: calc(100% - 3rem);\n  position: absolute;\n  right: 0;\n  top: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: row; }\n\n.week-view-days-wrapper-date {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  flex-grow: 0;\n  flex-basis: calc(100% / 7);\n  width: calc(100% / 7); }\n\n.week-view-sticker-single-all-day {\n  height: 100%;\n  flex-grow: 0;\n  flex-basis: calc(100% / 7);\n  width: calc(100% / 7);\n  overflow: hidden;\n  display: flex;\n  flex-direction: row;\n  text-align: center;\n  align-items: center;\n  justify-content: center; }\n\n.week-view-sticky {\n  width: 100%;\n  height: 2.8rem;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: row; }\n\n.week-view-all-day {\n  height: 2.8rem;\n  width: 3rem;\n  line-height: 2rem;\n  font-weight: bold;\n  color: var(--color-gs70);\n  position: absolute;\n  text-align: right;\n  font-size: 1.2rem; }\n\n.week-view-alldays-wrapper {\n  width: calc(100% - 3rem);\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n  overflow: hidden; }\n\n.week-view-day-name {\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  font-weight: 300;\n  font-size: 1.7rem;\n  margin: 0; }\n\n.week-view-week-header {\n  height: 100%;\n  position: relative;\n  display: block; }\n\n.week-view-upSpan {\n  font-weight: 400;\n  font-size: 1.2rem;\n  color: var(--color-gs70);\n  position: absolute;\n  line-height: 1;\n  margin-bottom: 0.2rem;\n  display: block;\n  width: 100%;\n  text-align: center; }\n\n.week-view-downSpan {\n  font-weight: 400;\n  color: var(--color-gs90);\n  position: absolute;\n  top: 1.4rem;\n  display: block;\n  text-align: center;\n  font-size: 1.6rem;\n  line-height: 2.4rem;\n  height: 2.4rem;\n  width: 3rem;\n  margin-top: 0.2rem; }\n\n.week-view-currentDate {\n  color: var(--header-color);\n  font-weight: 700; }\n\n.week-view-selectedDate {\n  color: var(--color-gs00);\n  background-color: var(--highlight-color); }\n\n.week-view-main {\n  height: 15.1rem;\n  position: relative;\n  display: flex;\n  flex-direction: row; }\n\nhtml[dir="rtl"] .weekView .week-view-sticker-date {\n  right: 3.0rem; }\n\nhtml[dir="rtl"] .weekView .week-view-all-day {\n  right: -0.5rem; }\n\nhtml[dir="rtl"] .weekView .week-view-left-hour-tag {\n  right: 0.5rem; }\n\nhtml[dir="rtl"] .week-view-events_container-wrapper {\n  right: 0rem; }\n\nhtml[dir="rtl"] .weekView .week-view-alldays-wrapper {\n  right: 3rem; }\n\nhtml[dir="rtl"] .weekView .week-view-main-content,\nhtml[dir="rtl"] .weekView .bubble_event {\n  transform: rotateY(180deg); }\n\nhtml[dir="rtl"] .week-view-events_container-wrapper .bubble_event {\n  border-left-style: none;\n  border-left-width: 0;\n  border-right-style: solid;\n  border-right-width: 0.3rem; }\n\n.week-view-main-content {\n  position: relative;\n  background-color: var(--color-gs00);\n  z-index: 0;\n  height: 72rem;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex: 0 0 100%; }\n\n.week-view-hour {\n  width: 100%;\n  height: 4.8rem;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  flex-direction: row; }\n\n.week-view-allday-event-common-wrapper {\n  white-space: nowrap;\n  overflow: hidden;\n  line-height: 2rem;\n  font-weight: 400;\n  font-size: 1.2rem;\n  text-overflow: ellipsis; }\n\n.week-view-allday-event-wrapper {\n  background-color: var(--color-orange);\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 0.3rem; }\n\n.week-view-events_container-wrapper {\n  position: absolute;\n  left: 3rem;\n  width: calc(100% - 3rem);\n  height: 72rem;\n  top: 0; }\n\n.week-view-left-hour-tag {\n  position: absolute;\n  left: 0;\n  width: 3rem;\n  height: 72rem;\n  top: 0;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  z-index: 1; }\n\n.week-view-all-day-events-wrapper {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.week-view-hour-small-wrapper,\n.week-view-hour-small-wrapper-current-hour {\n  flex-grow: 1; }\n\n.week-view-odd-hour {\n  background-color: var(--header-background); }\n\n.week-view-hour-small-current-add {\n  color: var(--color-gs100);\n  font-size: 2.4rem; }\n\n.week-overlapped-event {\n  position: absolute;\n  width: calc(100% / 7);\n  height: 100%;\n  top: 0;\n  display: flex;\n  flex-direction: column;\n  flex: 1; }\n\n.week-view-all-day-wrapper {\n  font-weight: bold;\n  color: var(--GS00);\n  white-space: nowrap;\n  display: flex;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-left-style: none;\n  background-color: var(--highlight-color);\n  border-radius: 0.6rem;\n  margin-left: 1.2rem;\n  margin-top: 1.2rem; }\n\n.week-view-focus.focus .week-view-all-day-wrapper {\n  background-color: var(--color-gs00) !important; }\n\n.week-view-all-day-wrapper.week-view-all-day-more {\n  align-content: center;\n  text-align: center;\n  justify-content: center; }\n\n.week-view-all-day-span {\n  padding-right: 1.05rem; }\n\n.week-view-all-day-split {\n  width: calc(100% / 7);\n  height: 100%;\n  display: flex;\n  flex-direction: column; }\n\n.week-view-all-day-split-wrapper {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  flex: 1; }\n\n.week-event-dot-circle-normal {\n  background: var(--color-gs40);\n  width: 0.5rem;\n  height: 0.5rem;\n  border-radius: 50%;\n  margin: 0.1rem;\n  pointer-events: none; }\n\n.week-event-dots-wrapper {\n  display: flex;\n  flex-direction: row;\n  text-align: center;\n  align-items: center;\n  position: absolute;\n  pointer-events: none;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  top: 1rem;\n  justify-content: center;\n  padding-top: 3rem; }\n\n.large-text .week-event-dots-wrapper {\n  top: 1.8rem; }\n\n.week-separator {\n  display: flex;\n  align-items: left;\n  height: 1.7rem;\n  /*! flex-grow: 1; */ }\n\n#zero-clock {\n  font-size: 1.4rem;\n  font-weight: 600;\n  color: var(--color-gs70);\n  width: 3rem;\n  text-align: center;\n  left: 0.2rem; }\n\n#zero-separator {\n  height: 1.7rem;\n  background-color: var(--header-background);\n  width: calc(100% - 3rem); }\n\nhtml[dir="rtl"] .weekView #zero-clock {\n  right: 0.2rem; }\n\nhtml[dir="rtl"] .weekView #zero-separator {\n  right: 3rem; }\n\n.week-view-focus:focus {\n  border: 2px solid var(--color-gs80);\n  box-sizing: border-box;\n  border-radius: 0.2rem;\n  color: var(--color-gs00); }\n\n.week-main-container {\n  overflow-y: scroll;\n  overflow-x: hidden;\n  height: 15.1rem; }\n\n#weekView #progress-indicator {\n  display: block;\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 0.3rem;\n  border: none;\n  overflow: hidden;\n  z-index: 1000;\n  top: 4.1rem; }\n',""])},642:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(117),o=n.n(a),i=n(594),l=n.n(i),c=n(76),s=n.n(c),u=n(44),d=n.n(u),p=n(598),f=n.n(p),v=n(241),h=n.n(v),w=n(90),m=n.n(w),y=n(595),g=n.n(y),k=n(162),D=n.n(k),b=n(3),E=n.n(b),x=n(45),S=n.n(x),O=n(11),A=n(21),C=n(26),R=n(2),I=n(603),L=n(51),F=n(94),N=n(95),_=n(596),T=n.n(_);var j=r.default.createElement("div",{className:"week-event-dots-wrapper"},r.default.createElement("div",{className:"week-event-dot-circle-normal"})),H=r.default.createElement("span",{className:"week-view-all-space"}),W=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.renderStickerWrapperDate=function(e){var t=this.props,n=t.selectedDay,a=t.tapTogoDate,o=t.daysEvents,i=t.switchDay,l=n.getDay()-e;"preDay"===i?l=-1*e:"lastDay"===i&&(l=6-e);var c=o[e]?o[e].allDayEvents.length+o[e].notAllDayEvents.length:0,u=new Date;u=l>=0?s()(n,l):d()(n,Math.abs(l));var p="week-view-downSpan subtitle-1";return T()(u)&&(p+=" week-view-currentDate"),S()(u,n)&&(p+=" week-view-selectedDate"),r.default.createElement("div",{className:"week-view-days-wrapper-date",key:e,role:"presentation",onClick:function(){a(u)}},r.default.createElement("h1",{className:"week-view-day-name"},r.default.createElement("span",{className:"week-view-week-header"},r.default.createElement("span",{className:"week-view-upSpan","data-l10n-id":"weekday-"+e+"-single-char"}),r.default.createElement("span",{className:p},u.getDate()),c?j:null)))},i.render=function(){var e=this,t=[];return o()(7,function(n){t.push(e.renderStickerWrapperDate(n))}),r.default.createElement("div",{className:"week-view-sticker-date"},H,r.default.createElement("div",{className:"week-view-days-wrapper",id:"week-view-days-wrapper"},t))},a}(r.default.Component);var q=function(e){var t,n;function a(){for(var t,n,r,a,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a=function(e,t){1===t&&L.a.push("/eventDetails",{event:e})},(r="showEvent")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.shouldComponentUpdate=function(e){var t=this.props,n=t.eventGap,r=t.color,a=t.eventLength;return JSON.stringify(n)!==JSON.stringify(e.eventGap)||r!==e.color||a!==e.eventLength},o.render=function(){var e=this,t=this.props,n=t.event,a=t.color,o=t.eventLength,i=o>1?"bubble_event week-view-all-day-wrapper week-view-all-day-more h6":"bubble_event week-view-all-day-wrapper h6";return r.default.createElement("div",{className:i,style:{backgroundColor:a},"data-busytimeid":n.busytimeId,onClick:function(){e.showEvent(n,o)}})},a}(r.default.Component);var M=r.default.createElement("div",{className:"week-view-all-day"},r.default.createElement("span",{className:"week-view-all-day-span","data-l10n-id":"all-day"},"24H")),U=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.shouldComponentUpdate=function(e){var t=this.props,n=t.selectedDay,r=t.totalAllDayEvents,a=JSON.stringify(r)!==JSON.stringify(e.totalAllDayEvents);return!S()(n,e.selectedDay)||a},i.renderAllDayEvents=function(){var e=this.props,t=e.totalAllDayEvents,n=e.selectedDay,a=e.clickHandler;return r.default.createElement("div",{className:"week-view-all-day-events-wrapper"},t.map(function(e,t){var o=Object(R.J)(e),i=Object(R.e)(e,n);return r.default.createElement(q,{event:e,color:o,eventGap:i,key:t,clickHandler:a})}))},i.renderEventsIndicators=function(){var e=this.props,t=e.totalAllDayEvents,n=e.clickHandler,a=e.startDayWeek,i=[];return o()(7,function(e){var o=t[e].dayAllDayEvents,l=[];if(o.length>0){var c=o[0],s=Object(R.J)(c);l.push(r.default.createElement(q,{event:c,color:s,eventGap:{width:"100%",marginLeft:0},key:e,eventLength:o.length}))}var u=new Date(a.valueOf()),d=u.setDate(u.getDate()+e),p="week-view-all-day-split week-view-focus week-day-"+e;i.push(r.default.createElement("div",{tabIndex:"-1",className:p,"data-date":d,"data-id":e,onClick:n,role:"presentation"},l))}),i},i.render=function(){return r.default.createElement("div",{className:"week-view-all-day-container"},M,r.default.createElement("div",{className:"week-view-sticky"},r.default.createElement("div",{className:"week-view-alldays-wrapper"},r.default.createElement("div",{className:"week-view-all-day-split-wrapper"},this.renderEventsIndicators()))))},a}(r.default.Component),V=n(604);var z=function(e){var t,n;function a(){for(var t,n,r,a,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a=function(e,n,r){(0,t.props.clickHandler)(e,n,r)},(r="clickHandler")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.shouldComponentUpdate=function(e){var t=this.props,n=t.currentHourSelectedDay,r=t.index,a=t.dayIndex,o=t.clickFlag,i=t.calculateDay;return n!==e.currentHourSelectedDay||r!==e.index||a!==e.dayIndex||o!==e.clickFlag||i!==e.calculateDay},o.render=function(){var e=this,t=this.props,n=t.currentHourSelectedDay,a=t.index,o=t.dayIndex,i=t.calculateDay,l=a%2?"week-view-odd-hour":"week-view-even-hour";return n?r.default.createElement("div",{tabIndex:"-1",className:"week-view-hour-small-wrapper-current-hour week-view-focus "+l+" week-day-"+o+" focus","data-id":o,"data-index":a,"data-calculateday":i.valueOf(),role:"heading",onClick:function(){e.clickHandler(a,o,!0)}}):r.default.createElement("div",{tabIndex:"-1",className:"week-view-hour-small-wrapper week-view-focus week-day-"+o+" "+l,"data-id":o,"data-index":a,"data-calculateday":i.valueOf(),role:"heading",onClick:function(){e.clickHandler(a,o,!1)}})},a}(r.default.Component),P=n(605);var G=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.shouldComponentUpdate=function(e){var t=this.props,n=t.dayIndex,r=t.notAllDayEvents,a=t.selectedDay,o=t.calculateDay;return JSON.stringify(r)!==JSON.stringify(e.notAllDayEvents)||n!==e.dayIndex||!S()(a,e.selectedDay)||!S()(o,e.calculateDay)},i.renderOverLappedEvents=function(e){var t=this.props,n=t.currentHour,a=t.selectedDay,i=t.clickHandler,l=t.calculateDay,c=t.notAllDayEvents,s=t.current,u=t.clickFlag,d=t.switchDay,p="calc(100% * "+e+" / 7)",f=[];return o()(24,function(t){var o=!1;o=!document.querySelector("#weekView .week-view-all-day-split.week-view-focus.focus")&&("preDay"===d?t===n&&0===e:"lastDay"===d?t===n&&6===e:t===n&&e===a.getDay()),f.push(r.default.createElement(z,{currentHourSelectedDay:o,dayIndex:e,calculateDay:l,index:t,clickHandler:i,clickFlag:u,key:t}))}),r.default.createElement("div",{id:"events-wrapper-"+e,className:"week-overlapped-event",style:{left:p},key:e},f,s?c.map(function(t){return r.default.createElement(P.a,{relatedEvent:{e:t,currentDay:l,dayWeek:!1,dayIndex:e},type:"week",key:t.uuid})}):null)},i.render=function(){var e=this.props.dayIndex;return this.renderOverLappedEvents(e)},a}(r.default.Component),J=n(600);var Y=r.default.createElement("div",{className:"week-view-left-hour-tag"},r.default.createElement(V.a,null)),B=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=a.prototype;return i.renderCurrentContent=function(){var e=this.props,t=e.daysEvents,n=e.currentHour,a=e.selectedDay,i=e.clickHandler,l=e.clickFlag,c=[];return 7===t.length&&o()(7,function(e){c.push(r.default.createElement(G,{dayIndex:e,currentHour:n,notAllDayEvents:t[e].notAllDayEvents,calculateDay:t[e].day,selectedDay:a,clickHandler:i,clickFlag:l,key:e,current:!0}))}),c},i.renderMainContent=function(){var e=this.props.selectedDay;return r.default.createElement("div",{className:"week-view-main",id:"week-view-main"},Y,r.default.createElement("div",{className:"week-view-main-content",id:"week-view-current-content"},r.default.createElement("div",{className:"week-view-events_container-wrapper",id:"week-view-events_container-wrapper"},this.renderCurrentContent(),g()(new Date,e)?Object(J.b)():null)))},i.render=function(){return this.renderMainContent()},a}(r.default.Component),K=n(599);n(619);function Q(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Q(o,r,a,i,l,"next",e)}function l(e){Q(o,r,a,i,l,"throw",e)}i(void 0)})}}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return re});var ee=r.default.createElement("div",{id:"sync-progress"}),te=r.default.createElement("div",{className:"week-separator"},r.default.createElement("div",{id:"zero-clock"},"12"),r.default.createElement("div",{id:"zero-separator"})),ne=r.default.createElement("option",{"data-l10n-id":"calendar-local"}),re=function(e){var t,n;function a(t){var n;$(Z(n=e.call(this,t)||this),"logger",new N.a("WeekView","trace")),$(Z(n),"rootNode",void 0),$(Z(n),"scrollTop",0),$(Z(n),"FOCUS_SELECTOR",".week-view-focus"),$(Z(n),"setReadStr",function(e){var t=new Date(parseInt(e.dataset.calculateday,10)),r=parseInt(e.dataset.index,10),a=n.getReadStrForDate(t,r);e.setAttribute("aria-label",a)}),$(Z(n),"updateSoftkey",function(){Object(R.I)()||A.a.register({left:"add",center:"select",right:"options"},document)}),$(Z(n),"buildOptionMenuItems",function(){n.optionItems={monthViewItem:{id:"month-view",callback:function(){L.a.replace("/month")}},dayViewItem:{id:"day-view",callback:function(){L.a.replace("/day")}},todayItem:{id:"today",callback:function(){n.gotoToday()}},gotodateItem:{id:"go-to-date",callback:function(){var e=n.state.selectedDay,t=n.element.querySelector(".date-hidden-input");t.value=E()(e,"YYYY-MM-DD"),t.focus()}},searchItem:{id:"search",callback:function(){L.a.push("/search")}},calendarToDisplayItem:{id:"calendar-to-display",callback:function(){Object(R.i)(),n.calendarDisplay.focus()}},syncCalendarItem:{id:"sync-calendar",callback:function(){Object(R.H)()?F.a.emit("synccalendar",{manualSyncMode:!0}):Toaster.showToast({messageL10nId:"error-account-offline"})}},settingsItem:{id:"settings",callback:function(){L.a.push("/settings")}}}}),$(Z(n),"showNormalModeOptions",function(){if(Object(R.G)("right")){var e=[],t=n.state.selectedDay;e.push(n.optionItems.monthViewItem),e.push(n.optionItems.dayViewItem),S()(new Date,t)||e.push(n.optionItems.todayItem),e.push(n.optionItems.gotodateItem),e.push(n.optionItems.searchItem),e.push(n.optionItems.calendarToDisplayItem),window.displayAccount.length>1&&e.push(n.optionItems.syncCalendarItem),e.push(n.optionItems.settingsItem),O.a.request("showOptionMenu",{options:e})}}),$(Z(n),"focus",function(){n.updateSoftkey()}),$(Z(n),"handleKeydown",function(e){var t=null,r="rtl"===document.dir;switch(e.key){case"Enter":case"Accept":e.stopPropagation(),e.preventDefault(),n.element.querySelector(".focus").click();break;case"SoftRight":e.stopPropagation(),e.preventDefault(),n.showNormalModeOptions();break;case"SoftLeft":e.stopPropagation(),e.preventDefault(),n.handleClickSoftLeft();break;case"ArrowDown":e.stopPropagation(),e.preventDefault(),t=n.findSameDayFocus(1);break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),t=n.findSameDayFocus(-1);break;case"ArrowLeft":e.stopPropagation(),e.preventDefault(),Object(R.I)()||(t=n.findNextDayFocus(r?1:-1));break;case"ArrowRight":e.stopPropagation(),e.preventDefault(),Object(R.I)()||(t=n.findNextDayFocus(r?-1:1))}t&&n.changeFocusItem(t,e.key)}),$(Z(n),"changeEventFocus",function(e){n.element.querySelectorAll(".event-focus").forEach(function(e){e.classList.remove("event-focus")});var t=[];if(0!==(t=e.classList.contains("week-view-all-day-split")?e.querySelectorAll(".bubble_event"):e.parentNode.querySelectorAll(".bubble_event")).length){var r=e.offsetTop,a=e.offsetTop+e.offsetHeight;t.forEach(function(e){var t=e.offsetTop,n=t+e.offsetHeight;(n>r&&n<=a||t>=r&&t<a||t<=r&&n>=a)&&e.classList.add("event-focus")})}}),$(Z(n),"changeFocusItem",function(e,t){if(e){var r=n.element.querySelector(n.FOCUS_SELECTOR+".focus");r&&r.classList.remove("focus"),e.classList.add("focus"),e.focus();var a=n.element.querySelector(".week-main-container");"ArrowUp"===t&&e.offsetTop<=a.scrollTop?e.scrollIntoView(!0):"ArrowDown"===t&&e.offsetTop+e.clientHeight>=a.scrollTop+a.clientHeight&&e.scrollIntoView(!1),n.changeEventFocus(e)}}),$(Z(n),"componentDidCache",function(){n.logger.info("Week View cached!"),n.removeAllEvents()}),$(Z(n),"componentDidRecover",X(regeneratorRuntime.mark(function e(){var t,r,a,o,i,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.logger.info("Week View recovered!"),t=window,r=t.selectedDate,a=new Date,o=new Date(a.setFullYear(r.getFullYear())),o=new Date(o.setMonth(r.getMonth())),o=new Date(o.setDate(r.getDate())),window.selectedDate=o,i=n.element.querySelector(n.FOCUS_SELECTOR+".focus"),(l=n.element.querySelector(".week-main-container")).scrollTop=n.scrollTop||l.scrollTop,n.scrollTop=0,e.next=13,n.setState({selectedDay:o,currentHour:o.getHours(),clickFlag:!1},function(){i&&(n.removeFocusClass(),i.classList.add("focus"),n.setReadStr(i),i.focus(),Object(R.m)({element:n.element,item:i,queryStr:".week-main-container",alignToTop:!1}),n.changeEventFocus(i))});case 13:return e.next=15,n.fetchWeekEvents();case 15:n.initAllEvents(),n.getAllEvents();case 17:case"end":return e.stop()}},e)}))),$(Z(n),"removeFocusClass",function(){n.element.querySelectorAll(n.FOCUS_SELECTOR+".focus").forEach(function(e){e.classList.remove("focus")})}),$(Z(n),"getAllEvents",function(){var e=n.state.selectedDay,t=h()(e,1);D()(e,t)||(C.a.pullAllLocalEvents(t),C.a.pullRemoteEvents(t,!1))}),$(Z(n),"saveScrollTop",function(){n.scrollTop=n.element.querySelector(".week-main-container").scrollTop}),$(Z(n),"preWeek",X(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.selectedDay,r=f()(t,1),n.setState({selectedDay:r},X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.preNextWeek(t,r);case 2:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e)}))),$(Z(n),"nextWeek",X(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.selectedDay,r=h()(t,1),n.setState({selectedDay:r},X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.preNextWeek(t,r);case 2:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e)}))),$(Z(n),"preDay",X(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.selectedDay,r=s()(t,1),n.setState({selectedDay:r},X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.changeFocusForAllday(!1),e.next=3,n.preNextWeek(t,r,!1);case 3:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e)}))),$(Z(n),"nextDay",X(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.selectedDay,r=d()(t,1),n.setState({selectedDay:r},X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.changeFocusForAllday(!0),e.next=3,n.preNextWeek(t,r,!0);case 3:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e)}))),$(Z(n),"tapTogoDate",function(e){n.setState({selectedDay:e},function(){Object(R.N)(e)})}),$(Z(n),"gotoDate",function(e){var t=e.target.value;if(t){var r=n.state.selectedDay,a=new Date(t);n.setState({selectedDay:a},X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.postProcessGotoDate(a,r);case 2:case"end":return e.stop()}},e)})))}}),$(Z(n),"gotoToday",function(){var e=n.state.selectedDay;n.setState({selectedDay:new Date},X(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.postProcessGotoDate(new Date,e);case 2:case"end":return t.stop()}},t)})))}),$(Z(n),"chooseAccountDisplay",X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchWeekEvents();case 2:case"end":return e.stop()}},e)}))),$(Z(n),"fetchWeekEvents",X(regeneratorRuntime.mark(function e(){var t,r,i,l,c,s,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state.selectedDay,!n.switchDay){e.next=4;break}return n.fetchWeekEventsByDay(t,"lastDay"===n.switchDay),e.abrupt("return");case 4:for(r=a.getAllEventsForWeek(t),i=[],l=0;l<r.length;l++){for(c=r[l].allDayEvents,s=[],u=0;u<c.length;u++)s.push(c[u]);i.push({dayIndex:l,dayAllDayEvents:s})}return d=n.element.querySelector(n.FOCUS_SELECTOR+".focus"),e.next=10,n.setState({daysEvents:r,totalAllDayEvents:i},function(){d&&(n.removeFocusClass(),d.classList.add("focus"),n.setReadStr(d),d.focus(),n.changeEventFocus(d))});case 10:o()(7,function(e){Object(I.a)(document.getElementById("events-wrapper-"+e),n.rootNode.querySelectorAll(".bubble_selector_"+e))});case 11:case"end":return e.stop()}},e)}))),$(Z(n),"clickHandler",function(e,t){var r=n.element.querySelectorAll(".event-focus");0===r.length?n.clickToAddEvent(e,t):1===r.length?r[0].click():(n.saveScrollTop(),L.a.push("/agenda",{id:E()(window.selectedDate,"MMMM D"),hour:e}))}),$(Z(n),"clickHandlerAllDay",function(){var e=n.element.querySelectorAll(".event-focus");0===e.length?L.a.push("/modifyEvent",{allDay:!0}):e[0].classList.contains("week-view-all-day-more")?L.a.push("/agenda",{id:E()(window.selectedDate,"MMMM D"),allDay:!0}):e[0].click()}),$(Z(n),"handleSwipeLeftNextWeek",X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.nextWeek();case 2:case"end":return e.stop()}},e)}))),$(Z(n),"handleSwipeRightPreWeek",X(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.preWeek();case 2:case"end":return e.stop()}},e)}))),$(Z(n),"handleLocalize",function(){n.logger.info("get lan changed event!!!!!!"),n.forceUpdate()}),$(Z(n),"handleCalendarDisplayChange",function(){Object(R.d)(),n.chooseAccountDisplay()});var r=[];o()(7,function(e){r.push({dayIndex:e,dayAllDayEvents:[]})});var i=window.selectedDate,l=m()(i),c=new Date;return n.switchDay=null,n.state={selectedDay:i,startDayWeek:l,currentHour:c.getHours(),daysEvents:[],totalAllDayEvents:r,clickFlag:!1},n.buildOptionMenuItems(),t.cacheLifecycles.didCache(n.componentDidCache),t.cacheLifecycles.didRecover(n.componentDidRecover),n.chooseAccountDisplay=n.chooseAccountDisplay.bind(Z(n)),n.handleKeydown=n.handleKeydown.bind(Z(n)),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.getAllEventsForWeek=function(e){var t=[],n=Object(R.v)(e),r=Array.isArray(n),a=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(a>=n.length)break;o=n[a++]}else{if((a=n.next()).done)break;o=a.value}var i=o,c=C.a.getSingleDayEvents(i).dayEvents;c=Object(R.k)(c);var s=l()(c,function(e){return e});t.push({day:i,allDayEvents:Object(R.h)(s,!0,i),notAllDayEvents:Object(R.h)(s,!1,i)})}return t};var i=a.prototype;return i.componentDidMount=function(){var e=X(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateSoftkey(),e.next=3,this.fetchWeekEvents();case 3:this.initAllEvents(),(t=this.element.querySelector(this.FOCUS_SELECTOR+".week-view-hour-small-wrapper-current-hour")).classList.add("focus"),this.setReadStr(t),t.focus(),t.scrollIntoView(!1),this.changeEventFocus(t),this.getAllEvents();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i.componentDidUpdate=function(){var e=this.element.querySelector(".focus");e&&(this.setReadStr(e),Object(R.I)()||e.focus()),this.updateSoftkey()},i.componentWillUnmount=function(){this.removeAllEvents()},i.getReadStrForDate=function(e,t){var n=e.toLocaleString(navigator.language,{weekday:"long"}),r=e.toLocaleString(navigator.language,{day:"numeric"}),a=null;if(window.api.hour12)a=(a=t>12?t-12:t).toLocaleString(navigator.language),12===t&&(a=Object(R.a)("time-pm"));else{var o=(0).toLocaleString(navigator.language);a=24===t?""+o+o:t>9?t.toLocaleString(navigator.language):""+o+t.toLocaleString(navigator.language)}return n+" "+r+" "+a},i.handleClickSoftLeft=function(){if(Object(R.G)("left")){var e=this.element.querySelector(".week-view-all-day-split.week-view-focus.focus"),t=this.element.querySelector(".focus");this.saveScrollTop(),e?L.a.push("/modifyEvent",{allDay:!0}):L.a.push("/modifyEvent",{startTime:parseInt(t.dataset.index,10)})}},i.findSameDayFocus=function(e){var t=this.element.querySelector(this.FOCUS_SELECTOR+".focus"),n=this.FOCUS_SELECTOR+".week-day-"+t.dataset.id,r=Array.from(this.element.querySelectorAll(n)),a=-1;return r.some(function(n,o){return n===t&&(a=(o+r.length+e)%r.length,!0)}),-1===a?null:(this.setState({currentHour:0===a?a:a-1}),0===a&&r[1].scrollIntoView(),r[a])},i.findNextDayFocus=function(e){var t=this.element.querySelector(this.FOCUS_SELECTOR+".focus"),n=this.FOCUS_SELECTOR+".week-day-"+t.dataset.id,r=Array.from(this.element.querySelectorAll(n)),a=-1;return r.some(function(e,n){return e===t&&(a=n,!0)}),-1===a?null:(1===e&&"6"===t.dataset.id?(this.nextDay(),n=this.FOCUS_SELECTOR+".week-day-0"):-1===e&&"0"===t.dataset.id?(this.preDay(),n=this.FOCUS_SELECTOR+".week-day-6"):(this.changeSelectedDate(e,0===a?a:a-1),n=this.FOCUS_SELECTOR+".week-day-"+(parseInt(t.dataset.id,10)+e)),(r=Array.from(this.element.querySelectorAll(n)))[a])},i.changeSelectedDate=function(e,t){var n=this.state.selectedDay,r=n;r=e>=0?d()(n,e):s()(n,Math.abs(e)),this.setState({selectedDay:r,currentHour:t},function(){Object(R.N)(r)})},i.getCandidateList=function(){for(var e=".week-view-all-day-split-wrapper"+this.FOCUS_SELECTOR,t=this.element.querySelectorAll(e),n=[],r="",a=[],o=0;o<7;o++)a.push(t[o]),r=".events-wrapper-"+o+this.FOCUS_SELECTOR,n=this.element.querySelectorAll(r),a.push.apply(a,n);return a},i.setSelectedDayWithClick=function(e,t){var n=this.state.selectedDay,r=n.getDay()-t,a=new Date;a=r>=0?s()(n,r):d()(n,Math.abs(r)),this.setState({currentHour:e,selectedDay:a,clickFlag:!0},function(){Object(R.N)(a)})},i.changeFocusForAllday=function(e){var t=this.element.querySelector(".week-view-all-day-split-wrapper .focus");if(t){t.classList.remove("focus");var n=this.element.querySelector(".week-overlapped-event .focus");n&&n.classList.remove("focus");var r=this.element.querySelector(".week-view-all-day-split-wrapper");e?r&&r.children[0].classList.add("focus"):r&&r.children[6].classList.add("focus")}},i.fetchWeekEventsByDay=function(){var e=X(regeneratorRuntime.mark(function e(t,n){var r,a,i,l,c,s,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this.getAllEventsForWeekByDay(t,n),a=[],i=0;i<r.length;i++){for(l=r[i].allDayEvents,c=[],s=0;s<l.length;s++)c.push(l[s]);a.push({dayIndex:i,dayAllDayEvents:c})}return e.next=5,this.setState({daysEvents:r,totalAllDayEvents:a},function(){u.switchDay=null});case 5:o()(7,function(e){Object(I.a)(document.getElementById("events-wrapper-"+e),u.rootNode.querySelectorAll(".bubble_selector_"+e))});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),i.getAllEventsForWeekByDay=function(e,t){var n=[],r=Object(R.u)(e,t),a=Array.isArray(r),o=0;for(r=a?r:r[Symbol.iterator]();;){var i;if(a){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var c=i,s=C.a.getSingleDayEvents(c).dayEvents;s=Object(R.k)(s);var u=l()(s,function(e){return e});n.push({day:c,allDayEvents:Object(R.h)(u,!0,c),notAllDayEvents:Object(R.h)(u,!1,c)})}return n},i.postProcessGotoDate=function(){var e=X(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(R.N)(t),r=D()(n,t),a=g()(n,t),r){e.next=8;break}C.a.pullAllLocalEvents(t),C.a.pullRemoteEvents(t,!1),e.next=11;break;case 8:if(!r||a){e.next=11;break}return e.next=11,this.fetchWeekEvents();case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),i.initAllEvents=function(){C.a.on("fetch-events-success",this.fetchWeekEvents),window.addEventListener("localized",this.handleLocalize),TimeService.addEventListener("timeChange",this.gotoToday),window.addEventListener("keydown",this.handleKeydown),O.a.register("focus",this)},i.removeAllEvents=function(){C.a.removeListener("fetch-events-success",this.fetchWeekEvents),window.removeEventListener("localized",this.handleLocalize),TimeService.removeEventListener("timeChange",this.gotoToday),window.removeEventListener("keydown",this.handleKeydown),O.a.unregister("focus",this)},i.preNextWeek=function(){var e=X(regeneratorRuntime.mark(function e(t,n,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(R.N)(n),a=r?d()(n,6):s()(n,6),D()(t,a)){e.next=8;break}C.a.pullAllLocalEvents(a),C.a.pullRemoteEvents(a,!1),e.next=10;break;case 8:return e.next=10,this.fetchWeekEvents();case 10:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),i.clickToAddEvent=function(e,t){this.setSelectedDayWithClick(e,t),this.saveScrollTop(),L.a.push("/modifyEvent",{startTime:e})},i.renderHeader=function(){var e=this.state.selectedDay,t=window.api.l10n.DateTimeFormat().localeFormat(e,Object(R.a)("week-view-header-format",{value:Object(R.E)(e)}));return r.default.createElement(K.a,{view:"week",headerStr:t})},i.render=function(){var e=this,t=this.state,n=t.selectedDay,a=t.totalAllDayEvents,o=t.currentHour,i=t.daysEvents,l=t.clickFlag,c=t.startDayWeek;return r.default.createElement("div",{ref:function(t){e.element=t},role:"heading","aria-labelledby":"week"},this.renderHeader(),r.default.createElement("div",{className:"weekView",id:"weekView",tabIndex:"-1",ref:function(t){e.rootNode=t}},r.default.createElement(W,{selectedDay:n,tapTogoDate:this.tapTogoDate,daysEvents:i,switchDay:this.switchDay}),ee,r.default.createElement(U,{selectedDay:n,totalAllDayEvents:a,clickHandler:this.clickHandlerAllDay,startDayWeek:c}),te,r.default.createElement("div",{className:"week-main-container"},r.default.createElement(B,{selectedDay:n,currentHour:o,daysEvents:i,clickHandler:this.clickHandler,clickFlag:l,switchDay:this.switchDay}))),r.default.createElement("input",{className:"date-hidden-input","aria-hidden":"true","data-track-class":"end-date-track",min:"1970-1-1",max:"2035-12-31",type:"date",onChange:function(t){return e.gotoDate(t)}}),r.default.createElement("select",{name:"calendarId",className:"p-sec calendarId-select","data-track-class":"title-calendar",multiple:"multiple",onChange:function(t){return e.handleCalendarDisplayChange(t)},ref:function(t){e.calendarDisplay=t}},ne))},a}(r.default.Component)}}]);