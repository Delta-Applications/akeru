
!function(e){var t={debug:debug.bind(window,"SoftkeyHelper"),softkey:null,softkeyItems:null,menuItems:null,init:function(){this.debug("init"),this.menuItems={send:[{name:"select",l10nId:"select",priority:2,method:function(){var e=NavigationMap.focusedElement;Transfer.itemClickHandle(e)}}],ok:[{name:"select",l10nId:"select",priority:2,method:function(){var e=NavigationMap.focusedElement;Transfer.itemClickHandle(e)}}],pair_ok:[{name:"select",l10nId:"select",priority:2,method:function(){var e=NavigationMap.focusedElement;Transfer.pairDevice(e)}}],pair_refresh:[{name:"select",l10nId:"select",priority:2,method:function(){var e=NavigationMap.focusedElement;Transfer.pairDevice(e)}},{l10nId:"rescan",priority:3,method:function(){Transfer.searchAgain()}}],refresh:[{l10nId:"rescan",priority:3,method:function(){Transfer.searchAgain()}}]},this.softkeyItems={"enable-bluetooth-view":[{l10nId:"cancel",priority:1,method:function(){Transfer.cancelEnableBluetooth()}},{l10nId:"turn-on",priority:3,method:function(){Transfer.turnOnBluetooth()}}],"dm-enable-bluetooth-view":[{l10nId:"cancel",priority:1,method:function(){Transfer.cancelEnableBluetooth()}}],"devices-list-view":this.menuItems.ok,"search-devices-list-view":this.menuItems.stop,"alert-view":[{l10nId:"ok",priority:2,method:function(){Transfer.closeAlert()}}],"unable-pair-view":[{l10nId:"ok",priority:2,method:function(){var e=document.getElementById("unable-pair-view");e.hidden=!0,e.classList.remove("current");var t=document.getElementById("search-devices-list-view");t.hidden=!1,t.classList.add("current"),Transfer.unablePairCallback()}}]},this.debug("init done")},setMethod:function(e,t,n){this.debug("setMethod",e,t,n),this.softkeyItems[e][t].method=n},setSkMenu:function(e){var n=t,r=null;if(void 0===e){if(!ViewHelper.curViewId)return;e=ViewHelper.curViewId}if(n.debug("setSkMenu:",e),r=n.softkeyItems[e]){if(ViewHelper.options){var i=ViewHelper.options(n.menuItems);r=r.concat(i)}n.create(r)}},setSkMenu4Dialog:function(e){var n=t;e?n.create(n.softkeyItems[e]):n.setSkMenu()},create:function(e){if(!e||0===e.length)return this.softkey&&this.softkey.hide(),void 0;this.debug("create",e);var t={header:"App Header",items:e};this.softkey?this.softkey.initSoftKeyPanel(t):this.softkey=new SoftkeyPanel(t),this.softkey.show()},getSk:function(e){var t=this.softkeyItems[ViewHelper.curViewId];void 0===e&&(e=t[0].priority);var n=["left","center","rigth"];return $("software-keys-"+n[e-1])},updateSkText:function(e,t){var n=this.getSk(t);n&&(n.innerHTML=lget(e))},setSkVisible:function(e,t){var n=this.getSk(t);n&&n.setVisible(e)},disable:function(e,t){var n=this.getSk(t);n&&(n.disable=e)},menuVisible:function(){return this.softkey?this.softkey.menuVisible:!1},backKeyHandler:function(){this.showingMenu||ViewHelper.back&&ViewHelper.back()},dirKeyHandler:function(e){ViewHelper.dirChange&&ViewHelper.dirChange.call(ViewHelper,e)},endKeyHandler:function(){window.close()},enterKeyHandler:function(){},otherHandler:function(e){switch(this.debug(e),e){case"*":break;case"#":}},defaultBackHandler:function(e){void 0===e&&(e=ViewHelper.curViewId),delete NavigationMap.focusedControls[e]},get showingMenu(){return!1}};e.SoftkeyHelper=t}(window);