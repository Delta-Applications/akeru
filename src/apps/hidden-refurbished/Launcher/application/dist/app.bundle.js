webpackJsonp([1],[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=["23402","23410","23411","42003","52505"],t=navigator.mozMobileConnections,n=!1;dump("launcher preorpostpay enter");var i=Array.from(t).map(function(e){var t=navigator.mozIccManager.getIccById(e.iccId);if(!t)return null;var n=t.iccInfo;return{iccid:e.iccId,mccmnc:n?n.mcc+n.mnc:null}}),r=JSON.parse(localStorage.getItem("operators"));r&&dump("launcher preorpostpay oldOperators = "+JSON.stringify(r)),i&&dump("launcher preorpostpay newoperators = "+JSON.stringify(i));var a=function(t){dump("launcher preorpostpay item = "+t+" operator1_select = "+n),i&&i[t]&&e.indexOf(i[t].mccmnc)>-1&&(!r||JSON.stringify(r[t])!==JSON.stringify(i[t]))&&(n?D.default.on("user-has-selected",function(){dump("launcher preorpostpay recv user-has-selected and start dialog 2"),n=!1,setTimeout(function(){u(i[t],t)},300)}):(dump("launcher preorpostpay start dialog 1"),u(i[t],t),n=!0))};for(var o in i)a(o);localStorage.setItem("operators",JSON.stringify(i))}function u(e,t){var n=new OperatorVariantHandler_launcher(e.iccid,t,this);n&&(dump("launcher preorpostpay new operatorVariantHandlers success!"),n.setmccmnc(e.mccmnc.substring(0,3),e.mccmnc.substring(3,5)),n.retrieveOperatorVariantUserselect(function(i,r){var a=i.length,o=r.length;dump("launcher preorpostpay default length is: "+a+" mms length is: "+o),(a>1||o>1)&&(w.default.request("APNSelection:setOperatorInfo",t,e,i,r,n),w.default.request("openSheet","apnselection"))}))}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=n(3),d=i(f),p=n(15),h=i(p),m=n(5),g=i(m),v=n(94),y=i(v),b=n(2),w=i(b),S=n(24),_=i(S),k=n(93),L=i(k),E=n(275),O=i(E),I=n(266),A=i(I),C=n(256),T=i(C),M=n(261),R=i(M),P=n(270),N=i(P),x=n(255),U=i(x),j=n(138),D=i(j);n(268);var F=n(272),B=i(F),z=n(253),q=i(z),V=n(135),H=i(V),W=n(137),K=i(W),Y=n(265),G=i(Y),J=n(257),X=i(J),Q=n(78),Z=i(Q),$=n(258),ee=i($),te=n(264),ne=i(te),ie=n(277),re=i(ie),ae=n(33),oe=i(ae),se=n(76);n(82),n(141),n(140),window.performance.mark("navigationLoaded"),window.addEventListener("load",function(){window.performance.mark("fullyLoaded"),dump("launcher app recv fullyLoaded"),document.body.classList.add("loaded"),setTimeout(function(){document.body.classList.remove("loaded")},3e3),s()});var ue=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="App",n.panels={},n.state={grid:G.default.grid},n.forceSettings={},window.AppStore=new X.default,window.emitter=new _.default,window.app=n,window.Service=w.default,window.performance.mark("navigationInteractive"),dump("launcher app constructor"),document.body.addEventListener("keydown",function(){if(document.activeElement===document.body&&1===n.element.classList.length){"true"===document.getElementById("Tutorial").getAttribute("data-has-viewed")&&document.getElementById("main-view").focus()}document.activeElement===document.querySelector(".x-window")&&"appList"===n.lastSheet&&n.panels.appList.focus()}),n}return o(t,e),c(t,[{key:"componentWillMount",value:function(){window.performance.mark("contentInteractive")}},{key:"componentDidMount",value:function(){var e=this;this.element=h.default.findDOMNode(this),window.performance.mark("visuallyLoaded"),this.focusWhenReady(),this._handle_largetextenabledchanged(),window.addEventListener("largetextenabledchanged",this),window.addEventListener("visibilitychange",this),w.default.register("openSheet",this),w.default.register("closeSheet",this),w.default.registerState("lastSheet",this),w.default.registerState("panelAnimationRunning",this),re.default.getSettings().then(function(t){e.forceSettings=t,w.default.registerState("forceSettings",e),t[oe.default[4]]&&(X.default.defaultAppsOrder=t[oe.default[4]],(0,se.restoreUserSavedAppsOrder)(function(){w.default.request("updateDefaultAppOrder")},t[oe.default[4]]));var n=t[oe.default[5]];w.default.request("updateDefaultTutorial",n),w.default.request("updateCusotmAppConfig",e.forceSettings),emitter.emit("getForceSettingsEnd",e.forceSettings)}),this.element.style.setProperty("--grid-row",this.state.grid.row),this.element.style.setProperty("--grid-col",this.state.grid.col),Z.default.initNoticesData()}},{key:"_handle_largetextenabledchanged",value:function(){document.body.classList.toggle("large-text",navigator.largeTextEnabled)}},{key:"_handle_visibilitychange",value:function(){if(!document.hidden){if(this.hasPopupDom())return;switch(this.lastSheet){case"mainView":this.panels.mainView.focus();break;case"appList":this.panels.appList.focus()}}}},{key:"hasPopupDom",value:function(){var e=document.querySelector("#dialog-root .dialog-container"),t=document.querySelector("#menu-root .option-menu-container"),n=document.querySelector("#sim-chooser .option-menu-container");return e&&"none"!==window.getComputedStyle(e).display?(!e.querySelector("input")&&e.focus(),!0):n&&"none"!==window.getComputedStyle(n).display?(n.focus(),!0):!(!t||"none"===window.getComputedStyle(t).display)&&(t.focus(),!0)}},{key:"focusWhenReady",value:function(){var e=this;if(!this.focusMainView()){var t=function t(){e.focusMainView(),document.removeEventListener("visibilitychange",t)};document.addEventListener("visibilitychange",t)}}},{key:"focusMainView",value:function(){return w.default.query("Tutorial.hasViewed")?(this.lastSheet="mainView",this.panels.mainView.focus()):w.default.request("Tutorial:focus"),!document.hidden}},{key:"openSheet",value:function(e){var t="";switch(Array.isArray(e)&&(t=e[1],e=e[0]),this.lastSheet=e,this.panels[e].open&&this.panels[e].open(),e){case"sidemenu":w.default.request("Sidemenu:focus");break;case"folder":w.default.request("openFolder",t)}window.history.pushState(null,null,"#"+e),this.element.classList.add("panel-"+e+"--opened"),window.dispatchEvent(new CustomEvent("panelChange",{detail:{panel:this.lastSheet}}))}},{key:"closeSheet",value:function(e){this.panels[e].isClosed&&this.panels[e].isClosed()||(this.panels[e].close&&this.panels[e].close(),this.element.classList.remove("panel-"+e+"--opened"),"dialer"!==e&&"folder"!==e&&"qrface"!==e||this.panels.appList.isClosed()?(this.lastSheet="mainView",document.hidden&&"dialer"!==e&&"sidemenu"!==e||this.panels.mainView.focus()):document.hidden&&"dialer"!==e&&"sidemenu"!==e||this.panels.appList.focus(),window.history.pushState(null,null,"#"+this.lastSheet),window.dispatchEvent(new CustomEvent("panelChange",{detail:{panel:this.lastSheet}})))}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"app-workspace"},d.default.createElement("div",{className:"app-content"},d.default.createElement(A.default,{ref:function(t){e.panels.mainView=t}}),d.default.createElement(T.default,l({ref:function(t){e.panels.appList=t}},this.state.grid)),d.default.createElement(q.default,{ref:function(t){e.panels.folder=t}}),d.default.createElement(R.default,{ref:function(t){e.panels.dialer=t}}),d.default.createElement(N.default,{ref:function(t){e.panels.qrface=t}}),d.default.createElement(U.default,{ref:function(t){e.panels.apnselection=t}})),d.default.createElement(ee.default,{ref:function(t){e.panels.cards=t}}),d.default.createElement(O.default,{ref:function(t){e.panels.tutorial=t}}),d.default.createElement(B.default,{ref:function(t){e.panels.sidemenu=t}}),d.default.createElement(ne.default,{ref:function(t){e.panels.experience=t}}),d.default.createElement(K.default,null),d.default.createElement("div",{id:"sim-chooser"},d.default.createElement(L.default,null)),d.default.createElement(H.default,null),d.default.createElement(y.default,{ref:function(t){e.panels.softKey=t}}))}}]),t}(g.default);h.default.render(d.default.createElement(ue,null),document.getElementById("root"))},,,,,,,,,,,,,,,,,,,,,function(e,t){"use strict";"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},,,,function(e,t,n){(function(e,i){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function a(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(a()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,i){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,i);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,n,i)}function s(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,i):"string"==typeof t?f(e,t,n):h(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,i){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof i?o(e,t).fill(n,i):o(e,t).fill(n):o(e,t)}function c(t,n){if(u(n),t=o(t,n<0?0:0|m(n)),!e.TYPED_ARRAY_SUPPORT)for(var i=0;i<n;++i)t[i]=0;return t}function f(t,n,i){if("string"==typeof i&&""!==i||(i="utf8"),!e.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(n,i);t=o(t,r);var a=t.write(n,i);return a!==r&&(t=t.slice(0,a)),t}function d(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function p(t,n,i,r){if(n.byteLength,i<0||n.byteLength<i)throw new RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=d(t,n),t}function h(t,n){if(e.isBuffer(n)){var i=0|m(n.length);return t=o(t,i),0===t.length?t:(n.copy(t,0,0,i),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||X(n.length)?o(t,0):d(t,n);if("Buffer"===n.type&&$(n.data))return d(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function g(t){return+t!=t&&(t=0),e.alloc(+t)}function v(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return G(t).length;default:if(r)return W(t).length;n=(""+n).toLowerCase(),r=!0}}function y(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function w(t,n,i,r,a){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=a?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(a)return-1;i=t.length-1}else if(i<0){if(!a)return-1;i=0}if("string"==typeof n&&(n=e.from(n,r)),e.isBuffer(n))return 0===n.length?-1:S(t,n,i,r,a);if("number"==typeof n)return n=255&n,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,n,i):Uint8Array.prototype.lastIndexOf.call(t,n,i):S(t,[n],i,r,a);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,i,r){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,u=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}var l;if(r){var c=-1;for(l=n;l<s;l++)if(a(e,l)===a(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*o}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var f=!0,d=0;d<u;d++)if(a(e,l+d)!==a(t,d)){f=!1;break}if(f)return l}return-1}function _(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function k(e,t,n,i){return J(W(t,e.length-n),e,n,i)}function L(e,t,n,i){return J(K(t),e,n,i)}function E(e,t,n,i){return L(e,t,n,i)}function O(e,t,n,i){return J(G(t),e,n,i)}function I(e,t,n,i){return J(Y(t,e.length-n),e,n,i)}function A(e,t,n){return 0===t&&n===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a=e[r],o=null,s=a>239?4:a>223?3:a>191?2:1;if(r+s<=n){var u,l,c,f;switch(s){case 1:a<128&&(o=a);break;case 2:u=e[r+1],128===(192&u)&&(f=(31&a)<<6|63&u,f>127&&(o=f));break;case 3:u=e[r+1],l=e[r+2],128===(192&u)&&128===(192&l)&&(f=(15&a)<<12|(63&u)<<6|63&l,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=e[r+1],l=e[r+2],c=e[r+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(f=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c,f>65535&&f<1114112&&(o=f))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=s}return T(i)}function T(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function R(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function P(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=H(e[a]);return r}function N(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function x(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(t,n,i,r,a,o){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>a||n<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function j(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function D(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function F(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,i,r){return r||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,i,23,4),n+4}function z(e,t,n,i,r){return r||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,i,52,8),n+8}function q(e){if(e=V(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,i=e.length,r=null,a=[],o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function K(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,i,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i);return a}function G(e){return Q.toByteArray(q(e))}function J(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e){return e!==e}var Q=n(142),Z=n(160),$=n(161);t.Buffer=e,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==i.TYPED_ARRAY_SUPPORT?i.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=a(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return s(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return l(null,e,t,n)},e.allocUnsafe=function(e){return c(null,e)},e.allocUnsafeSlow=function(e){return c(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var i=t.length,r=n.length,a=0,o=Math.min(i,r);a<o;++a)if(t[a]!==n[a]){i=t[a],r=n[a];break}return i<r?-1:r<i?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!$(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var i;if(void 0===n)for(n=0,i=0;i<t.length;++i)n+=t[i].length;var r=e.allocUnsafe(n),a=0;for(i=0;i<t.length;++i){var o=t[i];if(!e.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},e.byteLength=v,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,i,r,a){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),n<0||i>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&n>=i)return 0;if(r>=a)return-1;if(n>=i)return 1;if(n>>>=0,i>>>=0,r>>>=0,a>>>=0,this===t)return 0;for(var o=a-r,s=i-n,u=Math.min(o,s),l=this.slice(r,a),c=t.slice(n,i),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],s=c[f];break}return o<s?-1:s<o?1:0},e.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},e.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},e.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return L(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var i=this.length;t=~~t,n=void 0===n?i:~~n,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),n<0?(n+=i,n<0&&(n=0)):n>i&&(n=i),n<t&&(n=t);var r;if(e.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=e.prototype;else{var a=n-t;r=new e(a,(void 0));for(var o=0;o<a;++o)r[o]=this[o+t]}return r},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||x(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||x(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},e.prototype.readUInt8=function(e,t){return t||x(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||x(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||x(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||x(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||x(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},e.prototype.readInt8=function(e,t){return t||x(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||x(e,4,this.length),Z.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||x(e,4,this.length),Z.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||x(e,8,this.length),Z.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||x(e,8,this.length),Z.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){U(this,e,t,n,Math.pow(2,8*n)-1,0)}var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){U(this,e,t,n,Math.pow(2,8*n)-1,0)}var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},e.prototype.writeUInt8=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):j(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):j(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):D(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):D(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},e.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},e.prototype.writeInt8=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):j(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):j(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):D(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,i){return t=+t,n=0|n,i||U(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):D(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},e.prototype.copy=function(t,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var a,o=r-i;if(this===t&&i<n&&n<r)for(a=o-1;a>=0;--a)t[a+n]=this[a+i];else if(o<1e3||!e.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+n]=this[a+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),n);return o},e.prototype.fill=function(t,n,i,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t=255&t);if(n<0||this.length<n||this.length<i)throw new RangeError("Out of range index");if(i<=n)return this;n>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0);var o;if("number"==typeof t)for(o=n;o<i;++o)this[o]=t;else{var s=e.isBuffer(t)?t:W(new e(t,r).toString()),u=s.length;for(o=0;o<i-n;++o)this[o+n]=s[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(25).Buffer,function(){return this}())},,function(e,t,n){(function(t){"use strict";function i(e){return this instanceof i?(u.call(this,e),l.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}function a(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}e.exports=i;var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},s=n(34);s.inherits=n(21);var u=n(126),l=n(74);s.inherits(i,u),a(o(l.prototype),function(e){i.prototype[e]||(i.prototype[e]=l.prototype[e])})}).call(t,n(42))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(19),l=i(u),c=n(2),f=i(c),d=n(51),p=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="LaunchStore",n.resetLaunchingMarker=function(){n.isLaunching=!1,clearTimeout(n.timer)},n.ports={},window.addEventListener("visibilitychange",n.resetLaunchingMarker),window.addEventListener("blur",n.resetLaunchingMarker),window.addEventListener("focus",n.resetLaunchingMarker),f.default.registerState("isLaunching",n),n}return o(t,e),s(t,[{key:"refreshLaunchStateTimer",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.isLaunching=!1},2e3)}},{key:"launch",value:function(e,t,n){this.refreshLaunchStateTimer(),e&&t&&("iac"===e?this.launchForIAC(t,n):this.launchApp(e,t))}},{key:"launchApp",value:function(e,t){if(!this.isLaunching){this.isLaunching=!0;var n=AppStore.queryApp(e,t);n&&(0,d.launch)(n)}}},{key:"launchForIAC",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.isLaunching||i){if(!this.ports[e])return this.isLaunching=!0,void(navigator.mozApps.getSelf().onsuccess=function(r){r.target.result.connect(e).then(function(r){t.isLaunching=!1,t.ports[e]=r,t.launchForIAC(e,n,i)},function(e){t.isLaunching=!1})});this.isLaunching=!0,this.ports[e].forEach(function(e){e.postMessage(n)})}}}]),t;
}(l.default);t.default=new p},,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MozApp:"mozapp",Bookmark:"bookmark",Folder:"folder",Virtual:"virtual"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return window.location.origin+"/folder/"+(new v.default).update(e).digest("hex")}function a(e){return m(e),e.filter(function(e){return e.type===b.default.Folder})}function o(e,t){return m(e),a(e).find(function(e){return w.hasManifestURL(e,t)})}function s(e,t){return m(e),a(e).filter(function(e){return e.items&&e.items.find(function(e){return w.hasManifestURL(e,t)})})}function u(e,t){return m(e),a(e).filter(function(e){return e.items&&e.items.find(function(e){return w.hasOrigin(e,t)})})}function l(e,t){if(m(e),!t)throw new Error("Properties for query is required.");return t.manifestURL&&c(e,t.manifestURL)||t.origin&&p(e,t.origin).shift()}function c(e,t){return m(e),e.find(function(e){return w.hasManifestURL(e,t)})}function f(e,t){return m(e),e.find(function(e){return w.hasOrigin(e,t)})}function d(e,t){return m(e),e.findIndex(function(e){return w.hasManifestURL(e,t)})}function p(e,t){return m(e),e.filter(function(e){return w.hasOrigin(e,t)})}function h(e,t){m(e);var n=void 0;return e.find(function(e,i){return e.name===t&&"localfolder"===e.source&&(n=i,!0)}),n}function m(e){if(!Array.isArray(e))throw new Error("The source items is required.")}Object.defineProperty(t,"__esModule",{value:!0}),t.matcher=void 0,t.generateFolderManifestURL=r,t.getAllFolders=a,t.findFolderByManifestURL=o,t.findFoldersByItemManifestURL=s,t.findFoldersByItemOrigin=u,t.findItemByProps=l,t.findItemByManifestURL=c,t.findItemByOrigin=f,t.findItemIndexByManifestURL=d,t.findItemsByOrigin=p,t.findFolderByName=h;var g=n(162),v=i(g),y=n(31),b=i(y),w=t.matcher={hasManifestURL:function(e,t){return e.manifestURL===t},hasOrigin:function(e,t){return e.origin&&e.origin===t||e.manifest&&e.manifest.origin===t}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["home.customization.hidden.folder","get_connected_experience.disabled","home.customization.sidemenu","home.customization.longpress","home.customization.app.order","home.customization.tutorial","home.customization.keypress","home.customization.show_all_sidemenu_app.enabled","home.customization.app_theme_color"]},function(e,t,n){(function(e){"use strict";function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function a(e){return null==e}function o(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"===("undefined"==typeof e?"undefined":v(e))}function l(e){return void 0===e}function c(e){return"[object RegExp]"===g(e)}function f(e){return"object"===("undefined"==typeof e?"undefined":v(e))&&null!==e}function d(e){return"[object Date]"===g(e)}function p(e){return"[object Error]"===g(e)||e instanceof Error}function h(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===("undefined"==typeof e?"undefined":v(e))||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isArray=n,t.isBoolean=i,t.isNull=r,t.isNullOrUndefined=a,t.isNumber=o,t.isString=s,t.isSymbol=u,t.isUndefined=l,t.isRegExp=c,t.isObject=f,t.isDate=d,t.isError=p,t.isFunction=h,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(t,n(25).Buffer)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=i(l),f=n(15),d=i(f),p=n(165),h=i(p),m=n(5),g=i(m),v=n(2),y=i(v),b=n(143),w=i(b);n(280);var S=function(e,t,n){return function(i){function l(e){r(this,l);var t=a(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.state={popup:null},t}return o(l,i),u(l,[{key:"componentDidMount",value:function(){var e=this;this.refs.composed.open=this.refs.composing.open.bind(this.refs.composing),this.refs.composed.close=this.refs.composing.close.bind(this.refs.composing),y.default.register("open",this.refs.composed),y.default.register("close",this.refs.composed),this.refs.composed.isActive=this.refs.composing.isActive.bind(this.refs.composing),this.refs.composing.on("closed",function(){e.refs.composed.emit("closed"),e.emit("closed")}),this.refs.composing.on("opened",function(){e.refs.composed.emit("opened"),e.emit("opened")})}},{key:"open",value:function(e){this.refs.composing.open(e)}},{key:"focus",value:function(){var e=d.default.findDOMNode(this.refs.composed);e.activeElement?(e.activeElement.focus(),document.activeElement===document.body&&e.focus()):e.focus()}},{key:"close",value:function(e){this.refs.composing.close(e)}},{key:"isClosed",value:function(){return"closed"===this.refs.composing.state.transition}},{key:"isTransitioning",value:function(){return this.refs.composing.isTransitioning()}},{key:"getTopMost",value:function(){return this.refs.popup.refs.popup?this.refs.popup.refs.popup.getTopMost():this}},{key:"openPopup",value:function(e){this.refs.popup.setState({popup:e})}},{key:"componentDidUpdate",value:function(){this.refs.popup&&this.refs.popup.open()}},{key:"render",value:function(){return c.default.createElement(h.default,{ref:"composing",openAnimation:t,closeAnimation:n},c.default.createElement(e,s({ref:"composed"},this.props)),c.default.createElement(w.default,{ref:"popup"}))}}]),l}(g.default)};t.default=S},,,,function(e,t,n){"use strict";function i(){r.call(this)}e.exports=i;var r=n(86).EventEmitter;n(21)(i,r),i.Readable=n(236),i.Writable=n(238),i.Duplex=n(234),i.Transform=n(237),i.PassThrough=n(235),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function i(){l.readable&&l.resume&&l.resume()}function a(){c||(c=!0,e.end())}function o(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",n),e.removeListener("drain",i),l.removeListener("end",a),l.removeListener("close",o),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(l.on("end",a),l.on("close",o));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},,,function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&s())}function s(){if(!m){var e=r(o);m=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,m=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var p,h=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){switch(e){case v.default.MozApp:var i=t.mozApp;if(!i)throw new Error("Failed to create the mozApp item, mozApp reference is required.");return a(i,n);case v.default.Bookmark:var r=t.bookmark;if(!r)throw new Error("Failed to create the bookmark item, bookmark metadata is required.");return[o(r,n)];case v.default.Folder:var l=t.folder;if(!l)throw new Error("Failed to create the folder item, folder metadata is required.");return[s(l,n)];case v.default.Virtual:var c=t.virtual;if(!c)throw new Error("Failed to create the customize item, customize metadata is required.");return[u(c,n)];default:throw new Error("Fail to create item, itemType is required.")}}function a(e,t){var n=e.manifest||e.updateManifest,i=n.entry_points,r=t.app_theme;delete n.description;var a=n.locales;if(a)for(var o in a)({}).hasOwnProperty.call(a,o)&&delete a[o].description;if(i){var s=JSON.parse(JSON.stringify(n)),u=[];for(var l in i){var c={},f=i[l];for(var d in f)"locale"!==d&&"name"!==d&&(s[d]=f[d]);for(var p in e)c[p]=e[p];c.type=v.default.MozApp,c.mozApp=e,c.manifest=s,c.uid=c.manifestURL+"+"+l,c.displayName=new m.default(f).name,c.theme={color:r||c.manifest.theme_color||null},c.entry=l,u.push(c)}return u}var h={};for(var g in e)h[g]=e[g];return h.type=v.default.MozApp,h.mozApp=e,h.manifest=h.manifest||h.updateManifest,h.uid=h.manifestURL,h.displayName=new m.default(h.manifest).name,h.theme={color:r||h.manifest.theme_color||null},[h]}function o(e,t){var n=t.app_theme;return e.url?{type:v.default.Bookmark,displayName:e.name,enabled:!0,removable:!0,manifestURL:e.url,url:e.url,favicon:e.icon,manifest:{name:e.url},uid:e.url,theme:{color:n||"#20AFCC"}}:null}function s(e,t){var n=(0,y.generateFolderManifestURL)(JSON.stringify(e)),i=e.name||e.manifest&&e.manifest.name||"Untitled Folder",r=t.app_theme||e.theme.color;return e.theme.color=r,f({},e,{manifestURL:n,type:v.default.Folder,displayName:i,removable:!1,manifest:f({name:i},e.manifest),items:e.items||[],showItemsInAllApps:!1})}function u(e,t){var n=t.app_theme;return{type:v.default.Virtual,displayName:e.name,enabled:!0,removable:!1,manifestURL:e.url,url:e.url,manifest:f({name:e.name},e.manifest),uid:e.url,theme:{color:n}}}function l(e){var t=new window.MozActivity({name:"view",data:{type:"url",url:e}});t.onerror=function(){}}function c(e){switch(window.performance.mark("appLaunch@"+e.origin),e.type){case v.default.MozApp:if(e.items||w.default.clearAppStatus(e.mozApp),e.role&&"invalid"===e.role)return void Toaster.showToast({messageL10nId:"toast-need-update-app"});e.mozApp.launch(e.entry);break;case v.default.Bookmark:l(e.url);break;case v.default.Folder:p.default.request("openSheet",["folder",e.manifestURL]);break;case v.default.Virtual:_.default.launchForIAC("launcher-panel",{target:"cleanup-menu"},!0)}}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.create=r,t.createMozAppItemList=a,t.createBookmarkItem=o,t.createFolderItem=s,t.createVirtualItem=u,t.launchBrowser=l,t.launch=c;var d=n(2),p=i(d),h=n(267),m=i(h),g=n(31),v=i(g),y=n(32),b=n(78),w=i(b),S=n(28),_=i(S)},function(e,t){(function(t){"use strict";function n(e,t,n){function i(t){var n=m,i=g;return m=g=void 0,S=t,y=e.apply(i,n)}function a(e){return S=e,b=setTimeout(c,t),E?i(e):y}function o(e){var n=e-w,i=e-S,r=t-n;return O?k(r,v-i):r}function u(e){var n=e-w,i=e-S;return void 0===w||n>=t||n<0||O&&i>=v}function c(){var e=L();return u(e)?f(e):void(b=setTimeout(c,o(e)))}function f(e){return b=void 0,I&&m?i(e):(m=g=void 0,y)}function d(){void 0!==b&&clearTimeout(b),S=0,m=w=g=b=void 0}function p(){return void 0===b?y:f(L())}function h(){var e=L(),n=u(e);if(m=arguments,g=this,w=e,n){if(void 0===b)return a(w);if(O)return b=setTimeout(c,t),i(w)}return void 0===b&&(b=setTimeout(c,t)),y}var m,g,v,y,b,w,S=0,E=!1,O=!1,I=!0;if("function"!=typeof e)throw new TypeError(l);return t=s(t)||0,r(n)&&(E=!!n.leading,O="maxWait"in n,v=O?_(s(n.maxWait)||0,t):v,I="trailing"in n?!!n.trailing:I),h.cancel=d,h.flush=p,h}function i(e,t,i){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError(l);return r(i)&&(a="leading"in i?!!i.leading:a,o="trailing"in i?!!i.trailing:o),n(e,t,{leading:a,maxWait:t,trailing:o})}function r(e){var t="undefined"==typeof e?"undefined":u(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==("undefined"==typeof e?"undefined":u(e))}function o(e){return"symbol"==("undefined"==typeof e?"undefined":u(e))||a(e)&&S.call(e)==f}function s(e){if("number"==typeof e)return e;if(o(e))return c;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=h.test(e);return n||m.test(e)?g(e.slice(2),n?2:8):p.test(e)?c:+e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="Expected a function",c=NaN,f="[object Symbol]",d=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=parseInt,v="object"==("undefined"==typeof t?"undefined":u(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":u(self))&&self&&self.Object===Object&&self,b=v||y||Function("return this")(),w=Object.prototype,S=w.toString,_=Math.max,k=Math.min,L=function(){return b.Date.now()};e.exports=i}).call(t,function(){return this}())},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,u.isNullOrUndefined(n)||e.push(n),r&&r(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);s.call(this,e),this._transformState=new i(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(i.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}e.exports=a;var s=n(27),u=n(34);u.inherits=n(21),u.inherits(a,s),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("not implemented")},a.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;u.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},function(e,t,n){(function(t){"use strict";function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function r(e,t){var i=n(27);e=e||{};var r=e.highWaterMark,a=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function a(e){var t=n(27);return this instanceof a||this instanceof t?(this._writableState=new r(e,this),this.writable=!0,void k.call(this)):new a(e)}function o(e,n,i){var r=new Error("write after end");e.emit("error",r),t.nextTick(function(){i(r)})}function s(e,n,i,r){var a=!0;if(!(_.isBuffer(i)||_.isString(i)||_.isNullOrUndefined(i)||n.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),t.nextTick(function(){r(o)}),a=!1}return a}function u(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&_.isString(t)&&(t=new S(t,n)),t}function l(e,t,n,r,a){n=u(t,n,r),_.isBuffer(n)&&(r="buffer");var o=t.objectMode?1:n.length;t.length+=o;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new i(n,r,a)):c(e,t,!1,o,n,r,a),s}function c(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function f(e,n,i,r,a){i?t.nextTick(function(){n.pendingcb--,a(r)}):(n.pendingcb--,a(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,n){var i=e._writableState,r=i.sync,a=i.writecb;if(d(i),n)f(e,i,r,n,a);else{var o=v(e,i);o||i.corked||i.bufferProcessing||!i.buffer.length||g(e,i),r?t.nextTick(function(){h(e,i,o,a)}):h(e,i,o,a)}}function h(e,t,n,i){n||m(e,t),t.pendingcb--,i(),b(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],i=0;i<t.buffer.length;i++)n.push(t.buffer[i].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var i=0;i<n.length;i++)t.pendingcb--,n[i](e)}),t.buffer=[]}else{for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],a=r.chunk,o=r.encoding,s=r.callback;if(c(e,t,!1,t.objectMode?1:a.length,a,o,s),t.writing){i++;break}}i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}t.bufferProcessing=!1}function v(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var n=v(e,t);return n&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),n}function w(e,n,i){n.ending=!0,b(e,n),i&&(n.finished?t.nextTick(i):e.once("finish",i)),n.ended=!0}e.exports=a;var S=n(25).Buffer;a.WritableState=r;var _=n(34);_.inherits=n(21);var k=n(39);_.inherits(a,k),a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,n){var i=this._writableState,r=!1;return _.isFunction(t)&&(n=t,t=null),_.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),_.isFunction(n)||(n=function(){}),i.ended?o(this,i,n):s(this,i,e,n)&&(i.pendingcb++,r=l(this,i,e,t,n)),r},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||g(this,e))},a.prototype._write=function(e,t,n){n(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var i=this._writableState;_.isFunction(e)?(n=e,e=null,t=null):_.isFunction(t)&&(n=t,t=null),_.isNullOrUndefined(e)||this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||w(this,i,n)}}).call(t,n(42))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){o.default.request("showDialog",{type:"confirm",ok:"uninstall",header:(0,s.toL10n)("confirmation"),content:(0,s.toL10n)("confirm-to-uninstall-app",{appName:t}),translated:!0,onOk:function(){u.set("uninstalling",!0);var t=navigator.mozApps.mgmt.uninstall(e),n=function(){return u.set("uninstalling",!1)};t.onerror=n}})}Object.defineProperty(t,"__esModule",{value:!0}),t.appState=void 0,t.uninstallMozApp=r;var a=n(2),o=i(a),s=n(9),u=t.appState=new Map},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n="";n=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),dump("sortOperations: isDefaultApp skuid: "+n);var i=null;i="62GMX"===n||"62HMX"===n?v.default:m.default,navigator.getFeature("hardware.memory").then(function(n){var r=t||(256===n?w.defaultLowMemoryAppsOrder:i);try{var a=JSON.parse(localStorage.getItem(k));if(Array.isArray(a))return void(L=a);var u=JSON.parse(localStorage.getItem(_));if(Array.isArray(u))return L=u.map(o),s(L),void localStorage.removeItem(_);L=r}catch(l){L=r}e&&e()})}function a(e){for(var t=function(t){var n=e.findIndex(function(e){return E(e,b.default[t])});if(n!==-1){var i=e.splice(n,1)[0];e.splice(b.default[t].fixPosition,0,i)}},n=0;n<b.default.length;n++)t(n);return e}function o(e){return"string"==typeof e?{name:e}:e}function s(e){L=e,localStorage.setItem(k,JSON.stringify(e))}function u(e){if(L&&L.length>0){var t=L.findIndex(function(t){return t.manifestURL===e});t>=0&&(L.splice(t,1),s(L))}}function l(e){return p.default.isCustomizedItem(e)&&parseInt(e.position,10)>=0&&-1===L.findIndex(function(t){return E(e,t)})&&L.splice(+e.position,0,{name:e.name,origin:e.origin||null,manifestURL:e.manifestURL}),e}function c(e){var t=L.findIndex(function(t){return E(e,t)});return e.order=t>=0?t:99,e}function f(){L=null}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreUserSavedAppsOrder=r,t.updateFixAppsOrder=a,t.upgradeV1FormatIntoV2=o,t.saveAppsOrder=s,t.removeItemFromAppsOrder=u,t.calcAppsOrder=l,t.applyAppsOrder=c,t.clear=f;var d=n(133),p=i(d),h=n(132),m=i(h),g=n(131),v=i(g),y=n(247),b=i(y),w=n(249),S=n(32),_="app-order",k="apps-order-v2",L=null,E=function(e,t){return t.manifestURL&&S.matcher.hasManifestURL(e,t.manifestURL)||t.origin&&S.matcher.hasOrigin(e,t.origin)||t.name&&t.name===e.manifest.name}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return function(t){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.newInstallInFolder=[],t.localNotice=Number(localStorage.getItem("localNotice"+t.props.manifestURL)),t.newInstall=t.props.item.items?t.getFolderNewInstallLocal():localStorage.getItem("newInstall"+t.props.manifestURL),t.state={noticeCount:t.localNotice,newInstall:t.props.item.installFromStore||t.newInstall||!1,clearNotices:localStorage.getItem("clearNotices"+t.props.manifestURL)},t.noticeIndicatorRef=null,t.lastNoticeCount=t.localNotice,t.newInstallFlick=localStorage.getItem("newInstallFlick"+t.props.manifestURL)||t.props.item.installFromStore||!1,t.handleChange=t.handleChange.bind(t),t.handleClearAppStatus=t.handleClearAppStatus.bind(t),t.handleAnimationEnd=t.handleAnimationEnd.bind(t),t.handleAnimationStart=t.handleAnimationStart.bind(t),t.initRegisterFunc(),t}return o(n,t),l(n,[{key:"componentDidMount",value:function(){m.default.on("change",this.handleChange),m.default.on("clearAppStatus",this.handleClearAppStatus);var e=this.props.item;e.items&&(p.default.request("addFolder",{name:e.basisname,url:this.props.manifestURL}),p.default.register("addFolderIndicator"+e.showname,this),p.default.register("deleteFolderIndicator"+e.showname,this),p.default.register(this.clearFolderStatusUrl,this),emitter.on("computeFolderNotices",this.computeFolderNotices),this.computeFolderNotices()),e.installFromStore&&this.setLocalStorage("newInstall"+this.props.manifestURL,!0)}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout(function(){if(e.props.needClearFlicker&&e.clearFlicker(),e.isDisplayCurrentScreen()){var t=e.state.noticeCount;e.props.item.items||(t>e.lastNoticeCount?e.setLocalStorage("clearNotices"+e.props.manifestURL):t<e.lastNoticeCount&&e.setLocalStorage("localNotice"+e.props.manifestURL,t)),e.lastNoticeCount=t,e.state.newInstall&&e.newInstallFlick&&e.flicker()}},0)}},{key:"componentWillUnmount",value:function(){m.default.off("change",this.handleChange),m.default.off("clearAppStatus",this.handleClearAppStatus)}},{key:"getNoticeCount",value:function(e){var t=0;return this.props.item.items||(t=e[this.props.manifestURL]||0),t}},{key:"getFolderNewInstallLocal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.item;if(e.items&&e.items.length){for(var t=0;t<e.items.length;t++)localStorage.getItem("newInstall"+e.items[t].manifestURL)&&this.newInstallInFolder.push(e.items[t].manifestURL);if(this.newInstallInFolder.length)return!0}return!1}},{key:"setLocalStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{localStorage.setItem(e,t||"")}catch(n){}}},{key:"initRegisterFunc",value:function(){var e=this;this.props.item.items&&(this["addFolderIndicator"+this.props.item.showname]=function(t){e.newInstallInFolder.indexOf(t.manifestURL)===-1&&(e.setLocalStorage("newInstallFlick"+e.props.manifestURL,"true"),e.newInstallFlick=!0,e.newInstallInFolder.push(t.manifestURL),e.setState({newInstall:!0}))},this["deleteFolderIndicator"+this.props.item.showname]=function(t){e.clearFlicker();var n=e.newInstallInFolder.indexOf(t.manifestURL);n!==-1&&(e.newInstallFlick=!1,e.newInstallInFolder.splice(n,1),e.setState({newInstall:!!e.newInstallInFolder.length}))},this.computeFolderNotices=function(){e.folderNotices={};var t=0,n=m.default.notices;e.props.item.items.forEach(function(t){Object.keys(n).indexOf(t.manifestURL)===-1||localStorage.getItem("clearNotices"+t.manifestURL)||(e.folderNotices[t.manifestURL]=n[t.manifestURL])}),Object.keys(e.folderNotices).forEach(function(n){t+=e.folderNotices[n]}),e.setState({noticeCount:t})}),this.props.manifestURL&&(this.clearFolderStatusUrl="clearFolderStatusUrl"+this.props.manifestURL.slice(4),this[this.clearFolderStatusUrl]=function(){e.clearFlicker()})}},{key:"isDisplayCurrentScreen",value:function(){var e=this.props;if(e.viewMode){if("sideMenu"===e.viewMode)return!0;if(e.item.inlineStyle){var t=e.item.inlineStyle.order/1e3-1;if("grid"===e.viewMode)return Math.floor(e.position[0]/3)===Math.floor(t/9);var n=this.noticeIndicatorRef.getBoundingClientRect().top;return 0===n?t>=e.position[0]&&t<e.position[0]+4:n>0&&n<290}}}},{key:"flicker",value:function(){var e=this;if(this.noticeIndicatorRef){var t=this.lastNoticeCount>0,n=!t||this.needFlicker;this.clearFlicker(),n?(this.needFlicker=!1,this.noticeIndicatorRef.classList.add("first-flicker")):window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e.noticeIndicatorRef.classList.add("flicker")})})}}},{key:"clearFlicker",value:function(){this.noticeIndicatorRef&&(this.noticeIndicatorRef.classList.remove("first-flicker"),this.noticeIndicatorRef.classList.remove("flicker"))}},{key:"handleChange",value:function(e){e=e?e:m.default.notices;var t=this.getNoticeCount(e),n=this.state.clearNotices;n&&(t>this.lastNoticeCount||e.newNotice===this.props.manifestURL)&&(this.needFlicker=!0,n=!1),Object.keys(e).indexOf(this.props.manifestURL)!==-1&&(this.setLocalStorage("clearNotices"+this.props.manifestURL,n?"true":""),localStorage.setItem("localNotice"+this.props.manifestURL,e[this.props.manifestURL]),emitter.emit("computeFolderNotices")),this.props.item.items||this.setState({noticeCount:t,clearNotices:n})}},{key:"handleClearAppStatus",value:function(e){if(e===this.props.manifestURL){var t=this.props.item;this.setLocalStorage("clearNotices"+this.props.manifestURL,"true"),t.manifest.categories&&p.default.request("deleteFolderIndicator"+t.manifest.categories[0],t),emitter.emit("computeFolderNotices"),this.setState({newInstall:!1,clearNotices:!0})}}},{key:"handleAnimationStart",value:function(){if(!this.props.item.items){var e=m.default.notices[this.props.manifestURL];this.setLocalStorage("localNotice"+this.props.manifestURL,e)}this.setLocalStorage("newInstallFlick"+this.props.manifestURL),this.newInstallFlick=!1}},{key:"handleAnimationEnd",value:function(e){"opacityLastFadeIn"===e.animationName&&this.clearFlicker()}},{key:"render",value:function(){var t=this;return f.default.createElement(e,u({hasNotices:this.state.noticeCount>0&&!this.state.clearNotices,isNewInstall:this.state.newInstall,handleAnimationStart:this.handleAnimationStart,handleAnimationEnd:this.handleAnimationEnd,noticeIndicatorRef:function(e){t.noticeIndicatorRef=e}},this.props))}}]),n}(f.default.Component)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(3),f=i(c),d=n(2),p=i(d),h=n(78),m=i(h);t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(24),l=i(u),c=n(2),f=i(c),d=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.notices={},e.oldNotices={},e}return o(t,e),
s(t,[{key:"initNoticesData",value:function(){var e=this;navigator.mozApps.getSelf().onsuccess=function(t){t.target.result.connect("launchercomms",{manifestURLs:["app://system.gaiamobile.org/manifest.webapp"]}).then(function(t){t.forEach(function(t){t.onmessage=function(t){clearTimeout(e.throttleFunc),e.throttleFunc=setTimeout(function(){e.countNotices(t.data.result),e.emit("change",e.notices)},500)},t.postMessage({type:"get-all-notices"})})})}}},{key:"setLocalStorage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{localStorage.setItem(e,t?JSON.stringify(t):"")}catch(n){}}},{key:"countNotices",value:function(e){f.default.request("updateMainNotices",e),this.notices=Object.assign({},e.notices),this.notices.newNotice=e.newNotice}},{key:"clearAppStatus",value:function(e){this.setLocalStorage("clearNotices"+e.manifestURL,!0),this.setLocalStorage("newInstall"+e.manifestURL),this.emit("clearAppStatus",e.manifestURL)}}]),t}(l.default),p=new d;t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r),o=n(80),s=i(o);t.default={SETTINGS_DATA_STATUS:"ril.data.enabled",SETTINGS_WIFI_STATUS:"wifi.enabled",SETTINGS_WIFI_SETTINGS_UI:"wifi.settings.ui",WIFI_SHOW:0,offlineChange:!1,internetStatus:!1,accountIsLoggedIn:!1,accountHasWatch:!1,simStatus:[],init:function(){this.monitorSettings(),emitter.on("simInfoUpdate",this.simInfoUpdate.bind(this))},isOnline:function(){var e=this;return new Promise(function(t){var n=navigator.mozWifiManager;if(n&&n.connection&&"connected"===n.connection.status)t(!0);else{var i=navigator.mozMobileConnections,r=navigator.dataCallManager,o=[];i&&r?(Array.prototype.forEach.call(i,function(e,t){e.iccId&&o.push(r.getDataCallState("default",t))}),Promise.all(o).then(function(n){var i=Array.prototype.find.call(n,function(e){return"connected"===e});if(i){var r=a.default.query("mainSimCardIndex");e.simStatus.length&&!e.simStatus[r].carrierName&&(i=!1)}t(!!i)},function(){t(!1)})):t(!1)}})},checkInternetIsConnected:function(e){this.isOnline().then(function(t){e instanceof Function?e(t):s.default.sendMessage({type:"checkInternetIsConnected",data:{status:t}})})},checkDataIsOn:function(){var e=this,t=navigator.mozSettings.createLock();t.get(this.SETTINGS_DATA_STATUS).then(function(t){s.default.sendMessage({type:"checkDataIsOn",data:{status:t[e.SETTINGS_DATA_STATUS]}})}),t.forceClose&&t.forceClose()},checkDataIsDisable:function(){var e=!0,t="disabled"!==AirplaneModeHelper.getStatus()||!1,n=navigator.mozMobileConnections,i=navigator.mozIccManager,r=0;n&&[].forEach.call(n,function(e){var t=e.iccId;i.getIccById(t)&&r++}),r&&!t&&(e=!1),s.default.sendMessage({type:"checkDataIsDisable",data:{status:e}})},checkWiFiIsOn:function(){var e=this,t=navigator.mozSettings.createLock();t.get(this.SETTINGS_WIFI_STATUS).then(function(t){s.default.sendMessage({type:"checkWiFiIsOn",data:{status:t[e.SETTINGS_WIFI_STATUS]}})}),t.forceClose&&t.forceClose()},getHasWiFiValue:function(){return new Promise(function(e){navigator.hasFeature("device.capability.wifi").then(function(t){var n=!1;t&&navigator.mozWifiManager&&(n=!0),e(n)})})},checkHasWiFi:function(){this.getHasWiFiValue().then(function(e){s.default.sendMessage({type:"checkHasWiFi",data:{status:e}})})},getWiFiUiStatus:function(){var e=this;return new Promise(function(t){var n=navigator.mozSettings.createLock();n.get(e.SETTINGS_WIFI_SETTINGS_UI).then(function(n){t(n[e.SETTINGS_WIFI_SETTINGS_UI]?n[e.SETTINGS_WIFI_SETTINGS_UI]:e.WIFI_SHOW)}),n.forceClose&&n.forceClose()})},checkWiFiUiStatus:function(){this.getWiFiUiStatus().then(function(e){s.default.sendMessage({type:"checkWiFiUiStatus",data:{status:e}})})},checkAccountIsLoggedIn:function(){var e=this,t="checkAccountIsLoggedIn";if(this.accountHasWatch||!navigator.mozId){var n=!!navigator.mozId&&this.accountIsLoggedIn;return void s.default.sendMessage({type:t,data:{status:n}})}navigator.mozId.watch({wantIssuer:"kaios-accounts",onlogin:function(n){e.accountIsLoggedIn=!!n,s.default.sendMessage({type:t,data:{status:!!n}})},onlogout:function(){e.accountIsLoggedIn=!1,s.default.sendMessage({type:t,data:{status:!1}})},onready:function(){},onerror:function(e){}}),this.accountHasWatch=!0},changeDataStatus:function(e){var t=navigator.mozSettings.createLock(),n=t.set({"ril.data.enabled":e.status});n.onsuccess=function(){s.default.sendMessage({type:"changeDataStatus",data:{status:e.status}})},n.onerror=function(){}},changeWiFiStatus:function(e){var t=navigator.mozSettings.createLock(),n=t.set({"wifi.enabled":e.status});n.onsuccess=function(){s.default.sendMessage({type:"changeWiFiStatus",data:{status:e.status}})},n.onerror=function(){}},getSearch:function(e){SearchProvider.ready().then(function(){var t=SearchProvider("searchUrl");s.default.sendMessage({type:"getSearch",data:{search:t,keyword:e.keyword}})})},getTextStatus:function(){s.default.sendMessage({type:"getTextStatus",data:{status:navigator.largeTextEnabled}})},monitorSettings:function(){var e=this;navigator.mozSettings&&(navigator.mozSettings.addObserver(this.SETTINGS_DATA_STATUS,function(t){clearTimeout(e.dataChangeTimer),e.dataChangeTimer=setTimeout(function(){e.internetStatusChange()},1e3),s.default.sendMessage({type:"changeDataStatus",data:{status:t.settingValue}})}),navigator.mozSettings.addObserver(this.SETTINGS_WIFI_STATUS,function(e){s.default.sendMessage({type:"changeWiFiStatus",data:{status:e.settingValue}})}),navigator.mozSettings.addObserver(this.SETTINGS_WIFI_SETTINGS_UI,function(e){s.default.sendMessage({type:"checkWiFiUiStatus",data:{status:e.settingValue}})}),navigator.mozWifiManager&&(navigator.mozWifiManager.onstatuschange=function(t){"connected"!==t.status&&"disconnected"!==t.status||(clearTimeout(e.wifiChangeTimer),e.wifiChangeTimer=setTimeout(function(){e.internetStatusChange()},1e3))}),this.isOnline().then(function(t){return e.internetStatus=t}))},internetStatusChange:function(){this.isOnline().then(function(e){var t=s.default.cardsStatus;if(t)return e?(t.disConnectTime=null,t.internetIsLinked||(t.internetIsLinked=e,t.cardsOrder.length<6&&(t.cardsOrder.indexOf("preloaded-7")!==-1&&t.cardsOrder.splice(t.cardsOrder.indexOf("preloaded-7"),1),t.cardsOrder.unshift("preloaded-5","preloaded-7","preloaded-6")))):s.default.cardsStatus.disConnectTime||(t.disConnectTime=Date.now()),s.default.setCardsStatus(t)}).then(function(){return s.default.getCardsStatus()}).then(function(e){s.default.sendMessage({type:"cardsStatusChange",data:e})})},simInfoUpdate:function(){var e=a.default.query("mainSimCardIndex");this.simStatus.length&&this.simStatus[e].carrierName&&!a.default.query("simStatus")[e].carrierName&&this.internetStatusChange(),this.simStatus=a.default.query("simStatus")},showOfflineToaster:function(){}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(79),o=i(a);t.default={cardDB:null,cardsStatus:{},isLaunchByIframe:!1,sendMessage:function(e,t){if(this.isLaunchByIframe){var n=document.querySelector("#cards");n&&n.contentWindow&&(n.contentWindow.postMessage(JSON.stringify(e),"app://kaios-cards.kaiostech.com/index.html"),t&&n.focus())}},init:function(){this.initCardsStatusStore(),this.initCardsStoreChangeMonitor()},getStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cards_data";return new Promise(function(t){window.navigator.getDataStores(e).then(function(e){t(e&&e[0])})})},getAllCards:function(){var e=this;return new Promise(function(t){e.getStore().then(function(e){return Promise.all([e.getLength(),e])}).then(function(e){for(var n=r(e,2),i=n[0],a=n[1],o=[],s=0;s<i;s++)o.push(a.get(s+1));Promise.all(o).then(function(e){t(e)})}).catch(function(){})})},launchCardsByIframe:function(e){var t=this;this.isLaunchByIframe=!0,e=e&&"cards"===e?"cards-shown-home-view":"cards-shown-home-closed-view",Promise.all([this.getAllCards(),o.default.isOnline(),this.getCardsStatus()]).then(function(n){var i=r(n,3),a=i[0],o=i[1],s=i[2],u={type:"launchCardsByIframe",data:{cards:{},view:e}};a&&a.forEach(function(e){u.data.cards[e.id]=e}),o&&!s.internetIsLinked&&(s.internetIsLinked=!0,s.cardsOrder.indexOf("preloaded-7")!==-1&&s.cardsOrder.splice(s.cardsOrder.indexOf("preloaded-7"),1),s.cardsOrder.unshift("preloaded-5","preloaded-7","preloaded-6"),s.disConnectTime=null,t.setCardsStatus(s)),u.data.cardsStatus=s,t.sendMessage(u,"cards-shown-home-view"===e)})},addCards:function(e){var t=this,n=Object.keys(e);this.getStore().then(function(i){if(i){for(var r=[],a=0;a<n.length;a++){var o=e[n[a]];r.push(i.add(o))}Promise.all(r).then(function(){t.sendMessage("addCards")})}}).catch(function(){})},updateCards:function(e){var t=this;return new Promise(function(){var n=Object.keys(e);t.getStore().then(function(i){if(i){for(var r=[],a=0;a<n.length;a++){var o=e[n[a]],s=+o.id.split("-")[1];r.push(i.put(o,s))}Promise.all(r).then(function(){t.sendMessage("updateCards")})}}).catch(function(){})})},showSearchCards:function(){var e=this,t=this.cardsStatus.cardsOrder;t.indexOf("preloaded-2")!==-1&&t.splice(t.indexOf("preloaded-2"),1),t.unshift("preloaded-2"),this.setCardsStatus({cardsOrder:t}).then(function(){e.sendMessage({type:"showSearchCards",data:e.cardsStatus})})},updateStateTime:function(){var e=this;o.default.isOnline().then(function(t){return Promise.all([t,e.getDefaultCardsOrder()])}).then(function(t){var n=r(t,2),i=n[0],a=n[1];if(!i)return e.setCardsStatus({internetIsLinked:!1,disConnectTime:Date.now(),cardsOrder:a})}).then(function(){return e.getCardsStatus()}).then(function(t){e.sendMessage({type:"cardsStatusChange",data:t})})},initCardsStatusStore:function(){var e=this;this.getStore("cards_status").then(function(t){return Promise.all([t.get(1),t,e.getDefaultCardsOrder()])}).then(function(e){var t=r(e,3),n=t[0],i=t[1],a=t[2];return n?Promise.resolve():i.add({internetIsLinked:!1,disConnectTime:Date.now(),internetSearchTimes:1,internetKitTimes:10,cardsOrder:a},1)}).then(function(){return e.getCardsStatus()}).catch(function(){})},initCardsStoreChangeMonitor:function(){var e=this;window.navigator.getDataStores("cards_data").then(function(t){t[0].onchange=function(t){"updated"===t.operation&&document.hidden&&e.launchCardsByIframe("cards")}})},getCardsStatus:function(){var e=this;return new Promise(function(t){e.getStore("cards_status").then(function(e){return e.get(1)}).then(function(n){e.cardsStatus=n,t(n)}).catch(function(){})})},setCardsStatus:function(e){var t=this;return new Promise(function(n){t.getStore("cards_status").then(function(e){return Promise.all([e.get(1),e])}).then(function(n){var i=r(n,2),a=i[0],o=i[1];return Object.keys(e).forEach(function(t){a[t]=e[t]}),t.cardsStatus=a,o.put(a,1)}).then(function(){return n()}).catch(function(){})})},getDefaultCardsOrder:function(){return new Promise(function(e){o.default.getHasWiFiValue().then(function(t){var n=["preloaded-1","preloaded-3","preloaded-4"],i=["preloaded-1","preloaded-3"];t?o.default.getWiFiUiStatus().then(function(t){e(o.default.WIFI_SHOW===t?n:i)}):e(i)})})}}},,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(19),c=r(l),f=n(274),d=r(f),p=n(2),h=r(p),m=n(83),g=r(m),v=n(139),y=r(v),b=n(28),w=r(b),S=n(33),_=r(S),k=n(9),L=i(k),E=function(e){function t(){var e,n,i,r;a(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.name="SpeedDialHelper",r=n,o(i,r)}return s(t,e),u(t,[{key:"speedDial",value:function(e){var t=this;dump("launcher,speeddial:"+e),0==e&&AppStore.launchBrowser();var n=h.default.query("forceSettings"),i=n[_.default[3]];if(!L.customEvtentKey(String(e),i,w.default)){var r=e-1;if(!(r<0))return 0===r?void this.dialVoicemail():void navigator.customization.getValue("speed.dial.enable").then(function(n){dump("speed dial enable result ====== "+n);var i=!0;n||(i=!1),dump("speed dial enable speedDialEnable ====== "+i),i&&(0==r?navigator.customization.getValue("voice.mail.enable").then(function(n){n=void 0===n||n,dump("speed_dial_helper.js voicemail get result = "+n),n?t.dialOrAssignSpeedDial(e,r):dump("speed_dial_helper.js voicemail disabled!!!")}):t.dialOrAssignSpeedDial(e,r))})}}},{key:"dialOrAssignSpeedDial",value:function(e,t){var n=d.default.contacts[t].tel;n?g.default.dial(n,{speedDial:!0}).catch(function(e){return"BlockNumber"===e&&g.default.showLimitNumberDialog()}):this.assignSpeedDial(e)}},{key:"dialVoicemail",value:function(){var e=this;h.default.request("chooseSim","call").then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=d.default["ril.iccInfo.mbdn"],i=(Array.isArray(n)?n[t]:n)||navigator.mozVoicemail&&navigator.mozVoicemail.getNumber(t);i?g.default.dial(i,{serviceId:t,speedDial:!0}).catch(function(e){return"BlockNumber"===e&&g.default.showLimitNumberDialog()}):e.assignSpeedDial(1)})}},{key:"assignSpeedDial",value:function(e){e=Number(e),e&&(1===e?h.default.request("showDialog",{type:"alert",header:"confirmation",content:"assign-voicemail"}):h.default.request("showDialog",{ok:"assign",type:"confirm",header:L.toL10n("confirmation"),content:L.toL10n("assign-speed-dial",{n:e}),translated:!0,onOk:function(){L.pickContact(function(t){var n=t.target.result,i=n.id;if(n&&i)return n.tel||n.tel[0]||n.tel[0].value?void d.default.set(e,n.tel[0].value,i):void window.alert(L.toL10n("alert-for-contacts-without-number"))})}}))}},{key:"removeSpeedDial",value:function(e){var t=e.number,n=e.name,i=e.cb,r=function(){"function"==typeof i&&i()};h.default.request("showDialog",{ok:"remove",type:"confirm",header:L.toL10n("confirmation"),content:L.toL10n("remove-speed-dial",{name:n}),translated:!0,onOk:function(){d.default.remove(t)},onCancel:r,onBack:r})}},{key:"replaceSpeedDial",value:function(e){var t=e.number,n=e.name,i=e.contactId,r=d.default.contacts[t-1].tel;L.pickContact(function(e){var a=e.target.result,o=a.id;if(a&&o){var s=a.tel[0].value,u=a.name[0]||s;i+"-"+n+"-"+r==o+"-"+u+"-"+s?d.default.set(t,s,o):h.default.request("showDialog",{ok:"replace",type:"confirm",header:L.toL10n("confirmation"),content:L.toL10n("replace-speed-dial",{name:n,subName:u}),translated:!0,onOk:function(){d.default.set(t,s,o)}})}})}},{key:"register",value:function(e){e.addEventListener("keydown",this),e.addEventListener("keyup",this)}},{key:"unregister",value:function(e){e.removeEventListener("keydown",this),e.removeEventListener("keyup",this)}},{key:"_handle_keyup",value:function(e){if(h.default.query("Dialer.ready")&&this.pressingTimer&&!h.default.query("LaunchStore.isLaunching")){var t=y.default.translate(e.key);switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"*":case"#":case"+":window.clearTimeout(this.pressingTimer),this.pressingTimer=null,h.default.query("App.panelAnimationRunning")||h.default.request("Dialer:show",t)}}}},{key:"_handle_keydown",value:function(e){var t=this;if(h.default.query("Dialer.ready")&&!h.default.query("LaunchStore.isLaunching")){var n=y.default.translate(e.key);switch(this.pressingTimer&&(window.clearTimeout(this.pressingTimer),this.pressingTimer=null),n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.pressingTimer=window.setTimeout(function(){t.speedDial(parseInt(n,10)),t.pressingTimer=null},1500);break;case"*":case"#":case"+":this.pressingTimer=window.setTimeout(function(){t.pressingTimer=null},500)}}}}]),t}(c.default),O=new E;t.default=O},,function(e,t){"use strict";function n(e){return e?e.replace(i,function(e,t){return"x"===t.charAt(0).toLowerCase()?String.fromCharCode(parseInt(t.substring(1),16)):String.fromCharCode(parseInt(t.substring(0),10))}):""}Object.defineProperty(t,"__esModule",{value:!0}),t.unescapeNumericHTMLEntities=n;var i=t.numericEntityRegExp=/&#([a-z0-9]+);/gi},,function(e,t){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function a(e){return"object"===("undefined"==typeof e?"undefined":s(e))&&null!==e}function o(e){return void 0===e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return this instanceof i?void r.call(this,e):new i(e)}e.exports=i;var r=n(73),a=n(34);a.inherits=n(21),a.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){(function(t){"use strict";function i(e,t){var i=n(27);e=e||{};var r=e.highWaterMark,a=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(A||(A=n(127).StringDecoder),this.decoder=new A(e.encoding),this.encoding=e.encoding)}function r(e){n(27);return this instanceof r?(this._readableState=new i(e,this),this.readable=!0,void O.call(this)):new r(e)}function a(e,t,n,i,r){var a=l(t,n);if(a)e.emit("error",a);else if(I.isNullOrUndefined(n))t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&r){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||r||i||(n=t.decoder.write(n)),r||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&f(e)),p(e,t);else r||(t.reading=!1);return o(t)}function o(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=T)e=T;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||I.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function l(e,t){var n=null;return I.isBuffer(t)||I.isString(t)||I.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,f(e)}function f(e){var n=e._readableState;n.needReadable=!1,n.emittedReadable||(C("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?t.nextTick(function(){d(e)}):d(e))}function d(e){C("emit readable"),e.emit("readable"),y(e)}function p(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){h(e,n)}))}function h(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(C("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;C("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&E.listenerCount(e,"data")&&(t.flowing=!0,y(e))}}function g(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(function(){v(e,n)}))}function v(e,t){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(C("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function b(e,t){var n,i=t.buffer,r=t.length,a=!!t.decoder,o=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(o)n=i.shift();else if(!e||e>=r)n=a?i.join(""):L.concat(i,r),i.length=0;else if(e<i[0].length){var s=i[0];n=s.slice(0,e),i[0]=s.slice(e)}else if(e===i[0].length)n=i.shift();else{n=a?"":new L(e);for(var u=0,l=0,c=i.length;l<c&&u<e;l++){var s=i[0],f=Math.min(e-u,s.length);a?n+=s.slice(0,f):s.copy(n,u,0,f),f<s.length?i[0]=s.slice(f):i.shift(),u+=f}}return n}function w(e){var n=e._readableState;if(n.length>0)throw new Error("endReadable called on non-empty stream");n.endEmitted||(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function S(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)}function _(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}e.exports=r;var k=n(233),L=n(25).Buffer;r.ReadableState=i;var E=n(86).EventEmitter;E.listenerCount||(E.listenerCount=function(e,t){return e.listeners(t).length});var O=n(39),I=n(34);I.inherits=n(21);var A,C=n(305);C=C&&C.debuglog?C.debuglog("stream"):function(){},I.inherits(r,O),r.prototype.push=function(e,t){var n=this._readableState;return I.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new L(e,t),t="")),a(this,n,e,t,!1)},r.prototype.unshift=function(e){return a(this,this._readableState,e,"",!0)},r.prototype.setEncoding=function(e){return A||(A=n(127).StringDecoder),this._readableState.decoder=new A(e),this._readableState.encoding=e,this};var T=8388608;r.prototype.read=function(e){C("read",e);var t=this._readableState,n=e;if((!I.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return C("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):f(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var i=t.needReadable;C("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,C("length less than watermark",i)),(t.ended||t.reading)&&(i=!1,C("reading or ended",i)),i&&(C("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(n,t));var r;return r=e>0?b(e,t):null,I.isNull(r)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),I.isNull(r)||this.emit("data",r),r},r.prototype._read=function(e){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(e,n){function i(e){C("onunpipe"),e===f&&a()}function r(){C("onend"),e.end()}function a(){C("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",s),e.removeListener("unpipe",i),f.removeListener("end",r),f.removeListener("end",a),f.removeListener("data",o),!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function o(t){C("ondata"),!1===e.write(t)&&(C("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function s(t){C("onerror",t),c(),e.removeListener("error",s),0===E.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),c()}function l(){C("onfinish"),e.removeListener("close",u),c()}function c(){C("unpipe"),f.unpipe(e)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,C("pipe count=%d opts=%j",d.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,h=p?r:a;d.endEmitted?t.nextTick(h):f.once("end",h),e.on("unpipe",i);var g=m(f);return e.on("drain",g),f.on("data",o),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",l),e.emit("pipe",f),d.flowing||(C("pipe resume"),f.resume()),e},r.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var r=_(t.pipes,e);return r===-1?this:(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},r.prototype.on=function(e,n){var i=O.prototype.on.call(this,e,n);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&f(this,r);else{var a=this;t.nextTick(function(){C("readable nexttick read 0"),a.read(0)})}}return i},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){var e=this._readableState;return e.flowing||(C("resume"),e.flowing=!0,e.reading||(C("resume read 0"),this.read(0)),g(this,e)),this},r.prototype.pause=function(){return C("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(C("pause"),this._readableState.flowing=!1,this.emit("pause")),this},r.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(C("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(C("wrapped data"),t.decoder&&(r=t.decoder.write(r)),r&&(t.objectMode||r.length)){i.push(r)||(n=!0,e.pause())}});for(var r in e)I.isFunction(e[r])&&I.isUndefined(this[r])&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));return S(["error","close","destroy","pause","resume"],function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){C("wrapped _read",t),n&&(n=!1,e.resume())},i},r._fromList=b}).call(t,n(42))},function(e,t,n){"use strict";function i(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=n(25).Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=r)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,r)}return t;
},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=null,n=["app",e.hasNotices?"has-notices":"",e.isNewInstall?"new-install":""].filter(Boolean).join(" ");return o.default.createElement("div",{className:"app-tile",style:e.item.inlineStyle||{}},o.default.createElement("div",{tabIndex:"-1",role:"menuitem",key:e.item.uid,className:n,onClick:function(){return(0,u.launch)(e.item)},onBlur:function(){return c.default.hideMarquee(e,t)}},o.default.createElement("div",{className:"app__icon",ref:e.noticeIndicatorRef,onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,style:{color:e.item.theme&&e.item.theme.color,backgroundImage:"url('"+e.item.icon_url+"')"}},o.default.createElement("div",{className:"app__notices"}),o.default.createElement("div",{className:"new__install"}),o.default.createElement("div",{className:"app__icon--hq",style:{backgroundImage:"url('"+e.item.icon_url_hq+"')"}}),e.item.favicon_url&&o.default.createElement("div",{className:"app__icon--favicon",style:{backgroundImage:"url('"+e.item.favicon_url+"')"}})),o.default.createElement("div",{className:"app__name",ref:function(e){t=e}},(0,s.unescapeNumericHTMLEntities)(e.item.displayName))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(3),o=i(a),s=n(84),u=n(51),l=n(129),c=i(l)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this.marqueeDelay=null,this.scrollDelay=null,this.EACH_SCROLL_PX=6,this.SPACE_STR="              "}return i(e,[{key:"showMarquee",value:function(e,t){var n=this;if(!(t.scrollWidth<=t.offsetWidth)){var i=t.scrollWidth;this.marqueeDelay=setTimeout(function(){t.style.textOverflow="unset",t.innerText=t.innerText+n.SPACE_STR+t.innerText,n.makeMarquee(e,t,i)},1e3)}}},{key:"makeMarquee",value:function(e,t,n){var i=this,r="rtl"===document.dir,a=t.scrollWidth,o=t.scrollLeft;(r?a+o<n+this.EACH_SCROLL_PX:a-o-this.EACH_SCROLL_PX>n)?(o=r?o-this.EACH_SCROLL_PX:o+this.EACH_SCROLL_PX,t.scrollLeft=o,this.scrollDelay=setTimeout(function(){i.makeMarquee(e,t,n)},90)):this.hideMarquee(e,t)}},{key:"hideMarquee",value:function(e,t){"list"!==e.viewMode||t.scrollWidth<=t.offsetWidth||(clearTimeout(this.scrollDelay),clearTimeout(this.marqueeDelay),t.innerText=e.item.displayName,t.style.textOverflow="ellipsis",t.scrollLeft=0)}}]),e}(),a=new r;t.default=a},function(e,t,n){"use strict";function i(e){if(!f(e)||p(e)||y(e)||d(e))return!0;if(h(e)){var t=m()&&!g(),n="";return n=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),"62GMX"!==n&&"62HMX"!==n||o(e),!t}var i=(0,s.findFoldersByItemManifestURL)(AppStore.apps,e.manifestURL),r=(0,s.findFoldersByItemOrigin)(AppStore.apps,e.manifest.origin||e.origin);return i.length>0||r.length>0?v(i.length>0?i:r):(dump("FIH shouldHide "+e.manifest.name+","+AppStore.customApps+","+b(e)+", "+w(e)),"0"==AppStore.customApps&&(b(e)||w(e)))}function r(e){return dump("FIH shouldHideinSideMenu "+e.manifest.name+","+AppStore.customApps+","+b(e)+", "+w(e)),"0"==AppStore.customApps&&(b(e)||w(e))||S(e)&&!a(e)}function a(e){if(h(e)){return m()&&!g()}}function o(e){var t=SIMSlotManager.getSlots(),n=navigator.mozMobileConnections.length,i=0,r="";t[0].isAbsent()?n>1&&!t[1].isAbsent()&&(i=1):i=0,dump("isNeedChangeSTKName defaultSimlot="+i+",slotNum="+n);var a=t[i];if(a&&a.simCard&&a.simCard.iccInfo){r=a.simCard.iccInfo.mcc+""+a.simCard.iccInfo.mnc,dump("isNeedChangeSTKName ::mccmnc:"+r);for(var o=0;o<_.length;o++)_[o].mccncc===r&&(e.displayName=_[o].name)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.shouldHideinSideMenu=r;var s=n(32),u=["system","input","theme","homescreen","invisible","carrier"],l=["Siberian Strike","Danger Dash","Real Football Runner","Crossy Road","Doodle Jump","English with Oxford","Nitro Street Run 2","Racing Attack"],c=["WhatsApp","Assistant","Maps","Google Search","YouTube","YouTubeApp","Twitter","Facebook"],f=function(e){return e.enabled&&"invisible"!==e.role},d=function(e){return"dialer"===e.entry},p=function(e){return u.includes(e.manifest.role)},h=function(e){return"stk"===e.manifest.name},m=function(){return AppStore.flags.stkEnabled},g=function(){return AppStore.flags.airplaneModeEnabled},v=function(e){return!(e.filter(function(e){return e.showItemsInAllApps}).length>0)},y=function(e){return e.isInSidemenu},b=function(e){return l.includes(e.manifest.name)},w=function(e){return c.includes(e.manifest.name)},S=function(e){return"stk".includes(e.manifest.name)},_=[{mccncc:"330110",name:"SIM CLARO"},{mccncc:"71403",name:"SIM CLARO"},{mccncc:"73003",name:"Claro"},{mccncc:"37002",name:"SIM CLARO"},{mccncc:"74810",name:"Chip Claro"},{mccncc:"74402",name:"Chip Claro"},{mccncc:"722310",name:"Chip Claro"},{mccncc:"72405",name:"SIM CLARO"},{mccncc:"732101",name:"SIM Claro"},{mccncc:"70401",name:"SIM CLARO"},{mccncc:"71610",name:"SIM CLARO"},{mccncc:"74001",name:"SIM Claro"},{mccncc:"70601",name:"SIM CLARO"},{mccncc:"708001",name:"SIM CLARO"},{mccncc:"71021",name:"SIM CLARO"},{mccncc:"71203",name:"SIM CLARO"},{mccncc:"33420",name:"SIM TELCEL"}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"Call Log",manifestURL:"app://communications.gaiamobile.org/manifest.webapp"},{name:"Contact",manifestURL:"app://contact.gaiamobile.org/manifest.webapp"},{name:"KaiOS-Store",origin:"app://kaios-plus.kaiostech.com"},{name:"Assistant",manifestURL:"https://api.kaiostech.com/apps/manifest/OSlAbgrhLArfT7grf4_N"},{name:"YouTube",manifestURL:"https://api.kaiostech.com/apps/manifest/6x6P4Ap7oCIzOW10hBpm"},{name:"Maps",manifestURL:"https://www.google.com/maps/preview/pwa/kaios/manifest.webapp"},{name:"Snake",manifestURL:"app://snake.gaiamobile.org/manifest.webapp"},{name:"WhatsApp",manifestURL:"https://api.kaiostech.com/apps/manifest/ahLsl7Qj6mqlNCaEdKXv"},{name:"Facebook",manifestURL:"https://api.kaiostech.com/apps/manifest/oRD8oeYmeYg4fLIwkQPH"},{name:"Camera",manifestURL:"app://camera.gaiamobile.org/manifest.webapp"},{name:"Gallery",manifestURL:"app://gallery.gaiamobile.org/manifest.webapp"},{name:"Games",origin:"homescreen.games.folder"},{name:"Video",manifestURL:"app://video.gaiamobile.org/manifest.webapp"},{name:"Messages",manifestURL:"app://sms.gaiamobile.org/manifest.webapp"},{name:"GoogleSearch",origin:"app://search.google.com"},{name:"Browser",manifestURL:"app://search.gaiamobile.org/manifest.webapp"},{name:"Real Football Runner",manifestURL:"app://realfootballrunner.gaiamobile.org/manifest.webapp"},{name:"E-Mail",manifestURL:"app://email.gaiamobile.org/manifest.webapp"},{name:"Clock",manifestURL:"app://clock.gaiamobile.org/manifest.webapp"},{name:"Twitter",manifestURL:"https://mobile.twitter.com/kaios.webapp"},{name:"Music",manifestURL:"app://music.gaiamobile.org/manifest.webapp"},{name:"FM Radio",manifestURL:"app://fm.gaiamobile.org/manifest.webapp"},{name:"Settings",manifestURL:"app://settings.gaiamobile.org/manifest.webapp"},{name:"File Manager",manifestURL:"app://filemanager.gaiamobile.org/manifest.webapp"},{name:"Calendar",manifestURL:"app://calendar.gaiamobile.org/manifest.webapp"},{name:"Note",manifestURL:"app://notes.gaiamobile.org/manifest.webapp"},{name:"Calculator",manifestURL:"app://calculator.gaiamobile.org/manifest.webapp"},{name:"Recorder",manifestURL:"app://soundrecorder.gaiamobile.org/manifest.webapp"},{name:"Unit Converter",manifestURL:"app://unitconverter.gaiamobile.org/manifest.webapp"},{name:"QR Reader",manifestURL:"https://api.kaiostech.com/apps/manifest/mwkpcuFJhk_Eeema8-fu"},{name:"KaiNews",manifestURL:"https://api.kaiostech.com/apps/manifest/TNQNy0nvZdt-jLvokjYJ"},{name:"KaiWeather",manifestURL:"https://api.kaiostech.com/apps/manifest/hY_EHJAESdznRYwwfqsL"},{name:"Memory Cleaner",manifestURL:"homescreen.memory.cleaner"},{name:"stk",manifestURL:"app://stk.gaiamobile.org/manifest.webapp"}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"Call Log",manifestURL:"app://communications.gaiamobile.org/manifest.webapp"},{name:"Contact",manifestURL:"app://contact.gaiamobile.org/manifest.webapp"},{name:"KaiOS-Store",origin:"app://kaios-plus.kaiostech.com"},{name:"Assistant",manifestURL:"https://api.kaiostech.com/apps/manifest/OSlAbgrhLArfT7grf4_N"},{name:"YouTube",manifestURL:"https://api.kaiostech.com/apps/manifest/6x6P4Ap7oCIzOW10hBpm"},{name:"Maps",manifestURL:"https://www.google.com/maps/preview/pwa/kaios/manifest.webapp"},{name:"Snake",manifestURL:"app://snake.gaiamobile.org/manifest.webapp"},{name:"WhatsApp",manifestURL:"https://api.kaiostech.com/apps/manifest/ahLsl7Qj6mqlNCaEdKXv"},{name:"Facebook",manifestURL:"https://api.kaiostech.com/apps/manifest/oRD8oeYmeYg4fLIwkQPH"},{name:"Camera",manifestURL:"app://camera.gaiamobile.org/manifest.webapp"},{name:"Gallery",manifestURL:"app://gallery.gaiamobile.org/manifest.webapp"},{name:"Video",manifestURL:"app://video.gaiamobile.org/manifest.webapp"},{name:"Messages",manifestURL:"app://sms.gaiamobile.org/manifest.webapp"},{name:"GoogleSearch",origin:"app://search.google.com"},{name:"Browser",manifestURL:"app://search.gaiamobile.org/manifest.webapp"},{name:"E-Mail",manifestURL:"app://email.gaiamobile.org/manifest.webapp"},{name:"Clock",manifestURL:"app://clock.gaiamobile.org/manifest.webapp"},{name:"Twitter",manifestURL:"https://mobile.twitter.com/kaios.webapp"},{name:"Music",manifestURL:"app://music.gaiamobile.org/manifest.webapp"},{name:"FM Radio",manifestURL:"app://fm.gaiamobile.org/manifest.webapp"},{name:"Settings",manifestURL:"app://settings.gaiamobile.org/manifest.webapp"},{name:"File Manager",manifestURL:"app://filemanager.gaiamobile.org/manifest.webapp"},{name:"Calendar",manifestURL:"app://calendar.gaiamobile.org/manifest.webapp"},{name:"Note",manifestURL:"app://notes.gaiamobile.org/manifest.webapp"},{name:"Calculator",manifestURL:"app://calculator.gaiamobile.org/manifest.webapp"},{name:"Recorder",manifestURL:"app://soundrecorder.gaiamobile.org/manifest.webapp"},{name:"Unit Converter",manifestURL:"app://unitconverter.gaiamobile.org/manifest.webapp"},{name:"stk",manifestURL:"app://stk.gaiamobile.org/manifest.webapp"}]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(24),c=i(l),f=n(12),d=i(f),p=n(241),h=i(p),m=n(251),g=i(m),v=n(252),y=function(e){function t(){var e,n,i,o;r(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.rules=[],i.cachedRulesJson=null,i.customizaed=!1,i.mount=function(){i.fastGetSetting(),d.default.addObserver("home.customization.rules",i.handleCustomizationRulesUpdate)},i.unmount=function(){d.default.removeObserver("home.customization.rules",i.handleCustomizationRulesUpdate)},i.fastGetSetting=function(){var e=navigator.mozSettings.createLock(),t=e.get("home.customization.rules");t.onsuccess=function(){i.handleCustomizationRulesUpdate(t.result["home.customization.rules"])},e.forceClose&&e.forceClose()},i.handleCustomizationRulesUpdate=function(e){try{if(!e)return void i.cleanUpCustomizationRules();if(e===i.cachedRulesJson)return;var t=JSON.parse(e);if(!Array.isArray(t))throw new Error("Received an invalid customization update, the rule list should be an array.");var n=t.filter(function(e){switch((0,v.validateCustomizationRule)(e),e.type){case g.default.ShowFolder:return(0,v.validateShowFolderRule)(e),!0;default:throw new Error("Received an invalid customization rule type: "+e.type)}});i.cachedRulesJson=e,i.rules=n,i.customizaed=!0,i.emit("updated")}catch(r){}},i.getCustomFolders=function(){return i.rules.filter(function(e){return e.type===g.default.ShowFolder}).map(function(e){return e.params.folder}).map(function(e){return s({},e,{basisname:e.name.toLowerCase(),source:h.default.Customization})})},i.cleanUpCustomizationRules=function(){i.rules=[],i.cachedRulesJson=null,i.emit("updated")},o=n,a(i,o)}return o(t,e),u(t,null,[{key:"isCustomizedItem",value:function(e){return e.source&&e.source===h.default.Customization}}]),t}(c.default);t.default=y},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n){var i={};e:for(var r=0,a=t.terms.length;r<a;r++)for(var o=t.terms[r],s=0,u=t.fields.length;s<u;s++){var l=t.fields[s];if(e[l])for(var c=0,f=e[l].length;c<f;c++){var d=e[l][c];if("undefined"!=typeof d.value&&(d=d.value),i[o]=n(d.trim(),o))continue e}}return Object.keys(i).every(function(e){return i[e]})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(19),f=r(c),d=n(9),p=i(d),h={contains:function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e.contains(t)},equality:function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===t}},m=/\s+/,g=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"start",value:function(){this.contactStore=new Map,this.API=window.mozContacts||navigator.mozContacts,this.API.addEventListener("contactchange",this),this.initObserver()}},{key:"getContactChildren",value:function(e){return e?e.querySelectorAll("*[data-contact-number]"):[]}},{key:"updateFragment",value:function(e){"function"==typeof e.hasAttribute&&e.hasAttribute("data-contact-number")&&this.updateContact(e);for(var t=this.getContactChildren(e),n=0;n<t.length;n++)this.updateContact(t[n])}},{key:"initObserver",value:function(){var e=this,t={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:["data-contact-number"]};new MutationObserver(function(n,i){i.disconnect(),e.updateContacts(n),i.observe(document,t)}).observe(document,t)}},{key:"updateContacts",value:function(e){for(var t=this,n=void 0,i=new Set,r=0;r<e.length;r++){if(n=e[r],"childList"===n.type)for(var a=void 0,o=0;o<n.addedNodes.length;o++)a=n.addedNodes[o],a.nodeType===Node.ELEMENT_NODE&&i.add(a);"attributes"===n.type&&i.add(n.target)}i.forEach(function(e){e.childElementCount?t.updateFragment(e):e.dataset.contactNumber&&t.updateContact(e)},this)}},{key:"updateContact",value:function(e){var t=this,n=e.dataset.contactNumber,i="name"===e.dataset.contactColumn?e:e.querySelector("[data-contact-column=name]"),r="photo"===e.dataset.contactColumn?e:e.querySelector("[data-contact-column=photo]");this.findByAddress(n,function(a){var o=p.getContactDetails(n,a,{photoURL:!0});i?o.name?i.textContent!==o.name&&(t.debug("updating name",o,e),i.textContent=o.name):i.textContent&&(t.debug("cleaning name",o,e),i.textContent=""):t.debug("no contact name DOM"),r?(t.debug("updating photo",o,e),r.style.backgroundImage=o.photoURL?"url("+o.photoURL+")":null):t.debug("no photo DOM")})}},{key:"_handle_contactchange",value:function(){this.updateFragment(document.body),this.emit("contact-changed")}},{key:"findBy",value:function(e,t){var n,i,r=[],a=(e.filterValue||"").trim(),o=this;return navigator.mozContacts&&a.length?(n=a.split(m),e.filterValue=1===n.length?n[0]:n.reduce(function(e,t){return r.push(t.toLowerCase()),t.length>e.length?t:e},""),e.filterValue.length<3&&(e.filterLimit=10),r.splice(r.indexOf(e.filterValue.toLowerCase()),1),r.push.apply(r,n),i=o.API.find(e),i.onsuccess=function(){var e,i=this.result.slice(),a=["tel","givenName","familyName"],o={fields:a,terms:r},s=[];if(n.length>1)for(;e=i.pop();)u(e,o,h.contains)&&s.push(e);else s=i;t(s,{terms:n})},void(i.onerror=function(){this.onsuccess=null,this.onerror=null,t(null)})):void setTimeout(function(){t("undefined"==typeof e.filterValue?null:[],{})})}},{key:"findContactByString",value:function(e,t){var n=["tel","givenName","familyName"];return this.findBy({filterBy:n,filterOp:"contains",filterValue:e},t)}},{key:"findExact",value:function(e,t){return this.findBy({filterBy:["givenName","familyName"],filterOp:"contains",filterValue:e},function(n){var i=n&&n.length?n[0]:null,r={fields:["name"],terms:[e]},a=!1;i&&(a=u(i,r,h.equality)),t(a?[i]:[])})}},{key:"findByPhoneNumber",value:function(e,t){return this.findBy({filterBy:["tel"],filterOp:"match",filterValue:e.replace(/\s+/g,"")},function(e){return e&&e.length?void t(e):void t([])})}},{key:"findByAddress",value:function(e,t){this.findByPhoneNumber(e,t)}},{key:"findExactByEmail",value:function(e,t){return this.findBy({filterBy:["email"],filterOp:"equals",filterValue:e},t)}},{key:"findById",value:function(e,t){return this.findBy({filterBy:["id"],filterOp:"equals",filterValue:e},function(e){var n=[];e&&e.length&&(n=e[0]),t(n)})}}]),t}(f.default),v=new g;v.start(),t.default=v},,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=t.EVENT_TYPES={APP_POSITION:"app_position"},a="eventlogger_event",o=function(){function e(){n(this,e),this.dataStore=null}return i(e,[{key:"log",value:function(e){if(e&&e.type)switch(e.type){case r.APP_POSITION:this.write({event_type:r.APP_POSITION,starting_position:e.starting_position,end_position:e.end_position,app_id:e.app_id,app_version:e.app_version})}}},{key:"write",value:function(e){return this.getStore().then(function(t){return t.add(e)})}},{key:"getStore",value:function(){var e=this;return this.dataStore?Promise.resolve(this.dataStore):new Promise(function(t,n){return navigator.getDataStores?void navigator.getDataStores(a).then(function(i){return i.length<1?void n("EventLogger: Cannot get access to the DataStore:",a):(e.dataStore=i[0],void t(e.dataStore))},n):void n("EventLogger: DataStore API is not available.")})}}]),e}();t.eventLogger=new o},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(19),l=i(u),c=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"start",value:function(){this.emit("user-has-selected")}}]),t}(l.default),f=new c;t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={w:"1",e:"2",r:"3",s:"4",d:"5",f:"6",z:"7",x:"8",c:"9",",":"0",o:"+",a:"*",q:"#"};navigator.hasFeature("device.capability.qwerty").then(function(e){e&&(n[4]="$")}),t.default={translate:function(e){return n[e]||e}}},,,function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function r(e){var t,i,r,a,o,s,u=e.length;o=n(e),s=new c(3*u/4-o),r=o>0?u-4:u;var f=0;for(t=0,i=0;t<r;t+=4,i+=3)a=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],s[f++]=a>>16&255,s[f++]=a>>8&255,s[f++]=255&a;return 2===o?(a=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,s[f++]=255&a):1===o&&(a=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,s[f++]=a>>8&255,s[f++]=255&a),s}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function o(e,t,n){for(var i,r=[],o=t;o<n;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],r.push(a(i));return r.join("")}function s(e){for(var t,n=e.length,i=n%3,r="",a=[],s=16383,l=0,c=n-i;l<c;l+=s)a.push(o(e,l,l+s>c?c:l+s));return 1===i?(t=e[n-1],r+=u[t>>2],r+=u[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=u[t>>10],r+=u[t>>4&63],r+=u[t<<2&63],r+="="),a.push(r),a.join("")}t.byteLength=i,t.toByteArray=r,t.fromByteArray=s;for(var u=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=f.length;d<p;++d)u[d]=f[d],l[f.charCodeAt(d)]=d;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(15),f=i(c),d=n(5),p=i(d),h=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={popup:null},n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){}},{key:"focus",value:function(){f.default.findDOMNode(this.refs.composed).focus()}},{key:"open",value:function(e){this.refs.popup&&this.refs.popup.open(e)}},{key:"componentDidUpdate",value:function(){var e=this;this.refs.popup&&(this.refs.popup.open("bottom-to-up"),this.refs.popup.refs.composed.close=this.close.bind(this),this.refs.popup.refs.composing.on("closing",function(){e.setState({popup:null})}))}},{key:"render",value:function(){var e=this.state.popup?l.default.cloneElement(this.state.popup,{ref:"popup"}):null;return l.default.createElement("div",{className:"popup"},e)}}]),t}(p.default);t.default=h},,,,,,,,,,,,,,,function(e,t,n){var i;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){i=function(e,t,n){"use strict";function i(e,t){var n=r(t),i=n.measureText(e).width;return o("got text width",i),i}function r(e){o("get canvas context",e);var t=s[e];if(t)return t;var n=document.createElement("canvas");n.setAttribute("moz-opaque","true"),n.setAttribute("width","1px"),n.setAttribute("height","1px"),o("created canvas",n);var i=n.getContext("2d",{willReadFrequently:!0});return i.font=e,s[e]=i}function a(e){return e.replace(/\s+/g," ").trim()}var o=function(){},s={};n.exports=function(e){o("font fit",e);var t,n,r=e.space-.03*e.space,s=e.min||16,u=e.max||24,l=a(e.text),c=u;do n=e.font.replace(/\d+px/,c+"px"),t=i(l,n);while(t>r&&c!==s&&c--);return{textWidth:t,fontSize:c,overflowing:t>r}}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(304))},function(e,t,n){"use strict";function i(e,t){if(!a.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}function r(e){o.call(this),this._block=a.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var a=n(232).Buffer,o=n(39).Transform;n(21)(r,o),r.prototype._transform=function(e,t,n){var i=null;try{this.update(e,t)}catch(r){i=r}n(i)},r.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(n){t=n}e(t)},r.prototype.update=function(e,t){if(i(e,"Data"),this._finalized)throw new Error("Digest already called");a.isBuffer(e)||(e=a.from(e,t));for(var n=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)n[this._blockOffset++]=e[r++];for(var s=0,u=8*e.length;u>0;++s)this._length[s]+=u,u=this._length[s]/4294967296|0,u>0&&(this._length[s]-=4294967296*u);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=r},function(e,t){"use strict";t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?r-1:0,d=n?-1:1,p=e[t+f];for(f+=d,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,i),a-=l}return(p?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,u,l=8*a-r-1,c=(1<<l)-1,f=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,h=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+f>=1?d/u:d*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,r),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,r),o=0));r>=8;e[n+p]=255&s,p+=h,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[n+p]=255&o,p+=h,o/=256,l-=8);e[n+p-h]|=128*m}},function(e,t){"use strict";var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function i(){c.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function r(e,t){return e<<t|e>>>32-t}function a(e,t,n,i,a,o,s){return r(e+(t&n|~t&i)+a+o|0,s)+t|0}function o(e,t,n,i,a,o,s){return r(e+(t&i|n&~i)+a+o|0,s)+t|0}function s(e,t,n,i,a,o,s){return r(e+(t^n^i)+a+o|0,s)+t|0}function u(e,t,n,i,a,o,s){return r(e+(n^(t|~i))+a+o|0,s)+t|0}var l=n(21),c=n(159),f=n(163).Buffer,d=new Array(16);l(i,c),i.prototype._update=function(){for(var e=d,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,r=this._c,l=this._d;n=a(n,i,r,l,e[0],3614090360,7),l=a(l,n,i,r,e[1],3905402710,12),r=a(r,l,n,i,e[2],606105819,17),i=a(i,r,l,n,e[3],3250441966,22),n=a(n,i,r,l,e[4],4118548399,7),l=a(l,n,i,r,e[5],1200080426,12),r=a(r,l,n,i,e[6],2821735955,17),i=a(i,r,l,n,e[7],4249261313,22),n=a(n,i,r,l,e[8],1770035416,7),l=a(l,n,i,r,e[9],2336552879,12),r=a(r,l,n,i,e[10],4294925233,17),i=a(i,r,l,n,e[11],2304563134,22),n=a(n,i,r,l,e[12],1804603682,7),l=a(l,n,i,r,e[13],4254626195,12),r=a(r,l,n,i,e[14],2792965006,17),i=a(i,r,l,n,e[15],1236535329,22),n=o(n,i,r,l,e[1],4129170786,5),l=o(l,n,i,r,e[6],3225465664,9),r=o(r,l,n,i,e[11],643717713,14),i=o(i,r,l,n,e[0],3921069994,20),n=o(n,i,r,l,e[5],3593408605,5),l=o(l,n,i,r,e[10],38016083,9),r=o(r,l,n,i,e[15],3634488961,14),i=o(i,r,l,n,e[4],3889429448,20),n=o(n,i,r,l,e[9],568446438,5),l=o(l,n,i,r,e[14],3275163606,9),r=o(r,l,n,i,e[3],4107603335,14),i=o(i,r,l,n,e[8],1163531501,20),n=o(n,i,r,l,e[13],2850285829,5),l=o(l,n,i,r,e[2],4243563512,9),r=o(r,l,n,i,e[7],1735328473,14),i=o(i,r,l,n,e[12],2368359562,20),n=s(n,i,r,l,e[5],4294588738,4),l=s(l,n,i,r,e[8],2272392833,11),r=s(r,l,n,i,e[11],1839030562,16),i=s(i,r,l,n,e[14],4259657740,23),n=s(n,i,r,l,e[1],2763975236,4),l=s(l,n,i,r,e[4],1272893353,11),r=s(r,l,n,i,e[7],4139469664,16),i=s(i,r,l,n,e[10],3200236656,23),n=s(n,i,r,l,e[13],681279174,4),l=s(l,n,i,r,e[0],3936430074,11),r=s(r,l,n,i,e[3],3572445317,16),i=s(i,r,l,n,e[6],76029189,23),n=s(n,i,r,l,e[9],3654602809,4),l=s(l,n,i,r,e[12],3873151461,11),r=s(r,l,n,i,e[15],530742520,16),i=s(i,r,l,n,e[2],3299628645,23),n=u(n,i,r,l,e[0],4096336452,6),l=u(l,n,i,r,e[7],1126891415,10),r=u(r,l,n,i,e[14],2878612391,15),i=u(i,r,l,n,e[5],4237533241,21),n=u(n,i,r,l,e[12],1700485571,6),l=u(l,n,i,r,e[3],2399980690,10),r=u(r,l,n,i,e[10],4293915773,15),i=u(i,r,l,n,e[1],2240044497,21),n=u(n,i,r,l,e[8],1873313359,6),l=u(l,n,i,r,e[15],4264355552,10),r=u(r,l,n,i,e[6],2734768916,15),i=u(i,r,l,n,e[13],1309151649,21),n=u(n,i,r,l,e[4],4149444226,6),l=u(l,n,i,r,e[11],3174756917,10),r=u(r,l,n,i,e[2],718787259,15),i=u(i,r,l,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+r|0,this._d=this._d+l|0},i.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=f.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=i},function(e,t,n){"use strict";function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return o(e,t,n)}var a=n(25),o=a.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=a:(i(a,t),
t.Buffer=r),i(o,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a.SlowBuffer(e)}},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(15),f=i(c),d=n(5),p=i(d),h=n(166),m=i(h);n(281);var g=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={transition:"closed",animation:"immediate"},n}return o(t,e),s(t,[{key:"isHidden",value:function(){return"opened"!==this.state.transition}}]),s(t,[{key:"isActive",value:function(){return"opened"===this.state.transition||"opening"===this.state.transition}},{key:"isTransitioning",value:function(){return"opening"===this.state.transition||"closing"===this.state.transition}},{key:"onAnimationEnd",value:function(e){if(e.target===f.default.findDOMNode(this))switch(this.state.transition){case"opening":this.setState({transition:"opened",animation:""});break;case"closing":this.setState({transition:"closed",animation:""})}}},{key:"componentDidMount",value:function(){f.default.findDOMNode(this).addEventListener("animationend",this.onAnimationEnd.bind(this),!1)}},{key:"getActivatedState",value:function(){switch(this.state.transition){case"opening":return"-activating";case"closing":return"-deactivating";case"opened":return"-activated";case"closed":return"-deactivated"}}},{key:"componentDidUpdate",value:function(){this.emit(this.state.transition),this.publish(this.getActivatedState());var e=(l.default.Children.toArray(this.props.children)[0],f.default.findDOMNode(this.refs.shadow).firstChild);if(!e)return void this.debug("no content");if("opened"===this.state.transition){if(this.debug("focusing inner content"),this.props.noFocus)return;e.activeElement?e.activeElement.focus():e.focus()}else"closing"===this.state.transition&&e.blur()}},{key:"shouldComponentUpdate",value:function(e,t){return t.transition!==this.state.transition||t.animation!==this.state.animation}},{key:"open",value:function(e){switch(e=e||this.props.openAnimation,this.state.transition){case"opened":break;case"opening":case"closing":case"closed":"immediate"!==e&&e?this.setState({transition:"opening",animation:e}):this.setState({transition:"opened",animation:""})}}},{key:"focus",value:function(){var e=f.default.findDOMNode(this.refs.shadow).firstChild;e&&e.focus()}},{key:"close",value:function(e){switch(e=e||this.props.closeAnimation,this.state.transition){case"closed":break;case"opening":case"closing":case"opened":"immediate"!==e&&e?this.setState({transition:"closing",animation:e}):this.setState({transition:"closed",animation:""})}}},{key:"render",value:function(){return l.default.createElement("div",{tabIndex:"-1",className:"x-window "+this.state.animation,"aria-hidden":"opened"===this.state.transition?"false":"true","data-transition-state":this.state.transition},l.default.createElement(m.default,{ref:"shadow",transition:this.state.transition,animation:this.state.animation},this.props.children))}}]),t}(p.default);g.defaultProps={openAnimation:"immediate",closeAnimation:"immediate",noFocus:!1},g.propTypes={openAnimation:l.default.PropTypes.string,closeAnimation:l.default.PropTypes.string,noFocus:l.default.PropTypes.bool},t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(15),f=(i(c),function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"isOpening",value:function(e){var t=e||this.props;return"opening"===t.transition||"opened"===t.transition&&"immediate"===t.animation}},{key:"isClosed",value:function(e){return"closed"===(e||this.props).transition}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.isOpening(e)}},{key:"render",value:function(){return l.default.createElement("div",{className:"shadow-window"},this.props.children)}}]),t}(l.default.Component));f.defaultProps={transition:"",animation:""},f.propTypes={transition:l.default.PropTypes.string.isRequired,animation:l.default.PropTypes.string.isRequired},t.default=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t,n){return a(e,t,n)}var r=n(25),a=r.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(Object.keys(r).forEach(function(e){t[e]=r[e]}),t.Buffer=i),Object.keys(a).forEach(function(e){i[e]=a[e]}),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t){"use strict";e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";e.exports=n(27)},function(e,t,n){"use strict";e.exports=n(125)},function(e,t,n){(function(i){"use strict";t=e.exports=n(126),t.Stream=n(39),t.Readable=t,t.Writable=n(74),t.Duplex=n(27),t.Transform=n(73),t.PassThrough=n(125),i.browser||"disable"!==i.env.READABLE_STREAM||(e.exports=n(39))}).call(t,n(42))},function(e,t,n){"use strict";e.exports=n(73)},function(e,t,n){"use strict";e.exports=n(74)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){s.default.request("showDialog",{type:"confirm",ok:"unpin",header:(0,u.toL10n)("confirmation"),content:(0,u.toL10n)("confirm-to-unpin-bookmark"),translated:!0,onOk:function(){BookmarksDatabase.remove(e.url)}})}function a(e){var t=e.displayName.slice(0,255);s.default.request("showDialog",{type:"prompt",ok:"ok",header:(0,u.toL10n)("rename"),content:(0,u.toL10n)("title"),initialValue:t,maxLength:255,additionalContent:e.url,translated:!0,onOk:function(t){e.displayName!==t&&BookmarksDatabase.get(e.url).then(function(e){e.name=t,BookmarksDatabase.put(e)})}})}Object.defineProperty(t,"__esModule",{value:!0}),t.unpinBookmark=r,t.renameBookmark=a;var o=n(2),s=i(o),u=n(9)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(2),p=i(d),h=n(28),m=i(h);n(297);var g=localStorage.getItem("oldNoticesList")||null,v=localStorage.getItem("localHasPoint")||null,y=6048e5,b=["battery","bluetooth","download","voicemail"],w=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="NoticesDialog",n["_observe_lockscreen.mode"]=function(e){var t=e.settingValue;"none"!==n.pocketMode||"pocket"!==t&&"passcode"!==t||((n.lockMode||n.autoLockMode)&&(n.needShowSummary=!1),n.resetNoticesSummary()),n.pocketMode=t},n["_observe_lockscreen.notifications-preview.enabled"]=function(e){n.isShowSummary=e.settingValue,n.resetNoticesSummary()},n["_observe_lockscreen.enabled"]=function(e){n.lockMode=e.settingValue,n.resetNoticesSummary()},n["_observe_pocketmode.autolock.enabled"]=function(e){n.autoLockMode=e.settingValue,n.resetNoticesSummary()},n.panelChange=function(e){n.needShowReminder&&"cards"===n.currentPanel&&"mainView"===e.detail.panel&&(n.needShowReminder=!1,n.updateReminderDialog(0)),n.currentPanel=e.detail.panel,"mainView"===e.detail.panel&&n.nextShowing&&n.isShowSummary&&n.needShowSummary&&n.showNoticesSummary()},n.state={showNotices:{},iconList:[]},n.pocketMode="none",n.hasPoint=!1,n.oldNotices=JSON.parse(g)||{},n.message={notices:JSON.parse(g)||{}},n.currentPanel="mainView",n.needShowSummary=!0,n.needShowReminder=!1,n.getSettingList=[],p.default.register("updateMainNotices",n),p.default.register("updateSoftKeyPoint",n),p.default.register("timeUpdate",n),window.addEventListener("panelChange",n.panelChange),window.addEventListener("visibilitychange",function(){document.hidden&&"none"===n.pocketMode&&!navigator.mozPower.screenEnabled&&"mainView"===n.currentPanel&&n.showNoticesSummary()}),n.addObserver("lockscreen.mode"),n.addObserver("lockscreen.enabled"),n.addObserver("pocketmode.autolock.enabled"),n.addObserver("lockscreen.notifications-preview.enabled"),n}return o(t,e),s(t,[{key:"getSettingsLock",value:function(){return this._lock&&!this._lock.closed?this._lock:this._lock=navigator.mozSettings.createLock()}},{key:"addObserver",value:function(e){var t=this;navigator.mozSettings&&(this.getSettingList.push(!0),this.getSettingsLock().get(e).then(function(n){t.getSettingList.pop(),"lockscreen.mode"===e?t.pocketMode=n[e]:"lockscreen.enabled"===e?t.lockMode=n[e]:"pocketmode.autolock.enabled"===e?t.autoLockMode=n[e]:"lockscreen.notifications-preview.enabled"===e&&(t.isShowSummary=n[e]),t.getSettingList.length||t.message&&t.updateMainNotices(t.message)}),navigator.mozSettings.addObserver(e,this["_observe_"+e]))}},{key:"componentDidMount",value:function(){this.getNoticesNum(this.message.notices)>0&&v&&this.updateSoftKeyPoint(!0)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.iconList.length&&setTimeout(function(){e.element.classList.remove("show-notices"),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e.element.classList.add("show-notices")})})},0)}},{key:"updateMainNotices",value:function(e){if(this.message=e,!this.getSettingList.length){if(!Object.keys(this.message.notices).length)return void this.updateSoftKeyPoint(!1);if(!e.listUnread)return this.oldNotices=e.notices,void this.setLocalStroage("oldNoticesList",this.oldNotices);var t=this.getNoticesNum(this.message.notices),n=this.getNoticesNum(this.oldNotices);if(t<this.lastNum)return this.minusDeleteNotices(),void(this.lastNum=this.getNoticesNum(this.message.notices));(t>n||99===t)&&e.listUnread&&this.updateSoftKeyPoint(!0),this.lastNum=this.getNoticesNum(this.message.notices),this.lockMode||this.autoLockMode?"pocket"!==this.pocketMode&&"passcode"!==this.pocketMode||(this.needShowSummary=!0):this.needShowSummary=!0,this.computeNextShowNotices(),(Object.keys(this.nextShowNotices).length||e.newNotice)&&(this.updateSoftKeyPoint(!0),this.showNoticesSummary())}}},{key:"getNoticesNum",value:function(e){var t=0;return Object.keys(e).forEach(function(n){t+=Number(e[n])}),t}},{key:"minusDeleteNotices",value:function(){for(var e in this.oldNotices)this.oldNotices[e]>this.message.notices[e]?this.oldNotices[e]=this.message.notices[e]:this.message.notices[e]||delete this.oldNotices[e];this.setLocalStroage("oldNoticesList",this.oldNotices)}},{key:"computeNextShowNotices",value:function(){var e=this,t={};for(var n in this.message.notices)if(this.message.notices[n]!==this.oldNotices[n]){var i=this.message.notices[n],r=this.oldNotices[n]||0;i-r>0?t[n]=i-r:99===this.getNoticesNum(this.oldNotices)&&(t[n]=r-i)}this.message.newNotice&&!t[this.message.newNotice]&&(t[this.message.newNotice]=1),this.nextShowNotices={};var a=Object.keys(t),o=AppStore.apps.map(function(e){return e.manifestURL});a.forEach(function(n){if("undefined"!==n){if(b.indexOf(n)!==-1)return void(e.nextShowNotices["style/images/notices_icon/"+n+".png"]=t[n]);if(o.indexOf(n)!==-1){var i=AppStore.apps[o.indexOf(n)].icon_url;i&&(e.nextShowNotices[i]=t[n])}}})}},{key:"showNoticesSummary",value:function(){if(this.isShowSummary&&this.needShowSummary){if("mainView"!==this.currentPanel)return void(this.nextShowing=!0);this.nextShowing=!1,this.computeNextShowNotices(),this.setState({showNotices:this.nextShowNotices,iconList:this.iconSort(this.nextShowNotices)})}}},{key:"resetNoticesSummary",value:function(){this.oldNotices=Object.assign({},this.message.notices),this.setLocalStroage("oldNoticesList",this.oldNotices),this.nextShowNotices={},this.needShowSummary=!1,this.lastNum=0,this.setState({showNotices:{},iconList:[]})}},{key:"iconSort",value:function(e){var t=this,n=this.state,i=n.showNotices,r=n.iconList;if(r=r.filter(function(t){return e[t]}),Object.keys(e).forEach(function(t){i[t]?i[t]<e[t]&&(r.splice(r.findIndex(function(e){return e===t}),1),r.unshift(t)):r.unshift(t)}),this.message.newNotice){var a=0;if(b.includes(this.message.newNotice))a=r.findIndex(function(e){return e.includes(t.message.newNotice)});else{var o=AppStore.apps.map(function(e){return e.manifestURL}),s=AppStore.apps[o.indexOf(this.message.newNotice)].icon_url;s&&(a=r.findIndex(function(e){return e===s}))}if(a&&a!==-1){var u=r.splice(a,1);r.unshift(u[0])}}return r}},{key:"timeUpdate",value:function(){var e=Date.now(),t=Number(localStorage.getItem("noticesReminderTime"));if(t){var n=e-t;n>=y&&this.updateReminderDialog(y-n)}}},{key:"updateSoftKeyPoint",value:function(e){if(!this.hasPoint||!e){var t=document.querySelector("#software-keys-left");e?(this.hasPoint=!0,t.classList.add("softkey-point"),this.setLocalStroage("localHasPoint",!0),this.computeReminderTime()):(clearTimeout(this.reminderTimer),this.setLocalStroage("noticesReminderTime"),this.setLocalStroage("reminderAlreadyShow"),this.setLocalStroage("localHasPoint"),this.hasPoint=!1,this.resetNoticesSummary(),t.classList.remove("softkey-point"))}}},{key:"updateReminderDialog",value:function(e){var t=this;clearTimeout(this.reminderTimer),this.reminderTimer=setTimeout(function(){if("cards"===t.currentPanel)return void(t.needShowReminder=!0);var e=function(){localStorage.getItem("reminderAlreadyShow")||(t.setLocalStroage("reminderAlreadyShow",1),t.setLocalStroage("noticesReminderTime",Date.now()),t.updateReminderDialog(y))};p.default.request("showDialog",{ok:"open",cancel:"cancel",type:"custom",header:"notices-reminder-header",content:"notices-reminder-content",buttons:[{message:"cancel"},{message:"open"},{message:""}],onBack:e,onOk:function(n){1===n.selectedButton?(m.default.launch("iac","launcher-panel",{target:"notice"}),t.updateSoftKeyPoint(!1)):0===n.selectedButton&&e()}})},e)}},{key:"computeReminderTime",value:function(){var e=Number(localStorage.getItem("noticesReminderTime"))||0,t=Date.now();t<e||(e?t=y-(t-e):(this.setLocalStroage("noticesReminderTime",t),t=y),this.updateReminderDialog(t))}},{key:"setLocalStroage",value:function(e,t){try{localStorage.setItem(e,t?JSON.stringify(t):"")}catch(n){}}},{key:"render",value:function(){var e=this,t=this.state.iconList.length;return l.default.createElement("div",{id:"main-notices",className:""+(t?"":"unvisible"),ref:function(t){e.element=t},"data-num":t},this.state.iconList.map(function(t,n){return l.default.createElement("div",{className:["notices-item",0!==n?"notices-item-margin":""].join(" ")},l.default.createElement("span",{className:"notices-num"},e.state.showNotices[t]),l.default.createElement("img",{src:t,alt:""}))}))}}]),t}(f.default);w.defaultProps={showNotices:{},iconList:[]},w.propTypes={showNotices:l.default.PropTypes.object,iconList:l.default.PropTypes.array},t.default=w},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Customization:"customization"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){switch(e.type){default:case l.default.Folder:case l.default.MozApp:var n=e.manifest.icons;if("stk"===e.manifest.name){var i=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid");"62GMX"!==i&&"62HMX"!==i||(n={56:"/resources/SIM-Claro_56.png",112:"/resources/SIM-Claro_112.png"},dump("zouchl skuid="+i+",iconList="+JSON.stringify(n)))}if(n){var r=e.mozApp&&e.mozApp.origin;a(n,{origin:r,preferredSize:56}).then(function(t){e.icon_url=t}).catch(function(t){e.icon_url_hq&&e.icon_url_hq!==c.app[112]?e.icon_url=e.icon_url_hq:e.icon_url=c.app[56]}).then(function(){return t&&t()}),a(n,{origin:r,preferredSize:112}).then(function(t){e.icon_url_hq=t}).catch(function(t){e.icon_url&&e.icon_url!==c.app[56]?e.icon_url_hq=e.icon_url:e.icon_url_hq=c.app[112]}).then(function(){return t&&t()})}else e.icon_url=c.app[56],e.icon_url_hq=c.app[112],t&&t();break;case l.default.Bookmark:e.icon_url=c.web_shortcut[56],e.icon_url_hq=c.web_shortcut[112],e.favicon_url=c.favicon[48],t&&t(),s(e.favicon).then(function(n){e.favicon_url=n,t&&t()}).catch(function(e){})}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{preferredSize:56};return e?new Promise(function(n,i){var r=t.origin,a=t.preferredSize,u=o(e,a),l=e[u],c=function(){return/^https?:\/\//i.test(l)};s(function(){return/^data:/i.test(l)}()||c()?l:""+r+l).then(function(e){return n(e)}).catch(function(e){return i(e)})}):Promise.reject(null)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:56,n=Object.keys(e).sort(function(e,t){return e-t});return n.filter(function(e){return e>=t}).shift()||n.filter(function(e){return e<t}).pop()}function s(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){i=null,t(e)},i.onerror=function(){i=null,n("The image is not accessible.")},i.src=e})}Object.defineProperty(t,"__esModule",{value:!0}),t.mountItemIcon=r,t.getIconUrl=a,t.findTheFittestIconSize=o,t.testImageAvailability=s;var u=n(31),l=i(u),c={app:{56:"./style/images/default_app_56.png",112:"./style/images/default_app_112.png"},web_shortcut:{56:"./style/images/web_shortcut_56.png",112:"./style/images/web_shortcut_112.png"},favicon:{48:"./style/images/default_favicon_48.png"}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(12),p=i(d),h=n(2);i(h);n(290);var m=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.TAG="CellID.js",n.simCardsName={},n.softkeybarHeight=30,n.state={isAirplaneMode:!1,cardInfos:[]},n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this._initCardInfos(),p.default.addObserver("airplaneMode.enabled",this),p.default.addObserver("custom.simcards.name",this)}},{key:"componentWillUnmount",value:function(){var e=this;p.default.removeObserver("airplaneMode.enabled",this),p.default.removeObserver("custom.simcards.name",this);var t=navigator.mozMobileConnections;t&&Array.from(t).forEach(function(t,n){window.SIMSlotManager.isSIMCardAbsent(n)||(t.removeEventListener("datachange",e),t.removeEventListener("voicechange",e))})}},{key:"_observe_custom.simcards.name",value:function(e){this.simCardsName=e||{},this._updateCardInfos()}},{key:"_observe_airplaneMode.enabled",value:function(e){this.setState({isAirplaneMode:e})}},{key:"_handle_datachange",value:function(){this._updateCardInfos()}},{key:"_handle_voicechange",value:function(){this._updateCardInfos()}},{key:"_handle_simslotready",value:function(){window.removeEventListener("simslotready",this),this._initCardInfos()}},{key:"_initCardInfos",value:function(){var e=this,t=navigator.mozMobileConnections;t&&(dump(this.TAG+", _initCardInfos, simready:"+window.SIMSlotManager.ready),window.SIMSlotManager.ready?(Array.from(t).forEach(function(t,n){window.SIMSlotManager.isSIMCardAbsent(n)||(t.addEventListener("datachange",e),t.addEventListener("voicechange",e))}),this._updateCardInfos()):window.addEventListener("simslotready",this))}},{key:"_updateCardInfos",value:function(){var e=this,t=navigator.mozMobileConnections;if(t&&!(t.length<1)){dump(this.TAG+", _updateCardInfos, conns.length:"+t.length);var n=[],i=window.SIMSlotManager.getSlots();Array.from(t).forEach(function(t,r){var a=!t.iccId;if(dump(e.TAG+", isAbsent:"+a+" for index:"+r),a||"ready"!==i[r].getCardState())dump(e.TAG+" car is absent, or cardstate is not ready");else{var o=MobileOperator.userFacingInfo(t);o.carrier?(dump("operatorInfos.operator:"+o.operator+", carrier:"+o.carrier+", region:"+o.region),n.push({operator:o.operator,carrier:o.carrier,region:o.region})):dump("carrier is null")}}),dump(this.TAG+" infos.length:"+n.length),this.setState({cardInfos:n}),this._adjust_cellidStyle()}}},{key:"_adjust_cellidStyle",value:function(){var e=this.state.cardInfos.length;if(e>0){var t=document.getElementById("cell-info-display"),n=document.getElementById("info-item");e>1?(t.style.marginLeft="24px",n.style.justifyContent="flex-start",n.style.textAlign="left"):(t.style.marginLeft="0px",n.style.justifyContent="center",n.style.textAlign="center"),t.style.top=this._get_cellidTopPosition(e)}}},{key:"_get_cellidTopPosition",value:function(e){var t=document.documentElement.clientHeight,n=window.getComputedStyle(document.body),i=n.getPropertyValue("font-size"),r=n.getPropertyValue("--softkeybar-height");this.softkeybarHeight=parseFloat(r)*parseFloat(i);var a=t-this.softkeybarHeight,o="9rem";return e>1&&(o="11.5rem"),a-=parseFloat(o)*parseFloat(i),dump(this.TAG+", position top:"+a),a+"px"}},{key:"render",value:function(){var e=this,t=this.state.cardInfos.length;dump(this.TAG+" render(), cardInfo size:"+t+" airplane:"+this.state.isAirplaneMode);var n=!this.state.isAirplaneMode&&t>0,i=this.state.cardInfos.map(function(e,n){var i=e.carrier+" "+e.region,r=l.default.createElement("div",null,l.default.createElement("i",{"data-icon":t>1?"sim-"+(n+1):""}),l.default.createElement("span",{className:"operator-name"},i));return l.default.createElement("div",{className:"sim-card",id:"info-item"},r)});return l.default.createElement("div",{id:"cell-info-display",dir:"ltr",className:""+(n?"":"unvisible"),ref:function(t){e.element=t}},i)}}]),t}(f.default);t.default=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"stk",manifestURL:"app://stk.gaiamobile.org/manifest.webapp"},{name:"WahtsApp",origin:"app://kaios.whatsapp.net"},{name:"Facebook",origin:"app://m.facebook.com"},{name:"Assistant",manifestURL:"https://api.kaiostech.com/apps/manifest/OSlAbgrhLArfT7grf4_N"},{name:"Maps",manifestURL:"https://www.google.com/maps/preview/pwa/kaios/manifest.webapp"},{name:"YouTube",manifestURL:"https://api.kaiostech.com/apps/manifest/6x6P4Ap7oCIzOW10hBpm"}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"Games",basisname:"games",showname:"games",enabled:!0,origin:"homescreen.games.folder",manifest:{icons:{56:"../../style/images/folder_games_56.png",112:"../../style/images/folder_games_112.png"}},items:[{name:"Siberian Strike",manifestURL:"app://siberianstrike.gaiamobile.org/manifest.webapp"},{name:"Nitro Street Run 2",manifestURL:"app://nitrostreetrun.gaiamobile.org/manifest.webapp"}],theme:{color:"#842dff"},source:"localfolder"}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"WahtsApp",origin:"app://kaios.whatsapp.net"},{name:"Facebook",origin:"app://m.facebook.com"},{name:"Assistant",manifestURL:"https://api.kaiostech.com/apps/manifest/OSlAbgrhLArfT7grf4_N"},{name:"Maps",manifestURL:"https://www.google.com/maps/preview/pwa/kaios/manifest.webapp"},{name:"YouTube",manifestURL:"https://api.kaiostech.com/apps/manifest/6x6P4Ap7oCIzOW10hBpm"}];t.chinaSideApps=[{name:"Calculator",origin:"app://calculator.gaiamobile.org"},{name:"Messages",origin:"app://sms.gaiamobile.org"},{name:"Settings",origin:"app://settings.gaiamobile.org"},{name:"Calendar",origin:"app://calendar.gaiamobile.org"},{name:"E-Mail",origin:"app://email.gaiamobile.org"}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{theme:{color:"#842dff"},source:"localfolder"}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultLowMemoryAppsOrder=[{name:"KaiOS-Store",origin:"app://kaios-plus.kaiostech.com"},{name:"Contact",manifestURL:"app://contact.gaiamobile.org/manifest.webapp"},{name:"Call Log",manifestURL:"app://communications.gaiamobile.org/manifest.webapp"},{name:"Browser",manifestURL:"app://search.gaiamobile.org/manifest.webapp"},{name:"KaiNews",origin:"app://kaios.news.net"},{name:"KaiWeather",origin:"app://kaios.kaiweather.net"},{name:"Messages",manifestURL:"app://sms.gaiamobile.org/manifest.webapp"},{name:"Camera",manifestURL:"app://camera.gaiamobile.org/manifest.webapp"},{name:"Gallery",manifestURL:"app://gallery.gaiamobile.org/manifest.webapp"},{name:"Clock",manifestURL:"app://clock.gaiamobile.org/manifest.webapp"},{name:"MyMoBill",manifestURL:"app://mymobill.gaiamobile.org/manifest.webapp"},{name:"GoogleSearch",origin:"app://search.google.com"},{name:"Calendar",manifestURL:"app://calendar.gaiamobile.org/manifest.webapp"},{name:"Astrolo",origin:"app://astrolo.ousaa.com"},{name:"Music",manifestURL:"app://music.gaiamobile.org/manifest.webapp"},{name:"Settings",manifestURL:"app://settings.gaiamobile.org/manifest.webapp"},{name:"KaiPay",origin:"app://kaios-pay.kaiostech.com"},{name:"Calculator",manifestURL:"app://calculator.gaiamobile.org/manifest.webapp"},{name:"Gems",origin:"app://kaios.gems.net"},{name:"Guardians",origin:"app://kaios.guardians.net"},{name:"Video",manifestURL:"app://video.gaiamobile.org/manifest.webapp"},{name:"ToDo",origin:"app://kaios.todo.net"},{name:"FM Radio",manifestURL:"app://fm.gaiamobile.org/manifest.webapp"},{name:"File Manager",manifestURL:"app://filemanager.gaiamobile.org/manifest.webapp"},{name:"Memory Cleaner",manifestURL:"homescreen.memory.cleaner"},{name:"stk",manifestURL:"app://stk.gaiamobile.org/manifest.webapp"}],t.defaultLowMemoryFolderApp=[]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"memory-cleaner",basisname:"memory-cleaner",enabled:!0,url:"homescreen.memory.cleaner",manifest:{icons:{56:"../../style/images/memory_cleaner_56.png",112:"../../style/images/memory_cleaner_112.png"}}}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ShowFolder:"show-folder"}},function(e,t){"use strict";function n(e,t){if(!e)throw new Error("The `"+t+"` field is required.")}Object.defineProperty(t,"__esModule",{value:!0});t.validateCustomizationRule=function(e){n(e.type,"rule.type"),n(e.params,"rule.params")},t.validateShowFolderRule=function(e){n(e.params.folder,"rule.params.folder"),n(e.params.folder.name,"rule.params.folder.name"),n(e.params.folder.enabled,"rule.params.folder.enabled"),n(e.params.folder.manifest,"rule.params.folder.manifest"),n(e.params.folder.items,"rule.params.folder.items")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(35),p=i(d),h=n(2),m=i(h),g=n(254),v=i(g),y=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="folders",n.onKeyDown=function(e){switch(e.key){case"EndCall":case"BrowserBack":case"Backspace":m.default.request("closeSheet","folder")}},n.state={folders:[],currentShowFolder:""},n.folders=[],n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){m.default.register("addFolder",this),m.default.register("openFolder",this)}},{key:"componentWillUnmount",value:function(){m.default.unregister("addFolder",this),m.default.unregister("openFolder",this)}},{key:"addFolder",value:function(e){var t=!1;this.folders.forEach(function(n){n&&n.name===e.name&&(t=!0,n.url=e.url)}),t||this.folders.push(e),this.setState({folders:this.folders})}},{key:"openFolder",value:function(e){this.setState({currentShowFolder:e})}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{tabIndex:"-1",onKeyDown:this.onKeyDown},this.state.folders.map(function(t){
return l.default.createElement(v.default,{key:t.name,name:t.name,manifestURL:t.url,isShow:t.url===e.state.currentShowFolder})}))}}]),t}(f.default);t.default=(0,p.default)(y,"immediate","immediate")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=i(l),f=n(5),d=i(f),p=n(52),h=i(p),m=n(2),g=i(m),v=n(10),y=i(v),b=n(128),w=i(b),S=n(77),_=i(S),k=n(84),L=n(75),E=n(32),O=(0,_.default)(w.default),I=function(e){return e.enabled&&"invisible"!==e.role},A=function(e){function t(){var e,n,i,r;a(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.name="Folder",i.defaultState={manifestURL:null,folder:null,itemsToRender:[],focusIndex:0,reorderMode:!1},i.optionMenu=[{id:"move",callback:function(){i.oldItemsRender=Object.assign([],i.state.itemsToRender),i.setState({reorderMode:!0})}},{id:"uninstall",callback:function(){var e=i.getMozApp();i.element.focus(),i.setItemFocus(),(0,L.uninstallMozApp)(e.mozApp,e.displayName)}}],i.state=i.defaultState,i.unloadHandler=function(){window.removeEventListener("unload",i.unloadHandler),y.default.unregister(i.element)},i.updateAllList=function(){i.updateFolder({manifestURL:i.props.manifestURL})},i.updateFolder=function(e){var t=e.manifestURL,n=(0,E.findFolderByManifestURL)(AppStore.apps,t);if(n){var r=n.items.map(function(e){return(0,E.findItemByManifestURL)(AppStore.apps,e.manifestURL)||e.origin&&(0,E.findItemByOrigin)(AppStore.apps,e.origin)}).filter(Boolean).map(function(e,t){return e.inlineStyle={},e.position=t,e?I(e)&&e:e}).filter(Boolean),a=r.length-1,o=i.state.focusIndex>a?a:i.state.focusIndex;i.setState({manifestURL:t,folder:n,itemsToRender:r,focusIndex:o})}},i.exit=function(){i.exitFolderMode=!0,g.default.request("clearFolderStatusUrl"+i.props.manifestURL.slice(4)),i.setState({focusIndex:0})},i.updateSoftKeys=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{center:"select",right:"options"};i.state.reorderMode&&(e={left:"cancel",center:"set"}),y.default.register(e,i.element)},i.onKeyDown=function(e){switch(e.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":e.preventDefault(),i.setState(function(e){return{itemsToRender:e.reorderMode?i.switchItem(!1):e.itemsToRender,focusIndex:0===e.focusIndex?e.itemsToRender.length-1:e.focusIndex-1}});break;case"ArrowDown":e.preventDefault(),i.setState(function(e){return{itemsToRender:e.reorderMode?i.switchItem(!0):e.itemsToRender,focusIndex:e.focusIndex===e.itemsToRender.length-1?0:e.focusIndex+1}});break;case"Enter":i.state.reorderMode?i.arrangeItemOrder():e.target.click();break;case"EndCall":case"BrowserBack":case"Backspace":i.state.reorderMode?(e.stopPropagation(),e.preventDefault(),i.exitReorderMode(i.oldItemsRender)):i.exit();break;case"SoftLeft":i.state.reorderMode&&i.exitReorderMode(i.oldItemsRender);break;case"SoftRight":if(i.state.reorderMode)return;var t=i.optionMenu.filter(function(e){return!(!i.getMozApp().removable&&"uninstall"===e.id)});g.default.request("showOptionMenu",{options:t});break;case"Call":}},r=n,o(i,r)}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){this.props.manifestURL!==e.manifestURL&&this.updateFolder({manifestURL:e.manifestURL})}},{key:"componentWillMount",value:function(){this.updateFolder({manifestURL:this.props.manifestURL}),AppStore.on("updateFolderList",this.updateFolderList.bind(this)),AppStore.on("change",(0,h.default)(this.updateAllList,1e3))}},{key:"componentDidMount",value:function(){window.addEventListener("unload",this.unloadHandler)}},{key:"componentDidUpdate",value:function(){this.updateSoftKeys(),this.setItemFocus()}},{key:"setItemFocus",value:function(){this.element.focus();var e=this.element.querySelectorAll(".app"),t=e[this.state.focusIndex];if(t){t.focus();var n=this.listContainer.getBoundingClientRect(),i=t.getBoundingClientRect();i.top<=n.top?t.scrollIntoView(!0):i.bottom>=n.bottom&&t.scrollIntoView(!1)}}},{key:"updateFolderList",value:function(e){e===this.props.name&&this.updateFolder({manifestURL:this.props.manifestURL})}},{key:"getMozApp",value:function(){var e=this.state.focusIndex;return this.state.itemsToRender[e]}},{key:"switchItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.focusIndex,n=this.state.itemsToRender,i=e?t+1:t-1;return e&&t===n.length-1?n.unshift(n.pop()):e||0!==t?n.splice.apply(n,[t,1].concat(r(n.splice(i,1,n[t])))):n.push(n.shift()),n}},{key:"arrangeItemOrder",value:function(){var e=this.state.folder.items,t=this.state.itemsToRender,n=function(e){return t.findIndex(function(t){return e===t.manifestURL||e===t.origin})};e.sort(function(e,t){var i=e.manifestURL||e.origin,r=t.manifestURL||t.origin;return n(i)-n(r)}),g.default.request("updateFolderOrder",{name:this.props.name,items:e}),this.exitReorderMode()}},{key:"exitReorderMode",value:function(e){this.setState({itemsToRender:e||this.state.itemsToRender,reorderMode:!1})}},{key:"render",value:function(){var e=this,t=this.exitFolderMode,n=["appList","folder",this.props.isShow?"":"hidden",this.state.reorderMode?"is-reordering":""].filter(Boolean).join(" ");return this.exitFolderMode=!1,c.default.createElement("div",{className:n,"data-view-mode":"list",tabIndex:"-1",onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:function(t){e.element=t}},c.default.createElement("header",null,c.default.createElement("h1",null,this.state.folder&&(0,k.unescapeNumericHTMLEntities)(this.state.folder.displayName))),c.default.createElement("div",{className:"appList__container",ref:function(t){e.listContainer=t}},c.default.createElement("div",{className:"app-wall"},this.state.itemsToRender.map(function(n){return c.default.createElement(O,{key:n.manifestURL,item:n,manifestURL:n.manifestURL,position:[e.state.focusIndex],viewMode:"folder",needClearFlicker:t})}))))}}]),t}(d.default);t.default=A},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(35),p=i(d),h=n(10),m=i(h),g=n(72),v=i(g),y=n(2),b=i(y),w=n(138),S=i(w);n(287);var _=["Contract WAP","PAYG WAP"],k=[{mccmnc:"23402",carrier:"Contract WAP",apn:{data:"mobile.o2.co.uk",mms:"wap.o2.co.uk"}},{mccmnc:"23402",carrier:"PAYG WAP",apn:{data:"mobile.o2.co.uk",mms:"payandgo.o2.co.uk"}},{mccmnc:"23410",carrier:"Contract WAP",apn:{data:"mobile.o2.co.uk",mms:"mobile.o2.co.uk"}},{mccmnc:"23410",carrier:"PAYG WAP",apn:{data:"payandgo.o2.co.uk",mms:"payandgo.o2.co.uk"}},{mccmnc:"23411",carrier:"Contract WAP",apn:{data:"mobile.o2.co.uk",mms:"wap.o2.co.uk"}},{mccmnc:"23411",carrier:"PAYG WAP",apn:{data:"mobile.o2.co.uk",mms:"payandgo.o2.co.uk"}},{mccmnc:"23415",carrier:"Contract WAP",apn:{data:"wap.vodafone.co.uk",mms:"wap.vodafone.co.uk"}},{mccmnc:"23415",carrier:"PAYG WAP",apn:{data:"pp.vodafone.co.uk",mms:"pp.vodafone.co.uk"}},{mccmnc:"23415",carrier:"Contract WAP",apn:{data:"talkmobile.co.uk",mms:"talkmobile.co.uk"}},{mccmnc:"23415",carrier:"PAYG WAP",apn:{data:"payg.talkmobile.co.uk",mms:"payg.talkmobile.co.uk"}},{mccmnc:"42003",carrier:"Contract WAP",apn:{data:"web1",mms:"mms1"}},{mccmnc:"42003",carrier:"PAYG WAP",apn:{data:"web2",mms:"mms2"}},{mccmnc:"52505",carrier:"Contract WAP",apn:{data:"shwap",mms:"shmms"}},{mccmnc:"52505",carrier:"PAYG WAP",apn:{data:"shppd",mms:"shppd"}}],L=[{l10nId:"apnConfigPostpay",value:_[0]},{l10nId:"apnConfigPrepay",value:_[1]}];Array.prototype.unique=function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t].apn===e[n].apn&&e[t].type.toString()==e[n].type.toString()&&e.splice(n--,1);return e};var E=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="APNSelection",n.FOCUS_SELECTOR=".list-item",n.state={whichCard:0},n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.navigator=new v.default(this.FOCUS_SELECTOR,this.element),this.updateSoftkeys(),b.default.register("setOperatorInfo",this)}},{key:"updateSoftkeys",value:function(){m.default.register({center:"select"},this.element)}},{key:"onKeyDown",value:function(e){switch(e.key){case"Enter":var t=document.activeElement.dataset.value;dump("apn_selection value = "+t+", id = "+this.id);for(var n=[],i=!1,r=0;r<k.length;r++){var a=k[r];if(this.mccmnc===a.mccmnc&&t==a.carrier)for(var o=0;o<this.selectionApnList.length;o++)a.apn.data!=this.selectionApnList[o].apn&&a.apn.mms!=this.selectionApnList[o].apn||(n.push(this.selectionApnList[o]),i=!0);if(1==i)break}this.operatorVariantHandlers.applySettings(this.selectionApnList,n);var s=navigator.mozSettings.createLock(),u={};u["apn_default_set_"+this.id+"_"+this.operator.iccid]="true",s.set(u),this.hide(),0==this.id&&S.default.start();break;case"Backspace":e.preventDefault(),b.default.request("back")}}},{key:"hide",value:function(){b.default.request("closeSheet","apnselection"),this._lock&&this._lock.unlock&&(dump("apn_selection unlock the _lock"),this._lock.unlock(),this._lock=null)}},{key:"setOperatorInfo",value:function(e,t,n,i,r){dump("apn_selection.js setOperatorInfo id = "+e+" operator = "+t.mccmnc),this._lock=navigator.requestWakeLock("screen"),this.id=e,this.setState({whichCard:e}),this.operator=t,this.mccmnc=t.mccmnc,this.operatorVariantHandlers=r,this.selectionApnList=n.concat(i).unique(),dump("apn_selection.js setOperatorInfo defaultlen = "+n.length+" mmslen = "+i.length+" selectionApnList len = "+this.selectionApnList.length)}},{key:"render",value:function(){var e=this,t=[];return L.forEach(function(e){var n=e.value===_[0];t.push(l.default.createElement("li",{tabIndex:"-1",className:"list-item","data-value":e.value},l.default.createElement("p",{"data-l10n-id":e.l10nId}),l.default.createElement("div",{className:"apnselection-key"},l.default.createElement("i",{className:"icon control","data-icon":n?"radio-on":"radio-off","aria-hidden":"true"}),l.default.createElement("input",{type:"radio",checked:n,className:"hidden"}))))}),l.default.createElement("section",{role:"region",tabIndex:"-1",onKeyDown:function(t){e.onKeyDown(t)},ref:function(t){e.element=t}},l.default.createElement("header",{class:"apnheader"},l.default.createElement("h1",{"data-l10n-id":0==this.state.whichCard?"apn-sim1":"apn-sim2"})),l.default.createElement("ul",{id:"apnconfig-list"},t),l.default.createElement("p",{"data-l10n-id":"apn-defaultconfig-message"},"Set which type of apn to show"))}}]),t}(f.default);t.default=(0,p.default)(E,"immediate","immediate")},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(3),f=r(c),d=n(5),p=r(d),h=n(35),m=r(h),g=n(2),v=r(g),y=n(10),b=r(y),w=n(52),S=r(w),_=n(82),k=r(_),L=n(128),E=r(L),O=n(129),I=r(O),A=n(31),C=r(A),T=n(130),M=r(T),R=n(9),P=i(R),N=n(28),x=r(N),U=n(77),j=r(U),D=n(136),F=n(239),B=n(75),z=n(76);n(288);var q=(0,j.default)(E.default),V=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="AppList",n.navItemThrottleTime=60,n.ready=!1,n.menuOptions=[{id:"rename",callback:function(){n.element.focus(),n.focusIfPossible(),(0,F.renameBookmark)(n.state.apps[n.focusIndex])}},{id:"move",tags:["grid","list"],callback:n.enterReorderMode.bind(n)},{id:"uninstall",callback:function(){var e=n.state.apps[n.focusIndex];n.element.focus(),n.focusIfPossible(),(0,B.uninstallMozApp)(e.mozApp,e.displayName)}},{id:"unpin",callback:function(){n.element.focus(),n.focusIfPossible(),(0,F.unpinBookmark)(n.state.apps[n.focusIndex])}},{id:"grid-view",tags:["list","single"],callback:n.switchViewMode.bind(n,"grid")},{id:"list-view",tags:["grid","single"],callback:n.switchViewMode.bind(n,"list")},{id:"single-view",tags:["grid","list"],callback:n.switchViewMode.bind(n,"single")}],n.unloadHandler=function(){window.removeEventListener("unload",n.unloadHandler),b.default.unregister(n.element),k.default.unregister(n.element)},n.initFocus=[0,0],n.state={col:n.props.col,apps:[],viewMode:n.props.viewMode,focus:n.initFocus},n.gridsPerPage=n.props.col*n.props.row,n.onKeyDown=n.onKeyDown.bind(n),n.onFocus=n.onFocus.bind(n),n.currentPage=0,n.fixPositionMode=!1,window.addEventListener("visibilitychange",function(){var e=document.activeElement,t=document.querySelector(".appList__container"),i=t.getBoundingClientRect().top,r=t.getBoundingClientRect().bottom;(e.offsetTop-t.scrollTop>r||e.offsetTop-t.scrollTop<i)&&!document.hidden&&n.scrollIntoViewIfPossible(!0),document.hidden&&n.appElements&&[].concat(a(n.appElements)).includes(e)&&(n.isStickyApp=!0,e&&e.classList.add("is-focus-app"))}),P.asyncLocalStorage.getItem("app-view-mode").then(function(e){n.switchViewMode(e||n.state.viewMode)}),(0,z.restoreUserSavedAppsOrder)(n.checkFixPositionMode.bind(n)),n}return u(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;AppStore.on("change",(0,S.default)(this.updateApps.bind(this),1e3)),v.default.register("show",this),v.default.register("hide",this),v.default.register("updateDefaultAppOrder",this),v.default.registerState("ready",this),k.default.register(this.element),this.element.addEventListener("animationstart",function(t){t.target===e.element&&(e.isAnimationEnd=!1)}),this.element.addEventListener("animationend",function(t){t.target===e.element&&(e.isAnimationEnd=!0)}),window.addEventListener("unload",this.unloadHandler)}},{key:"componentDidUpdate",value:function(){this.focusIfPossible(),this.updateSoftKeys(),this.scrollIntoViewIfPossible(),this.updateMarquee(),this.ready||(this.ready=this.state.apps.length>0)}},{key:"updateMarquee",value:function(){var e=this.element.getElementsByClassName("app")[this.focusIndex];if("list"===this.state.viewMode&&!this.state.reorderMode&&e){var t={item:this.state.apps[this.focusIndex],viewMode:this.state.viewMode};I.default.showMarquee(t,e.querySelector(".app__name"))}}},{key:"updateDefaultAppOrder",value:function(){this.fixPositionMode=!1,this.updateApps()}},{key:"scrollIntoViewIfPossible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this.state.viewMode){case"grid":this.goPage(this.getPage(this.state.reorderMode?this.reorder.focus[0]:this.state.focus[0]),e);break;case"list":this.scrollIntoViewForListView();break;case"single":document.activeElement.scrollIntoView(!1)}}},{key:"scrollIntoViewForListView",value:function(){var e=this._container,t=e.getBoundingClientRect(),n=t.top,i=t.height,r=document.activeElement,a=r.getBoundingClientRect(),o=a.top,s=a.height,u=e.scrollTop,l=null;o<n?l=u-(n-o):o-n>i-s&&(l=u+(o-n-(i-s))),null!==l&&e.scrollTo(0,l)}},{key:"getPageCount",value:function(){return Math.ceil(this.state.apps.length/this.gridsPerPage)}},{key:"getPage",value:function(e){return Math.floor(e/this.props.row)}},{key:"goPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentPage,t=arguments[1];!this.appElements||this.getPageCount()<=1||((this.currentPage!==e||t)&&(this.currentPage=e),void 0===this.pageOffsetY&&(this.pageOffsetY=this.appElements[this.gridsPerPage].offsetTop-this.appElements[0].offsetTop),this._container.scrollTop=this.pageOffsetY*e)}},{key:"checkFixPositionMode",value:function(){var e=!localStorage.getItem("tutorial-has-viewed"),t=!!localStorage.getItem("fix-position");(t||e)&&(this.fixPositionMode=!0,!t&&P.setLocalStorage("fix-position","v0.1"))}},{key:"updateApps",value:function(){var e=this,t=this.element.contains(document.activeElement),n=AppStore.apps.filter(function(e){return!(0,M.default)(e)}).map(z.calcAppsOrder).map(z.applyAppsOrder).sort(function(e,t){return e.order-t.order});this.fixPositionMode&&(n=(0,z.updateFixAppsOrder)(n));var i=n.map(function(t,n){return t.inlineStyle={order:e.calculateCssOrder(n)},t.position=n,t});this.setState(function(){return{apps:i}},function(){t&&(e.focus(),e.focusIfPossible())})}},{key:"updateSoftKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{center:"select",right:"options"};this.state.reorderMode&&(e={center:"set",right:"",left:"cancel"}),b.default.register(e,this.element)}},{key:"onFocus",value:function(){if(this.isStickyApp){this.isStickyApp=!1;var e=document.querySelector(".is-focus-app");e&&e.classList.remove("is-focus-app")}return this.element===document.activeElement?(this.focusIfPossible(),this.scrollIntoViewIfPossible(),this.updateSoftKeys(),void this.updateMarquee()):(this.element.contains(document.activeElement)||this.element.focus(),void this.updateSoftKeys())}},{key:"focusIfPossible",value:function(){if(this.element.contains(document.activeElement)){var e=this.getFocusGridElement();e?e.focus():this.setState({focus:this.initFocus})}}},{key:"getFocusGridElement",value:function(){var e=P.rowColToIndex(this.state.focus,this.state.col),t=this.state.apps.length-1;return e>t&&(e=t,this.state.focus=P.indexToRowCol(e,this.state.col)),this.focusIndex=e,this.appElements||(this.appElements=this.element.getElementsByClassName("app")),this.appElements[e]}},{key:"enterReorderMode",value:function(){this.setState({reorderMode:!0}),this.reorder={target:this.element.querySelectorAll(".app-tile")[this.focusIndex],focus:this.state.focus,app:this.state.apps[this.focusIndex],indexFrom:this.focusIndex,indexTo:this.focusIndex}}},{key:"exitReorderMode",value:function(e){var t=this;this.setState(function(n){if(n.reorderMode=!1,e)n.focus=[].concat(a(t.reorder.focus)),n.apps=n.apps.sort(function(e,t){return e.inlineStyle.order-t.inlineStyle.order}).map(function(e,n){return e.inlineStyle={order:t.calculateCssOrder(n)},e});else{var i=t.focusIndex;n.apps[i].inlineStyle.order=t.calculateCssOrder(i)}return n},function(){t.reorder={}})}},{key:"saveCurrentAppsOrder",value:function(){var e=[].concat(a(this.state.apps)).sort(function(e,t){return e.inlineStyle.order-t.inlineStyle.order}).map(function(e){return{manifestURL:e.manifestURL,origin:e.origin||null,name:e.manifest.name}});this.fixPositionMode=!1,P.setLocalStorage("fix-position",""),(0,z.saveAppsOrder)(e)}},{key:"handleMoveGrid",value:function(e){var t=this,n=P.rowColToIndex(e,this.state.col),i=this.focusIndex>n?-1:1;this.reorder.focus=e,this.reorder.indexTo=n,this.setState(function(e){return e.apps[t.focusIndex].inlineStyle.order=t.calculateCssOrder(n,i),e})}},{key:"switchViewMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"grid",t="grid"===e?this.props.col:1,n=P.rowColToIndex(this.state.focus,this.state.col);this.currentPage=null,this.setState({focus:P.indexToRowCol(n,t),col:t,viewMode:e}),P.asyncLocalStorage.setItem("app-view-mode",e)}},{key:"navItem",value:function(e){var t=this;this.navItemTimer||(this.navItemTimer=setTimeout(function(){window.clearTimeout(t.navItemTimer),t.navItemTimer=null},this.navItemThrottleTime),this.state.reorderMode?this.handleMoveGrid(e):this.setState({focus:e}))}},{key:"onKeyDown",value:function(e){var t=this;if(!document.hidden){var n=this.state.reorderMode,i=void 0,r=e.key;switch(r){case"ArrowLeft":case"ArrowRight":if("grid"!==this.state.viewMode)return;P.isRtl()&&(r="ArrowLeft"===r?"ArrowRight":"ArrowLeft");case"ArrowUp":case"ArrowDown":if(!this.isAnimationEnd)return void e.preventDefault();var a=n?this.reorder.focus||this.state.focus:this.state.focus;i=P.navGrid({currentRowCol:a,dir:r,col:this.state.col,total:this.state.apps.length}),this.navItem(i);break;case"Call":x.default.launch("manifestURL","app://communications.gaiamobile.org/manifest.webapp");break;case"SoftRight":if(!n){var o=this.state.apps[this.focusIndex],s=this.menuOptions.filter(function(e){switch(e.id){case"uninstall":return C.default.MozApp===o.type&&o.mozApp.removable;case"unpin":case"rename":return C.default.Bookmark===o.type;default:return!!e.tags&&e.tags.includes(t.state.viewMode)}});v.default.request("showOptionMenu",{options:s})}break;case"SoftLeft":n&&this.exitReorderMode();break;case"Enter":if(n)this.saveCurrentAppsOrder(),D.eventLogger.log({type:D.EVENT_TYPES.APP_POSITION,starting_position:this.reorder.indexFrom,end_position:this.reorder.indexTo,app_id:this.reorder.app.manifestURL,app_version:this.reorder.app.manifest.version}),this.exitReorderMode(!0);else{if(v.default.query("LaunchStore.isLaunching"))return;x.default.refreshLaunchStateTimer(),x.default.isLaunching=!0,e.target.click()}break;case"EndCall":case"BrowserBack":case"Backspace":n?this.exitReorderMode():(this.exitListMode=!0,this.setState({focus:this.initFocus}),v.default.request("closeSheet","appList"))}i&&(e.stopPropagation(),e.preventDefault())}}},{key:"renderPagination",value:function(){var e=void 0,t=this.getPage(this.state.reorderMode?this.reorder.focus[0]:this.state.focus[0]),n=this.getPageCount();if(n>1){var i=Array(n).fill().map(function(e,n){var i=n===t?"page-indicator active":"page-indicator";return f.default.createElement("div",{key:"page-indicator--"+n,className:i})});e=f.default.createElement("div",{className:"pagination"},i)}return e}},{key:"calculateCssOrder",value:function(e){return 1e3*(e+1+.5*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0))}},{key:"render",value:function(){var e=this,t="grid"===this.state.viewMode?this.renderPagination():null,n=["appList",this.state.reorderMode?"is-reordering":""].filter(Boolean).join(" "),i=this.exitListMode;return this.exitListMode=!1,f.default.createElement("div",{className:n,"data-view-mode":this.state.viewMode,tabIndex:"-1",onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:function(t){e.element=t}},t,f.default.createElement("h1",{className:"readout-only",id:"all-apps","data-l10n-id":"all-apps"}),f.default.createElement("div",{className:"appList__container",role:"heading","aria-labelledby":"all-apps",ref:function(t){return e._container=t}},f.default.createElement("div",{className:"app-wall"},this.state.apps.map(function(t){return f.default.createElement(q,{key:t.manifestURL,manifestURL:t.manifestURL,item:t,position:e.state.focus,viewMode:e.state.viewMode,needClearFlicker:i})}))))}}]),t}(p.default);V.defaultProps={viewMode:"grid",col:3,row:3},V.propTypes={viewMode:f.default.PropTypes.string,col:f.default.PropTypes.number,row:f.default.PropTypes.number},t.default=(0,m.default)(V,"immediate","immediate")},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=n(19),d=r(f),p=n(12),h=r(p),m=n(2),g=r(m),v=n(9),y=i(v),b=n(76),w=n(242),S=n(51),_=i(S),k=n(32),L=i(k),E=n(31),O=r(E),I=n(133),A=r(I),C=n(136),T=n(132),M=r(T),R=n(131),P=r(R),N=n(248),x=r(N),U=n(245),j=r(U),D=n(250),F=r(D),B=n(33),z=r(B),q=[],V=[],H={},W={stkEnabled:!1,airplaneModeEnabled:!1,forcedOpenFolder:!1};localStorage.getItem("forcedOpenFolder")&&(W.forcedOpenFolder=!0);var K=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.customApps=null,e.name="AppStore",e.initialized=!1,e.apps=[],e.flags=W,e.defaultAppsOrder=M.default,e.customAppConfig={},e.initialize=function(){if(!e.initialized){e.initialized=!0,e.generateAllItems();var t=navigator.mozApps.mgmt;t.addEventListener("update",e.handlers.appUpdate),t.addEventListener("install",e.handlers.appInstall),t.addEventListener("uninstall",e.handlers.appUninstall),t.addEventListener("enabledstatechange",e.handlers.enabledStateChange),BookmarksDatabase.addEventListener("added",e.handlers.bookmarkAdded),BookmarksDatabase.addEventListener("updated",e.handlers.bookmarkUpdated),BookmarksDatabase.addEventListener("removed",e.handlers.bookmarkRemoved),e.customization=new A.default,e.customization.on("updated",e.handlers.customizationUpdated),e.customization.mount(),h.default.addObserver("icc.applications",e.handlers.iccApps),h.default.addObserver("airplaneMode.status",e.handlers.airplaneModeToggled),h.default.addObserver("custom.launcher.apps",e.handlers.customFIHApps),e.customApps=localStorage.getItem("custom.launcher.apps"),e.Disableapps()}},e.handlers={windowLocalized:function(){e.generateAllItems()},appUpdate:function(t){var n=t.application;e.addItem(O.default.MozApp,{mozApp:n}),n.manifest.categories&&e.updateFolderApp(n)},appInstall:function(t){var n=t.application;if("installed"===n.installState){n.installFromStore=!0;var i=e.addItem(O.default.MozApp,{mozApp:n});n.manifest.categories&&e.installAppIntoFolder(n,i[0].displayName),i.forEach(function(e){C.eventLogger.log({type:C.EVENT_TYPES.APP_POSITION,app_id:e.manifestURL,app_version:e.manifest&&e.manifest.version,starting_position:-1,end_position:e.position})})}else n.ondownloadapplied=function(t){n.ondownloadapplied=null,n.ondownloaderror=null,e.handlers.appInstall(t)},n.ondownloaderror=function(){n.ondownloadapplied=null,n.ondownloaderror=null}},appUninstall:function(t){var n=t.application,i=e.removeItemByManifestURL(n.manifestURL);(0,b.removeItemFromAppsOrder)(n.manifestURL),n.manifest.categories&&e.uninstallAppIntoFolder(n),i&&C.eventLogger.log({type:C.EVENT_TYPES.APP_POSITION,app_id:i.manifestURL,app_version:i.manifest&&i.manifest.version,starting_position:i.position,end_position:-1})},bookmarkAdded:function(t){var n=t.target;e.addItem(O.default.Bookmark,{bookmark:n}).forEach(function(e){C.eventLogger.log({type:C.EVENT_TYPES.APP_POSITION,app_id:e.manifestURL,app_version:null,starting_position:-1,end_position:e.position})})},bookmarkUpdated:function(t){var n=t.target;e.addItem(O.default.Bookmark,{bookmark:n})},bookmarkRemoved:function(t){var n=t.target.id,i=e.removeItemByManifestURL(n);(0,b.removeItemFromAppsOrder)(n),i&&C.eventLogger.log({type:C.EVENT_TYPES.APP_POSITION,app_id:i.manifestURL,app_version:null,starting_position:i.position,end_position:-1})},iccApps:function(t){try{var n=JSON.parse(t);e.flags.stkEnabled=n&&"object"===("undefined"==typeof n?"undefined":l(n))&&Object.keys(n).length>0,e.notifyChange()}catch(i){}},airplaneModeToggled:function(t){switch(t){case"enabled":e.flags.airplaneModeEnabled=!0,e.notifyChange();break;case"disabled":e.flags.airplaneModeEnabled=!1,e.notifyChange()}},customFIHApps:function(t){dump("gavin customFIHApps"+t),e.customApps=t,localStorage.setItem("custom.launcher.apps",t),e.notifyChange(),e.Disableapps()},customizationUpdated:function(){Promise.resolve().then(function(){return e.apps.filter(function(e){return A.default.isCustomizedItem(e)}).forEach(function(t){return e.removeItemByManifestURL(t.manifestURL)}),Promise.resolve()}).then(function(){e.customization.getCustomFolders().forEach(function(t){t.basisname=t.categories&&t.categories[0]||t.name.toLowerCase(),t.showname=t.name.toLowerCase(),t.origin="homescreen.carrier.folder",H=t,e.apps.length&&e.apps.forEach(function(t){e.checkCarrierFolderApp(t)});var n=V.findIndex(function(e){return"customization"===e.source});n!==-1?V[n]=t:V.unshift(t),e.isInitEnd&&e.addItem(O.default.Folder,{folder:t})})})},enabledStateChange:function(){e.generateAllItems()}},e.notifyChange=function(){return e.emit("change")},e.updateFolderList=function(t){return e.emit("updateFolderList",t)},g.default.register("updateFolderOrder",e),g.default.register("updateCusotmAppConfig",e),window.addEventListener("localized",e.handlers.windowLocalized),e.initialized||e.initialize(),e}return s(t,e),c(t,[{key:"reset",value:function(){this.apps=[],this.flags=W,window.removeEventListener("localized",this.handlers.windowLocalized),navigator.mozApps.mgmt&&(navigator.mozApps.mgmt.removeEventListener("update",this.handlers.appUpdate),navigator.mozApps.mgmt.removeEventListener("install",this.handlers.appInstall),navigator.mozApps.mgmt.removeEventListener("uninstall",this.handlers.appUninstall),navigator.mozApps.mgmt.removeEventListener("enabledstatechange",this.handlers.enabledStateChange)),
BookmarksDatabase&&(BookmarksDatabase.removeEventListener("added",this.handlers.bookmarkAdded),BookmarksDatabase.removeEventListener("updated",this.handlers.bookmarkUpdated),BookmarksDatabase.removeEventListener("removed",this.handlers.bookmarkRemoved)),this.customization&&(this.customization.offAll("updated"),this.customization.unmount()),h.default.removeObserver("icc.applications",this.handlers.iccApps),h.default.removeObserver("airplaneMode.status",this.handlers.airplaneModeToggled),h.default.removeObserver("custom.launcher.apps",this.handlers.customFIHApps)}},{key:"initFolderConfig",value:function(){var e=this;return new Promise(function(t){navigator.getFeature("hardware.memory").then(function(n){var i=localStorage.getItem("localFolderOrder");if(!e.isInitEnd){var r="";r=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),dump("app_store:initFolderConfig skuid: "+r);var a=null;a="62GMX"===r||"62HMX"===r?j.default:x.default,V=V.concat(JSON.parse(i)||(512===n?a:[])),e.hidePresetFolder()}q=256===n?["Carrier"]:["Games","Carrier","Utilities"],t()})})}},{key:"hidePresetFolder",value:function(){var e=g.default.query("forceSettings"),t=e&&e[z.default[0]];if(t&&t.length){var n=Object.assign([],V);t.forEach(function(e){n.forEach(function(t,n){e===t.basisname&&V.splice(n,1)})})}}},{key:"pushToItemList",value:function(e){var t=L.findItemIndexByManifestURL(this.apps,e.manifestURL);t>=0?this.apps[t]=e:this.apps.push(e)}},{key:"Disableapps",value:function(){var e=this,t=["Assistant","Maps","Google Search","YouTube","YouTubeApp","Twitter","Facebook","WhatsApp"];this.apps.forEach(function(n){t.includes(n.manifest.name)&&(dump("Launcher app_store disable app : "+n.manifest.name+", "+("0"!=e.customApps)),navigator.mozApps.mgmt.setEnabled(n.mozApp,"0"!=e.customApps))})}},{key:"launchBrowser",value:function(){null!=this.browser?this.browser.mozApp.launch(this.browser.entry):this.apps.some(function(e){var t="Internet"===e.manifest.name;return t&&e.mozApp.launch(e.entry),t})}},{key:"updateCusotmAppConfig",value:function(e){if(e){var t=e[z.default[0]],n=e[z.default[8]],i=!1;t&&t.length&&(i=!0,this.hidePresetFolder()),n&&(i=!0,this.customAppConfig={app_theme:n}),i&&this.generateAllItems()}}},{key:"toUppercase",value:function(e){return e?e.replace(e[0],e[0].toUpperCase()):""}},{key:"getCategories",value:function(e){return"string"==typeof e?[e]:e}},{key:"getFolder",value:function(e){return V.find(function(t){return t.basisname===e})}},{key:"setLocalFolder",value:function(){var e=V.filter(function(e){return"customization"!==e.source});try{localStorage.setItem("localFolderOrder",JSON.stringify(e))}catch(t){}}},{key:"updateFolderApp",value:function(e){var t=this,n=e.manifestURL,i=this.getCategories(e.manifest.categories),r=0,a=this.toUppercase(i.find(function(e){return q.includes(t.toUppercase(e))}));if(a&&a.toLowerCase()!==H.basisname){var o={name:e.manifest.name,manifestURL:e.manifestURL},s=V.find(function(e){return r=e.items.findIndex(function(e){return e.manifestURL&&e.manifestURL===n}),r!==-1});if(s.name!==a){s.items.splice(r,1);V.find(function(e){return e.name===a}).items.push(o),V.forEach(function(e){"customization"!==e.source&&(t.updateFolder(e.basisname),t.setLocalFolder())})}}}},{key:"updateFolderOrder",value:function(e){V.forEach(function(t){t.basisname===e.name&&(t.items=e.items)}),this.setLocalFolder()}},{key:"upgradeToForder",value:function(){var e=this;this.apps.forEach(function(t){var n=t.manifest&&t.manifest.categories,i=e.isDefaultApp(t);if(n&&!i){var r=n.find(function(t){return q.includes(e.toUppercase(t))}),a=V.find(function(t){return t.name===e.toUppercase(r)});if(a){a.items.find(function(e){return e.manifestURL&&e.manifestURL===t.manifestURL||e.origin&&e.origin===t.manifest.origin})||(a.items.push({name:t.manifest.name,manifestURL:t.manifestURL}),e.setLocalFolder())}}})}},{key:"checkCarrierFolderApp",value:function(e){var t={name:e.manifest.name,manifestURL:e.manifestURL};if(e.manifest&&e.manifest.categories&&this.customization.customizaed){if(e.manifest.categories.find(function(e){return e===H.basisname})){H.items.find(function(e){return e.manifestURL===t.manifestURL})||H.items.push(t)}}}},{key:"queryApp",value:function(e,t){return this.apps.find(function(n){return t===y.getDeepProp(n,e)})}},{key:"initVirtualAPP",value:function(){var e=u(F.default,1),t=e[0];t.name=y.toL10n(t.basisname),this.addItem(O.default.Virtual,{virtual:t})}},{key:"generateAllItems",value:function(){var e=this;return Promise.resolve().then(function(){return e.generateAllMozAppItems()}).then(function(){return e.generateAllBookmarkItems()}).then(function(){return e.generateAllFolderItems()}).then(function(){e.initVirtualAPP(),e.isInitEnd=!0,e.notifyChange()})}},{key:"generateAllMozAppItems",value:function(){var e=this;return new Promise(function(t,n){var i=navigator.mozApps.mgmt.getAll();i.onsuccess=function(n){n.target.result.forEach(function(t){"pending"!==t.installState&&(e.addItem(O.default.MozApp,{mozApp:t}),e.checkCarrierFolderApp(t))}),t()},i.onerror=function(e){n()}})}},{key:"generateAllBookmarkItems",value:function(){var e=this;return new Promise(function(t){BookmarksDatabase.getAll().then(function(n){Object.keys(n).map(function(e){return n[e]}).forEach(function(t){return e.addItem(O.default.Bookmark,{bookmark:t})}),t()})})}},{key:"generateAllFolderItems",value:function(){var e=this;return new Promise(function(t){var n=!localStorage.getItem("tutorial-has-viewed"),i=!!localStorage.getItem("hasFolder");(n||i||W.forcedOpenFolder)&&e.initFolderConfig().then(function(){i||(localStorage.setItem("hasFolder","v1.0"),!n&&W.forcedOpenFolder&&e.upgradeToForder());var r=e.apps.filter(function(e){return"localfolder"===e.source});r.length&&r.forEach(function(t){var n=e.apps.indexOf(t);e.apps.splice(n,1)}),V.forEach(function(t){if(t.showname){var n=y.toL10n(t.showname.toLowerCase());"customization"!==t.source&&(t.name=n)}e.addItem(O.default.Folder,{folder:t})}),t()})})}},{key:"addItem",value:function(e,t){var n=this,i=_.create(e,t,this.customAppConfig);return i.forEach(function(e){n.pushToItemList(e),(0,w.mountItemIcon)(e,function(){n.notifyChange()})}),this.notifyChange(),i}},{key:"isDefaultApp",value:function(e){var t="";t=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),dump("app_store isDefaultApp skuid: "+t);var n=null;n="62GMX"===t||"62HMX"===t?P.default:M.default;for(var i=0;i<n.length;i++){if(e.manifest.origin&&n[i].origin===e.manifest.origin)return!0;if(e.manifestURL&&n[i].manifestURL===e.manifestURL)return!0}return!1}},{key:"checkSameApp",value:function(e,t){return e.manifestURL&&e.manifestURL===t.manifestURL||e.origin&&e.origin===t.manifest.origin}},{key:"installAppIntoFolder",value:function(e,t){var n=this,i=this.isDefaultApp(e),r=this.getCategories(e.manifest.categories),a={name:e.manifest.name,manifestURL:e.manifestURL};i||r.find(function(i){i=i.toLowerCase(i);var r=n.getFolder(i);return!!r&&(g.default.request("addFolderIndicator"+i,e),r.items.push(a),n.updateFolderList(i),i===H.basisname||(n.setLocalFolder(),y.showToast("toast-app-downloaded-to-folder",{appName:t,folderName:y.toL10n(i)}),!0))})}},{key:"uninstallAppIntoFolder",value:function(e){var t=this,n=this.isDefaultApp(e),i=this.getCategories(e.manifest.categories);n||i.find(function(n){n=n.toLowerCase(n);var i=t.getFolder(n);if(i){g.default.request("deleteFolderIndicator"+n,e);var r=i.items.findIndex(function(n){return t.checkSameApp(n,e)});return r!==-1&&(i.items.splice(r,1),t.updateFolderList(n),n!==H.basisname&&t.setLocalFolder()),!0}return!1})}},{key:"removeItemByManifestURL",value:function(e){var t=L.findItemIndexByManifestURL(this.apps,e);if(t>=0){var n=this.apps.splice(t,1).shift();return this.notifyChange(),n}return null}}]),t}(d.default);t.default=K},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(2),p=i(d),h=n(79),m=i(h),g=n(80),v=i(g);n(289);var y="apps/manifest/jJgwOH3cJw7v8ZwUqbg9",b="app://kaios-cards.kaiostech.com/index.html",w=6372e5,S=1242e6,_=26244e5,k=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="cards",n.clockTimeUpdate=function(){if(!m.default.internetStatus&&n.ftuStartStatus){var e=v.default.cardsStatus,t=(new Date).getTime(),i=new Date(e.disConnectTime).setHours(0,0,0,0);t>=i+w&&0!==e.internetKitTimes&&v.default.getAllCards().then(function(n){var r=[];return(e.internetKitTimes>6||e.internetKitTimes>4&&t>=i+S||e.internetKitTimes>0&&t>=i+_)&&(e.cardsOrder.indexOf("preloaded-7")!==-1&&e.cardsOrder.splice(e.cardsOrder.indexOf("preloaded-7"),1),e.cardsOrder.unshift("preloaded-7"),n[6]&&!n[6].showOnHome&&(n[6].showOnHome=!n[6].showOnHome,r.push(v.default.updateCards({"preloaded-7":n[6]}))),e.internetKitTimes-=1),1===e.internetSearchTimes&&(-1===e.cardsOrder.indexOf("preloaded-2")?e.needShowSearchCardDialog=!0:(e.cardsOrder.splice(e.cardsOrder.indexOf("preloaded-2"),1),e.needShowSearchCardDialog=!1),e.cardsOrder.unshift("preloaded-2"),n[1].showOnHome||(n[1].showOnHome=!n[1].showOnHome,r.push(v.default.updateCards({"preloaded-2":n[1]}))),e.internetSearchTimes=0),Promise.all(r)}).then(function(){v.default.cardsStatus.disConnectTime=Date.now(),v.default.setCardsStatus(e).then(function(){v.default.sendMessage({type:"cardsStatusChange",data:v.default.cardsStatus})})})}else n.ftuStartStatus||(n.ftuStartStatus=!!localStorage.getItem("experienceRemind"))},n.setCardsFocus=function(){if(n.state.hasCardsApp&&v.default.isLaunchByIframe){p.default.request("openSheet","cards");var e=document.querySelector("#main-view"),t=JSON.stringify({type:"ArrowDown"});n.element.contentWindow&&(n.element.contentWindow.postMessage(t,b),e.blur(),n.element.focus())}},n.state={hasCardsApp:!1,showCardsApp:!1},n.ftuStartStatus=!1,p.default.register("setCardsFocus",n),n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;m.default.init(),emitter.on("clockTimeUpdate",this.clockTimeUpdate),navigator.mozApps.mgmt.getAll().onsuccess=function(t){var n=t.target.result||[],i=n.findIndex(function(e){return e.manifestURL.includes(y)})!==-1;e.setState({hasCardsApp:i,showCardsApp:i},function(){i&&e.initCards()})}}},{key:"initCards",value:function(){var e=this;v.default.init(),window.addEventListener("message",function(t){if("closeCards"===t.data)e.clearFocusForCards(),v.default.sendMessage("closeCards");else if(t.data){var n=JSON.parse(t.data);v.default[n.type]?"launchCardsByIframe"===n.type?v.default[n.type](p.default.query("lastSheet")):v.default[n.type](n.data):m.default[n.type]?m.default[n.type](n.data):"openCards"===n.type&&(AppStore&&AppStore.apps.forEach(function(e){e&&e.manifestURL.includes(y)&&e.mozApp.launch()}),v.default.sendMessage("openCards"))}}),window.addEventListener("visibilitychange",function(){document.hidden?(clearTimeout(e.cardsTimer),"cards"!==p.default.query("lastSheet")&&e.releaseCardsIframe()):"cards"!==p.default.query("lastSheet")&&(e.cardsTimer=setTimeout(function(){e.restoreCardsIframe(),e.cardsTimer=null},500))})}},{key:"clearFocusForCards",value:function(){this.element&&this.element.blur(),p.default.request("closeSheet","cards")}},{key:"restoreCardsIframe",value:function(){this.state.hasCardsApp&&this.setState({showCardsApp:!0})}},{key:"releaseCardsIframe",value:function(){var e=this;this.state.hasCardsApp&&this.setState({showCardsApp:!1},function(){v.default.isLaunchByIframe=!1,e.element.contentWindow.close()})}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{id:"cards-container"},this.state.hasCardsApp&&l.default.createElement("iframe",{id:"cards",title:"Cards App",className:"cards-app",src:this.state.showCardsApp?b+"#home":"",ref:function(t){e.element=t}}))}}]),t}(f.default);t.default=k},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=n(3),d=i(f),p=n(5),h=i(p),m=n(2),g=i(m),v=n(12),y=i(v);n(291),n(292);var b=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Clock",n.initState={datetime:"",timeForReadout:"",date:"",weekday:"",h1:"0",h2:"0",m1:"0",m2:"0",ampm:"",visible:"true"===localStorage.getItem("home.clock.visible")},n.state=l({},n.initState),navigator.mozL10n.ready(function(){n.ready=!0,null===navigator.mozHour12&&(navigator.mozHour12="true"===localStorage.getItem("locale.hour12")),n.refresh()}),n.digiKey=0,n.digiIcons=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bold",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return n.digiKey+=1,[].concat(r(Array(t))).map(function(t,i){return d.default.createElement("i",{key:"key_"+i+"_"+e+"_"+n.digiKey,"data-icon":"numeric_"+i+"_"+e,"aria-hidden":"true"})})},n.iconsHtml={bold:n.digiIcons("rounded_semibold"),light:n.digiIcons("light")},n}return s(t,e),c(t,[{key:"focus",value:function(){}},{key:"componentWillMount",value:function(){y.default.addObserver("home.clock.visible",this),y.default.addObserver("locale.hour12",this)}},{key:"componentDidMount",value:function(){g.default.register("start",this),g.default.register("stop",this),g.default.register("forcedRefresh",this),window.addEventListener("moztimechange",this)}},{key:"_handle_moztimechange",value:function(){g.default.request("timeUpdate"),this.stop(),this.start()}},{key:"_handle_timeformatchange",value:function(){this.refresh()}},{key:"_handle_visibilitychange",value:function(){"visible"===document.visibilityState&&(this.stop(),this.start())}},{key:"sendUpdateTime",value:function(){clearTimeout(this.updateTime),this.updateTime=setTimeout(function(){emitter.emit("clockTimeUpdate")},1e3)}},{key:"start",value:function(){var e=this,t=new Date;this.refresh(),this.sendUpdateTime(),this.timer=setTimeout(function(){e.start()},1e3*(60-t.getSeconds()))}},{key:"refresh",value:function(e){var t=this;(this.state.visible||e)&&navigator.mozL10n.ready(function(){var e=new Date,n=navigator.mozL10n.language.code,i=navigator.mozHour12?"%I":"%H",r=new navigator.mozL10n.DateTimeFormat,a=r.localeFormat(e,"%p | "+i+" | %M"),o=a.split(" | "),s=u(o,3),l=s[0],c=s[1],f=s[2];c=("00"+c).slice(-2).split(""),f=f.split(""),t.setState({datetime:r.localeFormat(e,"%Y-%m-%dT%T"),timeForReadout:r.localeFormat(e,"homescreen %I:%M "+(navigator.mozHour12?"%p":"")+", %A %B %e"),date:new Intl.DateTimeFormat(n,{month:"short",day:"numeric"}).format(e),weekday:new Intl.DateTimeFormat(n,{weekday:"long"}).format(e),h1:navigator.mozHour12&&"0"===c[0]?"":c[0],h2:c[1],m1:f[0],m2:f[1],ampm:l})})}},{key:"forcedRefresh",value:function(){this.refresh(!0)}},{key:"_observe_locale.hour12",value:function(e){localStorage.setItem("locale.hour12",e)}},{key:"_observe_home.clock.visible",value:function(e){localStorage.setItem("home.clock.visible",e),this.setState({visible:e}),this.stop(),e?(this.start(),window.addEventListener("moztimechange",this),window.addEventListener("timeformatchange",this),window.addEventListener("visibilitychange",this)):(window.removeEventListener("moztimechange",this),window.removeEventListener("timeformatchange",this),window.removeEventListener("visibilitychange",this))}},{key:"stop",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.state.visible&&this.ready?d.default.createElement("time",{className:"ClockComponent",dateTime:this.state.datetime,role:"menuitem","aria-label":this.state.timeForReadout},d.default.createElement("div",{className:"clock-upper"},d.default.createElement("div",{className:"clock-ampm secondary","data-hour-24":!navigator.mozHour12},this.state.ampm),d.default.createElement("bdi",{className:"clockDigi-container"},d.default.createElement("span",{className:"hour clockDigi-box"},d.default.createElement("span",{className:"clockDigi clockDigi--time","data-now":this.state.h1},this.iconsHtml.bold),d.default.createElement("span",{className:"clockDigi clockDigi--time","data-now":this.state.h2},this.iconsHtml.bold)),d.default.createElement("div",{className:"clock-colon"}),d.default.createElement("span",{className:"minute clockDigi-box"},d.default.createElement("span",{className:"clockDigi clockDigi--time","data-now":this.state.m1},this.iconsHtml.bold),d.default.createElement("span",{className:"clockDigi clockDigi--time","data-now":this.state.m2},this.iconsHtml.bold)))),d.default.createElement("div",{className:"date primary"},this.state.weekday,d.default.createElement("br",null),this.state.date)):null}}]),t}(h.default);t.default=b},,function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=r(l),f=n(2),d=r(f),p=n(5),h=r(p),m=n(35),g=r(m),v=n(262),y=r(v),b=n(263),w=r(b),S=n(9),_=i(S),k=n(83),L=r(k),E=n(134),O=r(E);n(293),n(298);var I=n(12),A=r(I),C=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Dialer",n.ready=!1,n.MIN_MATCHED_NUMBER_LENGTH=3,n.toggleStayEffect=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.parentBox.classList.toggle("with-dialer-stay-effect",e)},n.initState={dialerState:null,matchedContact:null,telNum:"",suggestions:[]},n.state=Object.assign({},n.initState),n.suggestionsTimer=null,L.default.on("mmiloading",n.showLoading.bind(n)),L.default.on("mmiloaded",n.showAlert.bind(n)),n.children={},["onKeyDown","call","hide","updateTelNum","focusInput"].forEach(function(e){n[e]=n[e].bind(n)}),d.default.register("show",n),d.default.register("hide",n),d.default.register("toggleStayEffect",n),d.default.register("resetCallingMarker",n),d.default.registerState("ready",n),d.default.registerState("isShown",n),d.default.registerState("isCalling",n),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;O.default.on("contact-changed",function(){e.isShown&&e.getSuggestions(e.state.telNum)}),this.updateTelTypes(),this.monitorWifiCallStatus(),this.parentBox=this.element.parentElement.parentElement,this.parentBox.addEventListener("animationend",function(){e.toggleStayEffect()}),this.ready=!0,A.default.addObserver("phone.ring.keypad",this),this.cpu_boost=!1}},{key:"monitorWifiCallStatus",value:function(){var e=this;this.getWifiCallInformation().imsHandlers.forEach(function(t){t.addEventListener("capabilitychange",e.updateWifiCallStatus.bind(e))})}},{key:"getWifiCallInformation",value:function(){var e=navigator.mozMobileConnections,t=[],n=0;return Array.from(e).forEach(function(e){var i=e.imsHandler;i&&("voice-over-wifi"!==i.capability&&"video-over-wifi"!==i.capability||n++,t.push(i))}),{imsHandlers:t,isWifiCallEnable:n>0}}},{key:"updateWifiCallStatus",value:function(){var e=this.getWifiCallInformation().isWifiCallEnable,t=e?_.toL10n("wifi-calling"):"";t!==this.state.dialerState&&this.setState({dialerState:t})}},{key:"_observe_phone.ring.keypad",value:function(e){this._keypadSoundIsEnabled=e}},{key:"show",value:function(e){this.isShown||this.isHidden()&&(this.updateTelTypes(),this.updateWifiCallStatus(),d.default.request("openSheet","dialer"),this.isShown=!0,this.element.focus(),e&&(this.focusInput(),this.children.dialerInput.sendFirstChar(e)),this._keypadSoundIsEnabled&&"1"!==navigator.engmodeExtension.getPropertyValue("sys.schedutil.boost")&&(navigator.engmodeExtension.setPropertyValue("sys.schedutil.boost","1"),this.cpu_boost=!0))}},{key:"hide",value:function(){this.isHidden()||(d.default.request("closeSheet","dialer"),this.cpu_boost&&(navigator.engmodeExtension.setPropertyValue("sys.schedutil.boost","0"),this.cpu_boost=!1)),this.isShown=!1,this.children.dialerInput.element.style.fontSize="",this.setState(this.initState),this.children.dialerInput.element.value=""}},{key:"updateTelTypes",value:function(){var e=this;navigator.mozL10n.ready(function(){e.telTypes=["personal","mobile","home","work","fax-home","fax-office","fax-other"].reduce(function(e,t){return e[t]=_.toL10n(t),e},{})})}},{key:"isHidden",value:function(){for(var e=this.element;e!==document.body&&!e.classList.contains("hidden")&&"closed"!==e.dataset.transitionState;)e=e.parentElement;return e.classList.contains("hidden")||"closed"===e.dataset.transitionState}},{key:"updateTelNum",value:function(e){var t=this;dump("FIHBDC dialer updateTelNum telNum:"+e);var n={telNum:e};e.length<this.MIN_MATCHED_NUMBER_LENGTH&&(n.matchedContact=this.initState.matchedContact,n.suggestions=this.initState.suggestions),this.setState(n,function(){0===e.length?t.hide():L.default.instantDialIfNecessary(e)&&(t.children.dialerInput.exitDialer(),L.default.dial(e)),e.length>=t.MIN_MATCHED_NUMBER_LENGTH&&(t.suggestionsTimer&&clearTimeout(t.suggestionsTimer),t.suggestionsTimer=setTimeout(function(){t.getSuggestions(e)},500))})}},{key:"focusInput",value:function(){this.stopRenderSteply(),this.children.dialerInput.element.focus()}},{key:"focusSuggestions",value:function(){var e=this;this.state.suggestions.length&&(this.children.dialerSuggestions.initFocus(),this.allSuggestions.keyword||setTimeout(function(){e.renderSteply()},0))}},{key:"renderSteply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=this.state.suggestions.length;if(this.allSuggestions.length<=n)return void this.stopRenderSteply();var i=this.allSuggestions.slice(0,n+e);i.keyword=this.state.telNum,this.setState({suggestions:i}),this.suggestionRenderTimer=setTimeout(this.renderSteply.bind(this),t)}},{key:"stopRenderSteply",value:function(){this.suggestionRenderTimer&&(window.clearTimeout(this.suggestionRenderTimer),this.suggestionRenderTimer=null)}},{key:"call",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isVideo:!1,isRtt:!1};return dump("FIHBDC dialer call number:"+e),this.isCalling?void d.default.request("showDialog",{ok:"skip",cancel:"cancel",type:"confirm",content:"otherConnectionInUseMessage",onOk:function(){d.default.request("Dialer:resetCallingMarker")}}):(this.isCalling=!0,this.stopRenderSteply(),void L.default.dial(e,n).then(function(){var e=t;document.addEventListener("visibilitychange",function t(){document.hidden&&(document.removeEventListener("visibilitychange",t),d.default.request("Dialer:hide"),!d.default.query("isHidden")&&d.default.request("hideDialog"),d.default.request("dialerFakeSoftKey"),e.isCalling=!1)})}).catch(function(e){t.isCalling=!1,"BlockNumber"===e&&L.default.showLimitNumberDialog()}))}},{key:"getSuggestions",value:function(e){dump("FIHBDC dialer getSuggestions num:"+e),L.default.isValid(e)&&(e.length<this.MIN_MATCHED_NUMBER_LENGTH||_.contactNumFilter({telNum:e}).then(this.filterSuggestions.bind(this,e)))}},{key:"filterSuggestions",value:function(e,t){var n=this,i=void 0,r=t.reduce(function(t,r){return t.concat(r.tel.map(function(t){var a={id:r.id,name:r.name&&r.name[0],type:n.getL10nFromTelTypes(t.type[0]||"mobile"),number:t.value};return i||t.value!==e||(i=a),a}))},[]).filter(function(e){return-1!==e.number.indexOf(n.state.telNum)});dump("dialer.js, filterSuggestions, suggestions.length:"+r.length+" num:"+e),this.allSuggestions=r,this.renderSuggestions(r.slice(0,5),i,e)}},{key:"renderSuggestions",value:function(e,t,n){var i=this;n===this.state.telNum&&(e.keyword=n,this.setState({matchedContact:t,suggestions:e},function(){i.children.dialerSuggestions.element.scrollTo(0,0)}))}},{key:"onKeyDown",value:function(e){var t=e.key;switch(e.stopPropagation(),t){case"EndCall":this.hide();break;case"ArrowDown":this.focusSuggestions()}}},{key:"getMatchedContactInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.matchedContact,t=void 0;return e&&(t=[e.name,e.type].filter(Boolean).join(", ")),t}},{key:"showAlert",value:function(e,t){return this.resetCallingMarker(),d.default.request("Dialer:hide"),e||t?void d.default.request("showDialog",{type:"alert",header:e,content:_.toL10n(t),translated:!0,noClose:!1}):void d.default.request("hideDialog")}},{key:"resetCallingMarker",value:function(){this.isCalling=!1}},{key:"showLoading",value:function(){this.resetCallingMarker(),d.default.request("Dialer:hide").then(function(){d.default.request("showDialog",{type:"alert",content:"sending",otherClass:"is-loading",noClose:!1,onOk:function(){L.default.mmiloading=!1},onBack:function(){L.default.mmiloading=!1}})})}},{key:"getL10nFromTelTypes",value:function(e){return this.telTypes[e]||e}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"dialerBox",tabIndex:"-1",onKeyDown:this.onKeyDown,ref:function(t){e.element=t}},c.default.createElement("div",{className:"dialer-header"},c.default.createElement("div",{className:"dialer-state text-thi"},this.state.dialerState),c.default.createElement(y.default,{ref:function(t){e.children.dialerInput=t},dial:this.call,exitDialer:this.hide,updateTelNum:this.updateTelNum}),c.default.createElement("div",{className:"dialer-info text-thi"},this.getMatchedContactInfo())),c.default.createElement(w.default,{ref:function(t){e.children.dialerSuggestions=t},suggestions:this.state.suggestions,exitSuggestions:this.focusInput,dial:this.call}))}}]),t}(h.default);t.default=(0,g.default)(C,"immediate","immediate")},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=r(l),f=n(5),d=r(f),p=n(2),h=r(p),m=n(10),g=r(m),v=n(12),y=r(v),b=n(158),w=r(b),S=n(9),_=i(S),k=n(139),L=r(k),E=n(85),O=r(E),I=n(28),A=r(I),C=n(81),T=r(C),M=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="DialerInput",n.SPECIAL_CHARS=["*","+",","],n.unloadHandler=function(){window.removeEventListener("unload",n.unloadHandler),g.default.unregister(n.element),h.default.unregister("dialerFakeSoftkey",n)},n.telNum="",n.fontStyles="",n.isVTSupported=!1,LazyLoader.load(["shared/js/dialer/tone_player.js"],function(){TonePlayer.init("notification"),TonePlayer.gTonesFrequencies={1:[697,1209],2:[697,1336],3:[697,1477],A:[697,1633],4:[770,1209],5:[770,1336],6:[770,1477],B:[770,1633],7:[852,1209],8:[852,1336],9:[852,1477],C:[852,1633],"*":[941,1209],0:[941,1336],"#":[941,1477],D:[941,1633],",":[941,1209],"+":[941,1336]}}),n.specialCharsCount=n.SPECIAL_CHARS.length,n.onKeyPress=n.onKeyPress.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n.onInput=n.onInput.bind(n),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.element.setAttribute("x-inputmode","native"),y.default.addObserver("phone.ring.keypad",this),h.default.register("dialerFakeSoftKey",this),window.addEventListener("unload",this.unloadHandler),this.updateSoftKeys(),this.getFontStyles(),this.getVTSupportability()}},{key:"componentDidUpdate",value:function(){this.updateSoftKeys()}},{key:"dialerFakeSoftKey",value:function(){var e={left:"notifications",center:"icon=all-apps",right:"contacts"};g.default.store(e,this.element)}},{key:"updateSoftKeys",value:function(e){var t=e||{left:"contacts",center:{text:T.default.isRttAuto()?"rtt-call":"call",icon:""},right:"options"};SIMSlotManager.isMultiSIM()&&!SIMSlotManager.hasOnlyOneSIMCardDetected()&&!O.default.isAlwaysAsk()&&parseInt(O.default.cardIndex,10)>=0&&(t.center.icon="sim-"+(O.default.cardIndex+1)),g.default.register(t,this.element)}},{key:"onInput",value:function(){var e=this.element.value;this.props.updateTelNum(e),this.telNum=e,this.updateFontSize(e),dump("FIHBDC dialerInput onInput _num:"+e),""===e&&this.exitDialer()}},{key:"onKeyPress",value:function(e){e.preventDefault()}},{key:"onKeyUp",value:function(e){var t=L.default.translate(e.key);"Backspace"===t&&this.clearLongpressDeleteTimer(),"0"===t&&(window.clearTimeout(this.longpressSpecialChar),
this.longpressSpecialChar=null)}},{key:"onKeyDown",value:function(e){var t=this,n=e.nonTranslated?e.key:L.default.translate(e.key);if(!this.longpressDeleteTimer&&(!h.default.query("Dialer.isCalling")||"Call"===n&&"Enter"===n))switch(dump("FIHBDC dialerInput onKeyDown key:"+n),n){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"#":case"+":case"*":if(e.stopPropagation&&e.stopPropagation(),"0"===n&&void 0!==e.target&&_.isLandscape&&(window.clearTimeout(this.longpressSpecialChar),this.longpressSpecialChar=setTimeout(function(){var e=t.SPECIAL_CHARS[2],n=t.element.selectionStart,i=t.element.value;t.replaceLeftChar(e,n,i),t.playKeyTone(e)},1e3)),!_.isLandscape&&"*"===n&&-1!==this.SPECIAL_CHARS.indexOf(this.lastKeyinChar)&&this.getNowTime()-this.lastInputTime<1e3){var i=this.element,r=i.selectionStart,a=i.value,o=a[r-1],s=this.SPECIAL_CHARS.indexOf(o);this.element.value=a.slice(0,r-1)+a.slice(r),this.element.setSelectionRange(r-1,r-1),n=this.SPECIAL_CHARS[(s+1)%this.specialCharsCount]}e.preventDefault&&e.preventDefault(),this.insertKeyAtCaret(n),this.playKeyTone(n),this.lastKeyinChar=n,this.lastInputTime=this.getNowTime(),this.onInput();break;case"Backspace":e.stopPropagation(),this.longpressDeleteTimer=setTimeout(this.longpressDelete.bind(this),1e3);break;case"EndCall":e.stopPropagation(),this.deleteAllText();break;case"SoftLeft":e.stopPropagation(),A.default.launch("manifestURL","app://contact.gaiamobile.org/manifest.webapp");break;case"SoftRight":e.stopPropagation(),this.handleTelNumber();break;case"Enter":case"Call":e.preventDefault(),e.stopPropagation(),this.callHandleOption();break;case"ArrowDown":case"ArrowUp":e.preventDefault();break;case"ArrowLeft":case"ArrowRight":this.lastKeyinChar=null;break;default:e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}}},{key:"_observe_phone.ring.keypad",value:function(e){this._keypadSoundIsEnabled=e}},{key:"insertKeyAtCaret",value:function(e){var t=this.element.selectionEnd,n=this.element.value;this.element.value=n.substr(0,t)+e+n.substr(t),this.element.selectionEnd=t+1}},{key:"sendFirstChar",value:function(e){this.element.value="",this.onKeyDown({key:e,nonTranslated:!0}),this.getFontStyles()}},{key:"getNowTime",value:function(){return+new Date}},{key:"replaceLeftChar",value:function(e,t,n){var i=t-1;this.element.value=n.substr(0,i)+e+n.substr(i+e.length),this.element.setSelectionRange(t,t)}},{key:"clearLongpressDeleteTimer",value:function(){window.clearTimeout(this.longpressDeleteTimer),this.longpressDeleteTimer=null}},{key:"longpressDelete",value:function(){this.clearLongpressDeleteTimer(),this.deleteAllText()}},{key:"deleteAllText",value:function(){this.element.value="",this.onInput()}},{key:"playKeyTone",value:function(e){this._keypadSoundIsEnabled&&TonePlayer.start(TonePlayer.gTonesFrequencies[e],!0)}},{key:"callHandleOption",value:function(){var e=this;if(this.isVTSupported){var t=[{id:"call",callback:function(){e.element.focus(),e.props.dial(e.telNum,{isRtt:T.default.isRttAuto()})}},{id:"video-call",callback:function(){e.element.focus(),e.props.dial(e.telNum,{isVideo:!0})}}];h.default.request("showOptionMenu",{options:t,onCancel:function(){return e.element.focus()}})}else dump("FIHBDC dialerInput callHandleOption this.telNum:"+this.telNum),this.props.dial(this.telNum,{isRtt:T.default.isRttAuto()})}},{key:"handleTelNumber",value:function(){var e=this,t=[{id:"add-to-existing-contact",callback:function(){_.sendNumberToContact({name:"update",telNum:e.telNum})}},{id:"create-new-contact",callback:function(){_.sendNumberToContact({name:"new",telNum:e.telNum})}}];T.default.isRttManual()&&t.unshift({id:"rtt-call",callback:function(){e.element.focus(),e.props.dial(e.telNum,{isRtt:!0})}}),h.default.request("showOptionMenu",{options:t,onCancel:function(){return e.element.focus()}})}},{key:"getFontStyles",value:function(){var e=this;this.fontStyles=function(){var t=window.getComputedStyle(e.element);return t?["font-style","font-weight","font-size","font-family"].map(function(e){return t[e]}).join(" "):""}()}},{key:"updateFontSize",value:function(e){this.offsetWidth||(this.offsetWidth=this.element.offsetWidth);var t=this.element.style.fontSize,n=(0,w.default)({text:e,font:this.fontStyles,space:this.offsetWidth,min:22,max:30}).fontSize+"px";t!==n&&(this.element.style.fontSize=n)}},{key:"getVTSupportability",value:function(){var e=this;navigator.hasFeature&&navigator.hasFeature("device.capability.vilte").then(function(t){e.isVTSupported=t})}},{key:"exitDialer",value:function(){this.clearLongpressDeleteTimer(),this.props.exitDialer()}},{key:"render",value:function(){var e=this;return c.default.createElement("input",{tabIndex:"-1",className:"dialer-input",onKeyPress:this.onKeyPress,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onInput:this.onInput,ref:function(t){e.element=t}})}}]),t}(d.default);M.defaultProps={dial:null,exitDialer:null,updateTelNum:null},M.propTypes={dial:c.default.PropTypes.func,exitDialer:c.default.PropTypes.func,updateTelNum:c.default.PropTypes.func},t.default=M},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(2),p=i(d),h=n(10),m=i(h),g=n(72),v=i(g),y=n(85),b=i(y),w=n(81),S=i(w),_=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="DialerSuggestions",n.unloadHandler=function(){window.removeEventListener("unload",n.unloadHandler),n.suggestionNavigator.destroy(),m.default.unregister(n.element)},n.onKeyDown=n.onKeyDown.bind(n),n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.suggestionNavigator=new v.default(".dialer-focusable",this.element),window.addEventListener("unload",this.unloadHandler),this.updateSoftKeys(),this.getVTSupportability()}},{key:"componentDidUpdate",value:function(){this.updateSoftKeys()}},{key:"updateSoftKeys",value:function(e){var t=e||{left:"",center:{text:S.default.isRttAuto()?"rtt-call":"call",icon:""},right:S.default.isRttManual()?"options":""};SIMSlotManager.isMultiSIM()&&!SIMSlotManager.hasOnlyOneSIMCardDetected()&&!b.default.isAlwaysAsk()&&parseInt(b.default.cardIndex,10)>=0&&(t.center.icon="sim-"+(b.default.cardIndex+1)),m.default.register(t,this.element)}},{key:"getVTSupportability",value:function(){var e=this;navigator.hasFeature&&navigator.hasFeature("device.capability.vilte").then(function(t){e.isVTSupported=t})}},{key:"softRightHandleOption",value:function(){var e=this;if(S.default.isRttManual()){var t=document.activeElement,n=[];S.default.isRttManual()&&n.unshift({id:"rtt-call",callback:function(){t.focus();var n=e.getFocusedSuggestion(),i=n.number;e.props.dial(i,{isRtt:!0})}}),p.default.request("showOptionMenu",{options:n,onCancel:function(){return e.element.focus()}})}}},{key:"callHandleOption",value:function(){var e=this;if(this.isVTSupported){var t=document.activeElement,n=[{id:"call",callback:function(){t.focus();var n=e.getFocusedSuggestion(),i=n.number;e.props.dial(i,{isRtt:S.default.isRttAuto()})}},{id:"video-call",callback:function(){t.focus();var n=e.getFocusedSuggestion(),i=n.number;e.props.dial(i,{isVideo:!0})}}];p.default.request("showOptionMenu",{options:n,onCancel:function(){return e.element.focus()}})}else{var i=this.getFocusedSuggestion(),r=i.number;this.props.dial(r,{isRtt:S.default.isRttAuto()})}}},{key:"onKeyDown",value:function(e){if(!p.default.query("Dialer.isCalling"))switch(e.key){case"SoftRight":e.stopPropagation(),this.softRightHandleOption();break;case"Backspace":e.stopPropagation(),e.preventDefault(),this.props.exitSuggestions();break;case"Enter":case"Call":e.stopPropagation(),this.callHandleOption()}}},{key:"getFocusedSuggestion",value:function(){var e=this.suggestionNavigator,t=e._candidates.indexOf(e._currentFocus);return this.props.suggestions[t]}},{key:"initFocus",value:function(){var e=this;setTimeout(function(){var t=e.element.querySelector(".dialer-focusable");t.focus(),e.suggestionNavigator.setFocus(t)},0)}},{key:"formatMatchedNum",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.suggestions.keyword,n=e.indexOf(t);if(-1!==n){var i=e.slice(0,n),r=e.slice(n+t.length);return l.default.createElement("span",{dir:"ltr",className:"dialerSuggestion__telNum",dangerouslySetInnerHTML:{__html:i+"<mark>"+t+"</mark>"+r}})}}},{key:"suggestionsHtml",value:function e(){var t=this;return this.props.suggestions.map(function(e,n){return l.default.createElement("li",{key:"suggestions-"+n,className:"dialer-focusable",tabIndex:"-1"},l.default.createElement("div",{className:"dialerSuggestion"},l.default.createElement("div",{className:"dialerSuggestion__header text-pri"},e.name),l.default.createElement("div",{className:"dialerSuggestion__detail text-sec"},t.formatMatchedNum(e.number))))})}},{key:"render",value:function(){var e=this;return l.default.createElement("ul",{className:"dialerSuggestions",onKeyDown:this.onKeyDown,ref:function(t){e.element=t}},this.suggestionsHtml())}}]),t}(f.default);_.defaultProps={dial:null,exitSuggestions:null,suggestions:null},_.propTypes={dial:l.default.PropTypes.func,exitSuggestions:l.default.PropTypes.func,suggestions:l.default.PropTypes.arrayOf(l.default.PropTypes.object)},t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(10),p=i(d),h=n(12),m=i(h),g=n(2),v=i(g),y=n(9);n(295);var b="../style/images/experience_connected_anim.png",w=["show","hide","gray"],S=[0,1,2],_=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="cards",n["_observe_dm.data.settings.ui"]=function(e){n.dmDataSettings=e,n.updateButtonStatus()},n["_observe_dm.wifi.settings.ui"]=function(e){n.dmWifiSettings=e,n.updateButtonStatus()},n["_observe_data.settings.ui"]=function(e){n.dataSettings=e,n.updateButtonStatus()},n["_observe_wifi.settings.ui"]=function(e){n.wifiSettings=e,n.updateButtonStatus()},n.panelChange=function(e){"mainView"===e.detail.panel&&n.willShowPage&&n.showSecondPage()},n.netWorkStatusChange=function(e){n.online=e.detail.online,"mainView"!==v.default.query("lastSheet")?n.willShowPage=!0:(n.showSecondPage(!0),window.removeEventListener("networkstatuschange",n.netWorkStatusChange))},n.onKeyDown=function(e){switch(e.key){case"ArrowUp":"down"===n.state.activiteButton&&n.state.dataStatus&&n.setState({activiteButton:"up"});break;case"ArrowDown":"up"===n.state.activiteButton&&n.state.dataStatus&&n.setState({activiteButton:"down"});break;case"SoftLeft":case"EndCall":case"BrowserBack":case"Backspace":n.closeView();break;case"Enter":if("step1"===n.state.step)if(n.closeView(),"up"===n.state.activiteButton)m.default.set({"ril.data.enabled":!0}),window.addEventListener("networkstatuschange",n.netWorkStatusChange);else{var t=new MozActivity({name:"open_card",data:{id:"preloaded-3"}});t.onerror=function(e){}}if("step3"===n.state.step&&n.state.wifiStatus){n.closeView();new MozActivity({name:"configure",data:{target:"device",section:"wifi"}}).onerror=function(e){}}}},n.onFocus=function(){"step1"!==n.state.step&&"step3"!==n.state.step||n.updateSoftKeys()},n.state={showView:!1,dataStatus:!0,wifiStatus:!0,hideIcon:!1,step:"step1",activiteButton:"up"},n.dmDataSettings=!1,n.dmWifiSettings=!1,n.dataSettings=!1,n.wifiSettings=!1,n.experienceStep="step1",n.currentPanel="mainView",v.default.register("showExperiecnceView",n),v.default.register("closeExperiecnceView",n),v.default.registerState("experienceStep",n),window.addEventListener("panelChange",n.panelChange),n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){window.see=m.default,m.default.addObserver("dm.data.settings.ui",this),m.default.addObserver("dm.wifi.settings.ui",this),m.default.addObserver("data.settings.ui",this),m.default.addObserver("wifi.settings.ui",this)}},{key:"componentWillUnmount",value:function(){m.default.removeObserver("dm.data.settings.ui",this),m.default.removeObserver("dm.wifi.settings.ui",this),m.default.removeObserver("data.settings.ui",this),m.default.removeObserver("wifi.settings.ui",this),v.default.unregister("showExperiecnceView",this),v.default.unregister("closeExperiecnceView",this),v.default.unregisterState("experienceStep",this),window.removeEventListener("panelChange",this.panelChange)}},{key:"getWifiSettings",value:function(){return!("undefined"!=typeof this.dmWifiSettings&&this.dmWifiSettings!==w[0]||"undefined"!=typeof this.wifiSettings&&this.wifiSettings!==S[0])}},{key:"getDataSetting",value:function(){return!("undefined"!=typeof this.dmDataSettings&&this.dmDataSettings!==w[0]||"undefined"!=typeof this.dataSettings&&this.dataSettings!==S[0])}},{key:"checkLargeFontHeight",value:function(e){e.scrollHeight>e.offsetHeight&&this.setState({hideIcon:!0})}},{key:"updateButtonStatus",value:function(){this.setState({dataStatus:this.getDataSetting(),wifiStatus:this.getWifiSettings()})}},{key:"showExperiecnceView",value:function(){var e=this,t=this.getDataSetting();this.setState({showView:!0,dataStatus:t,step:"step1",hideIcon:!1,activiteButton:t?"up":"down"},function(){var t=document.querySelectorAll(".text-warp")[0];e.checkLargeFontHeight(t),e.experienceStep="step1",e.element.focus()})}},{key:"loadImage",value:function(){this.element.querySelector("img").src=b}},{key:"updateSoftKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{center:"select",right:"",left:"cancel"};p.default.register(e,this.element)}},{key:"showSecondPage",value:function(e){var t=this;this.willShowPage&&(this.willShowPage=!1,e=!0,window.removeEventListener("networkstatuschange",this.netWorkStatusChange)),e&&(this.online?this.setState({showView:!0,step:"step2",hideIcon:!1},function(){var e=document.querySelector(".internet-text-warp");t.checkLargeFontHeight(e),t.experienceStep="step2",t.loadImage(),t.updateSoftKeys({left:"notifications",center:"icon=all-apps",right:"contacts"}),document.body.classList.add("experience-step2")}):this.setState({showView:!0,wifiStatus:this.getWifiSettings(),step:"step3",hideIcon:!1},function(){var e=document.querySelectorAll(".text-warp")[1];t.checkLargeFontHeight(e),t.experienceStep="step3",t.element.focus(),v.default.request("openSheet","experience")}))}},{key:"closeExperiecnceView",value:function(e){this.closeView(e)}},{key:"closeView",value:function(e){e&&"step1"===e&&document.body.classList.remove("experience-step2"),v.default.request("closeSheet","experience"),this.setState({showView:!1,step:e||this.state.step})}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{id:"experience-container",tabIndex:"-1",className:(this.state.showView?"":"hidden")+" "+this.state.step,onKeyDown:this.onKeyDown,onFocus:this.onFocus,ref:function(t){e.element=t}},l.default.createElement("section",{id:"not-connect-internet",className:"not-connect-internet"},l.default.createElement("div",{className:"text-warp"},l.default.createElement("div",{className:"svg-icon online "+(this.state.hideIcon?"hidden":"")}),l.default.createElement("div",{className:"experience-text"},(0,y.toL10n)("not-connect-internet-text"))),l.default.createElement("div",{className:"up-button\n            "+("up"===this.state.activiteButton?"activite-button":"")+"\n            "+(this.state.dataStatus?"":"hidden")},(0,y.toL10n)("not-connect-internet-up-button")),l.default.createElement("div",{className:"down-button\n            "+("down"===this.state.activiteButton?"activite-button":"")},(0,y.toL10n)("not-connect-internet-down-button"))),l.default.createElement("section",{id:"connect-internet",className:"connect-internet"},l.default.createElement("div",{className:"internet-text-warp"},l.default.createElement("img",{className:"animation-png  "+(this.state.hideIcon?"hidden":""),src:"",alt:"animation-png"}),l.default.createElement("div",{className:"connect-internet-title"},(0,y.toL10n)("connect-internet-title")),l.default.createElement("div",{className:"experience-text"},(0,y.toL10n)("connect-internet-text"))),l.default.createElement("div",{className:"purple-indicator-png"})),l.default.createElement("section",{id:"not-data-plan",className:"not-data-plan"},l.default.createElement("div",{className:"text-warp"},l.default.createElement("div",{className:"svg-icon offline "+(this.state.hideIcon?"hidden":"")}),l.default.createElement("div",{className:"experience-text"},(0,y.toL10n)("not-data-plan-text"))),l.default.createElement("div",{className:"down-button activite-button\n            "+(this.state.wifiStatus?"":"hidden")},(0,y.toL10n)("not-data-plan-down-button"))))}}]),t}(f.default);t.default=_},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(24),l=r(u),c=n(9),f=i(c),d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="GridHelper",f.isLandscape?n.grid={row:2,col:4}:n.grid={row:3,col:3},n.emit("change",n.grid),n}return s(t,e),t}(l.default);t.default=new d},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=r(l),f=n(5),d=r(f),p=n(10),h=r(p),m=n(2),g=r(m),v=n(259),y=r(v),b=n(273),w=r(b),S=n(243),_=r(S),k=n(82),L=r(k),E=n(276),O=r(E),I=n(28),A=r(I),C=n(240),T=r(C),M=n(79),R=r(M),P=n(278),N=r(P),x=n(33),U=r(x),j=n(9),D=i(j);n(296);var F=2592e5,B=3456e5,z=18144e5,q=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="MainView",n.unloadHandler=function(){window.removeEventListener("unload",n.unloadHandler),h.default.unregister(n.element),L.default.unregister(n.element),g.default.unregister("show",n),g.default.unregister("hide",n),g.default.unregister("forcedRefresh",n),g.default.unregisterState("mainFocusStatus",n)},n.onKeyDown=function(e){if(g.default.query("AppList.ready")&&!g.default.query("LaunchStore.isLaunching")){var t=e.key;if("step2"===g.default.query("experienceStep")&&g.default.request("closeExperiecnceView","step1"),!n._longPressTimer){n.keydownRecords.set(t,Date.now());var i=g.default.query("forceSettings"),r=i[U.default[6]];if(!D.customEvtentKey(t,r,A.default)){if("62GMX"===n.skuid||"62HMX"===n.skuid)switch(t){case"Call":A.default.launch("manifestURL","app://communications.gaiamobile.org/manifest.webapp");break;case"SoftRight":A.default.launch("manifestURL","app://camera.gaiamobile.org/manifest.webapp");break;case"ArrowLeft":g.default.query("Sidemenu.itemCount")>0&&g.default.request("openSheet","sidemenu");break;case"ArrowDown":A.default.launch("manifestURL","app://sms.gaiamobile.org/manifest.webapp");break;case"ArrowRight":A.default.launch("manifestURL","app://camera.gaiamobile.org/manifest.webapp")}else switch(t){case"Call":A.default.launch("manifestURL","app://communications.gaiamobile.org/manifest.webapp");break;case"SoftRight":A.default.launch("manifestURL","app://camera.gaiamobile.org/manifest.webapp");break;case"ArrowLeft":g.default.query("Sidemenu.itemCount")>0&&g.default.request("openSheet","sidemenu");break;case"ArrowDown":g.default.request("setCardsFocus"),e.preventDefault(),e.stopPropagation();break;case"ArrowRight":A.default.launch("manifestURL","app://contact.gaiamobile.org/manifest.webapp")}n._shortLongPressTimer=setTimeout(function(){switch(n.clearShortLongPressTimer(),n._shortLongPressActionTriggered=!0,t){case"EndCall":case"BrowserBack":case"Backspace":if("Backspace"===t&&n.hasEndCallKey||!document.hasFocus())return;A.default.launch("iac","launcher-panel",{target:"sleep-menu"});break;default:n._shortLongPressActionTriggered=!1}},n.shortPressDuration),n._longPressTimer=setTimeout(function(){n.clearLongPressTimer(),n._longPressActionTriggered=!0;var e=i[U.default[3]];if(!D.customEvtentKey(t,e,A.default))switch(t){case n.keyToTriggerFlashLight:O.default.toggle();break;case"Enter":new MozActivity({name:"voice-assistant",data:{from:"Homescreen"}});break;default:n._longPressActionTriggered=!1}},n.longPressDuration)}}}},n.onKeyUp=function(e){var t=e.key;if((n._longPressTimer||n._shortLongPressTimer)&&!g.default.query("LaunchStore.isLaunching")&&g.default.query("AppList.ready")){if(n.clearShortLongPressTimer(),n.clearLongPressTimer(),n._shortLongPressActionTriggered)return void(n._shortLongPressActionTriggered=!1);if(n._longPressActionTriggered)return void(n._longPressActionTriggered=!1);switch(t){case"Call":if(!n.isValidKeyUp("Call"))return;A.default.launch("manifestURL","app://communications.gaiamobile.org/manifest.webapp");break;case"Enter":if(!n.isValidKeyUp("Enter"))return;n.deleteMainFocusClass(),g.default.request("openSheet","appList");break;case"SoftLeft":if(!n.isValidKeyUp("SoftLeft"))return;A.default.launch("iac","launcher-panel",{target:"notice"}),g.default.request("updateSoftKeyPoint",!1);break;case"SoftRight":if(!n.isValidKeyUp("SoftRight"))return;A.default.launch("manifestURL","app://contact.gaiamobile.org/manifest.webapp");break;case"ArrowUp":if(!n.isValidKeyUp("ArrowUp"))return;"62GMX"===n.skuid||"62HMX"===n.skuid?A.default.launch("manifestURL","app://settings.gaiamobile.org/manifest.webapp"):A.default.launch("iac","launcher-panel",{target:"instant-settings"})}}},n.isValidKeyUp=function(e){if(n.keydownRecords.get(e)){return Date.now()-n.keydownRecords.get(e)<n.longPressDuration}return!1},n.setRef=function(e){n.element=e},n.onBlur=function(){n.mainFocusStatus=!1},n.onFocus=function(){n.mainFocusStatus=!0,n.element.classList.add("is-focus"),n.getOfflineShow()&&(R.default.offlineChange=!1,R.default.showOfflineToaster()),n.showConnectedExperience()},n.deleteMainFocusClass=function(){n.element.classList.remove("is-focus"),n.element.classList.remove("to-force-display")},n.networkstatuschange=function(e){var t=e.detail.online,i=g.default.query("lastSheet");dump("main_view.js, networkstatuschange, connected:"+t+", panel:"+i),dump("main_view.js, networkstatuschange,internetStatus:"+R.default.internetStatus+",mainFocusStatus:"+n.mainFocusStatus),!t&&R.default.internetStatus&&(R.default.offlineChange=!0,i&&"mainView"!==i||!n.mainFocusStatus||document.hidden||(dump("main_view.js, networkstatuschange, showOfflineToaster"),R.default.offlineChange=!1,R.default.showOfflineToaster())),t&&!R.default.internetStatus&&(R.default.offlineChange=!1),R.default.internetStatus=t},n.getOfflineShow=function(){return!n.getForceSettings()&&R.default.offlineChange&&!document.hidden&&n.mainFocusStatus},n.getForceSettings=function(){return g.default.query("forceSettings")[U.default[1]]},n.showConnectedExperience=function(){n.getExperienceShow()&&(g.default.request("openSheet","experience"),g.default.request("showExperiecnceView"))},n.getExperienceShow=function(){var e=g.default.query("simStatus"),t=g.default.query("mainSimCardIndex");if(!n.getForceSettings()&&e.length&&!e[t].stateL10nId){var i=g.default.query("lastSheet");return n.mainFocusStatus&&"mainView"===i&&n.computeExperienceRemind()&&!R.default.internetStatus}},n.computeExperienceRemind=function(){var e=localStorage.getItem("experienceRemind");if(e){var t=JSON.parse(e),n=t.time,i=t.times,r=Date.now()-n,a=!1;if(i>3)return!1;if((r>F&&1===i||r>B&&2===i||r>z&&3===i)&&(a=!0),a)try{localStorage.setItem("experienceRemind",JSON.stringify({time:Date.now(),times:i+1}))}catch(o){}return a}},n.keydownRecords=new Map,n.shortPressDuration=500,n.longPressDuration=1500,n.keyToTriggerFlashLight="ArrowUp",n.mainFocusStatus=!1,n.skuid="",n.skuid=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),dump("main_view: skuid: "+n.skuid),navigator.hasFeature("device.capability.qwerty").then(function(e){e&&(n.keyToTriggerFlashLight=" ")}),navigator.hasFeature("device.capability.endcall-key").then(function(e){n.hasEndCallKey=!!e}),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;g.default.register("show",this),g.default.register("hide",this),g.default.register("forcedRefresh",this),g.default.registerState("mainFocusStatus",this),emitter.on("clockTimeUpdate",function(){return e.showConnectedExperience()}),h.default.register({left:"notifications",center:"icon=all-apps",right:"camera"},this.element),L.default.register(this.element),N.default.addEventListeners(),window.addEventListener("networkstatuschange",this.networkstatuschange),window.addEventListener("unload",this.unloadHandler),window.addEventListener("visibilitychange",function(){document.hidden?(e._shortLongPressActionTriggered=!1,e._longPressActionTriggered=!1):e.getOfflineShow()&&(R.default.offlineChange=!1,R.default.showOfflineToaster())})}},{key:"clearShortLongPressTimer",value:function(){this._shortLongPressTimer&&(clearTimeout(this._shortLongPressTimer),this._shortLongPressTimer=null)}},{key:"clearLongPressTimer",value:function(){this._longPressTimer&&(clearTimeout(this._longPressTimer),this._longPressTimer=null)}},{key:"show",value:function(){this.element.classList.remove("hidden"),this.focus()}},{key:"hide",value:function(){this.element.classList.add("hidden")}},{key:"forcedRefresh",value:function(){this.element.classList.add("to-force-display"),h.default.register({left:"notifications",center:"icon=all-apps",right:"camera"},this.element)}},{key:"focus",value:function(){this.element.focus()}},{key:"render",value:function(){return c.default.createElement("div",{id:"main-view",tabIndex:"-1",onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:this.onFocus,onBlur:this.onBlur,ref:this.setRef},c.default.createElement(w.default,null),c.default.createElement(y.default,null),c.default.createElement(_.default,null),c.default.createElement(T.default,null))}}]),t}(d.default);q.defaultProps={open:null,close:null},q.propTypes={open:c.default.PropTypes.func,close:c.default.PropTypes.func},t.default=q},function(e,t){"use strict";function n(e){var t=this,n=t[e],a=navigator.mozL10n.language.code||"",o=t.default_locale||"";return a in navigator.mozL10n.qps&&("name"===e||"description"===e||"short_name"===e)?n=navigator.mozL10n.qps[navigator.language].translate(n):t.locales&&[a,a.substr(0,a.indexOf("-")),o,o.substr(0,a.indexOf("-"))].some(function(t){return!(!this[t]||!this[t][e])&&(n=this[t][e],!0)},t.locales),"object"!==("undefined"==typeof n?"undefined":r(n))||n instanceof Array||(n=new i(n)),n}function i(e){for(var t in e)Object.defineProperty(this,t,{get:n.bind(e,t),enumerable:!0})}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(i.prototype,"displayName",{get:function(){return this.short_name||this.name}}),t.default=i},function(e,t){"use strict";!function(e){function t(e,t,n){this.manager=n,this._iccCardIndex=t,this._iccId=e,this._iccSettings={mcc:"000",mnc:"00"}}var n="/shared/resources/apn.json",i=["default","mms","supl","dun","ims","ia","hipri","xcap","cbs"],r=["none","pap","chap","papOrChap"],a=["authtype","user","password","proxy","port","mmsc","mmsproxy","mmsport","protocol","roaming_protocol","bearer"];t.prototype={setmccmnc:function(e,t){dump("operator_variant_handler launcher, setmccmnc, plmn = "+e+t),this._iccSettings.mcc=e,this._iccSettings.mnc=t},retrieveOperatorVariantUserselect:function(e){dump("operator_variant_handler launcher, retrieveOperatorVariantUserselect"),this.retrieveOperatorVariantSettings(function(t){dump("operator_variant_handler launcher, retrieveOperatorVariantUserselect result length = "+t.length),this.filterApnsByMvnoRules(0,t,[],"","",[],function(t){for(var n=[],i=[],r=[],a=0;a<t.length;a++){dump("operator_variant_handler launcher, filter APN is: "+JSON.stringify(t[a])),r=t[a].type;for(var o=0;o<r.length;o++)"default"!=r[o]?"mms"==r[o]&&i.push(t[a]):n.push(t[a])}e(n,i)}.bind(this))}.bind(this))},padLeft:function(e,t){for(var n=String(e);n.length<t;)n="0"+n;return n},clone:function(e){return JSON.parse(JSON.stringify(e))},apnListdiff:function(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)e[i].apn==t[n].apn&&e[i].type.toString()==t[n].type.toString()&&(e.splice(i,1),i-=1);return e},apnListunique:function(e){for(var t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t].apn===e[n].apn&&e[t].type.toString()==e[n].type.toString()&&e.splice(n--,1);return e},applySettings:function(e,t){this.selectionsapnlist=e,this.userselectedapnlist=t;for(var n=0;n<this.selectionsapnlist.length;n++)dump("operator_variant_handler launcher, selectionsapnlist is: "+JSON.stringify(this.selectionsapnlist[n]));for(var n=0;n<this.userselectedapnlist.length;n++)dump("operator_variant_handler launcher, userselectedapnlist is: "+JSON.stringify(this.userselectedapnlist[n]));
this.retrieveOperatorVariantSettings(function(e){this.applyOperatorVariantSettings(e)}.bind(this))},retrieveOperatorVariantSettings:function(e){var t=this;LazyLoader.getJSON(n).then(function(n){var i=t._iccSettings.mcc,r=t.padLeft(t._iccSettings.mnc,2);e(ApnHelper.getCompatible(n,i,r,""))})},filterApnsByMvnoRules:function(e,t,n,i,r,a,o){var s=this;if(e===t.length){var u=window.navigator.mozSettings,l=u.createLock(),c=l.get("operatorvariant.mvno");return c.onsuccess=function(){var e=c.result["operatorvariant.mvno"];e&&Array.isArray(e)||(e=[null,null]),e[s._iccCardIndex]=a;var t={};t["operatorvariant.mvno"]=e,l.set(t)},void(o&&"function"==typeof o&&o(n))}var f=t[e],d=f.mvno_type||"";d=d&&d.toLowerCase();var p=f.mvno_match_data||"";if("gid"!==d&&"imsi"!==d||(p=p&&p.toLowerCase()),!d||i&&i===d&&r===p)return dump("operator_variant_handler launcher, filterApnsByMvnoRules direct match mvno"),d?(dump("operator_variant_handler launcher, filterApnsByMvnoRules direct push 22"),n.push(f)):void 0===n.find(function(e){return!!e.mvno_type})&&(dump("operator_variant_handler launcher, filterApnsByMvnoRules direct push 11"),n.push(f)),this.filterApnsByMvnoRules(e+1,t,n,i,r,a,o);var h=navigator.mozIccManager.getIccById(this._iccId),c=h.matchMvno(d,p);c.onsuccess=function(){var s=c.result;dump("operator_variant_handler launcher, filterApnsByMvnoRules match = "+s);var u={mvnoType:d,mvnoMatchData:p,match:s};return a.find(function(e){return JSON.stringify(e)===JSON.stringify(u)})||a.push(u),s?(n=[],n.push(f),this.filterApnsByMvnoRules(e+1,t,n,d,p,a,o)):void this.filterApnsByMvnoRules(e+1,t,n,i,r,a,o)}.bind(this),c.onerror=function(){this.filterApnsByMvnoRules(e+1,t,n,i,r,a,o)}.bind(this)},applyOperatorVariantSettings:function(e){var t={default:{"ril.data.carrier":"carrier","ril.data.apn":"apn","ril.data.user":"user","ril.data.passwd":"password","ril.data.httpProxyHost":"proxy","ril.data.httpProxyPort":"port","ril.data.authtype":"authtype"},supl:{"ril.supl.carrier":"carrier","ril.supl.apn":"apn","ril.supl.user":"user","ril.supl.passwd":"password","ril.supl.httpProxyHost":"proxy","ril.supl.httpProxyPort":"port","ril.supl.authtype":"authtype"},mms:{"ril.mms.carrier":"carrier","ril.mms.apn":"apn","ril.mms.user":"user","ril.mms.passwd":"password","ril.mms.httpProxyHost":"proxy","ril.mms.httpProxyPort":"port","ril.mms.mmsc":"mmsc","ril.mms.mmsproxy":"mmsproxy","ril.mms.mmsport":"mmsport","ril.mms.authtype":"authtype"},dun:{"ril.dun.carrier":"carrier","ril.dun.apn":"apn","ril.dun.user":"user","ril.dun.passwd":"password","ril.dun.httpProxyHost":"proxy","ril.dun.httpProxyPort":"port","ril.dun.authtype":"authtype"},ims:{"ril.ims.carrier":"carrier","ril.ims.apn":"apn","ril.ims.user":"user","ril.ims.passwd":"password","ril.ims.httpProxyHost":"proxy","ril.ims.httpProxyPort":"port","ril.ims.authtype":"authtype"},operatorvariant:{"ril.iccInfo.mbdn":"voicemail","ril.sms.strict7BitEncoding.enabled":"enableStrict7BitEncodingForSms","ril.cellbroadcast.searchlist":"cellBroadcastSearchList","dom.mms.operatorSizeLimitation":"operatorSizeLimitation"}},n=["ril.sms.strict7BitEncoding.enabled"],i=window.navigator.mozSettings,a=i.createLock();for(var o in t){var s={},u=!1;if("undefined"!=this.userselectedapnlist&&this.userselectedapnlist.length>0)for(var l=0;l<this.userselectedapnlist.length;l++)if(this.userselectedapnlist[l].type.indexOf(o)!=-1){s=this.userselectedapnlist[l],u=!0;break}if(0==u)for(var l=0;l<e.length;l++)if("undefined"==typeof e[l].type&&(e[l].type="default"),e[l].type.indexOf(o)!=-1){s=e[l];break}var c=t[o];for(var f in c){var d=t[o][f],p={};switch(d){case"voicemail":this.applyVoicemailSettings(e);break;case"cellBroadcastSearchList":this.applyCellBroadcastSearchList(e);break;case"authtype":p[f]=s[d]?r[s[d]]:"notDefined";break;case"operatorSizeLimitation":p[f]=+s[d]||307200;break;default:n.indexOf(f)!==-1?p[f]=s[d]||!1:p[f]=s[d]||""}Object.keys(p).length&&a.set(p)}}this.filterApnsByMvnoRules(0,e,[],"","",[],function(e){this.buildCompleteDefaultApnSettings(e);var t=this.apnListdiff(e,this.selectionsapnlist);t=this.apnListunique(this.userselectedapnlist.concat(t)),dump("operator_variant_handler launcher, final filteredApnList len is: "+t.length);for(var n=0;n<t.length;n++)dump("operator_variant_handler launcher, final filteredApnList is: "+JSON.stringify(t[n]));this.buildApnSettings(t)}.bind(this))},getValueFromOperatorVariantSettings:function(e,t){for(var n={},i=0;i<e.length;i++)if(e[i]&&e[i].type.indexOf("operatorvariant")!=-1){n=e[i];break}return n[t]||""},updateOperatorVariantSettings:function(e,t){var n=window.navigator.mozSettings,i=n.createLock(),r=i.get(e);r.onsuccess=function(){var n=r.result[e]||["",""];n[this._iccCardIndex]=t;var a={};a[e]=n,i.set(a)}.bind(this)},applyVoicemailSettings:function(e){var t=this.getValueFromOperatorVariantSettings(e,"voicemail");this.updateOperatorVariantSettings("ril.iccInfo.mbdn",t)},applyCellBroadcastSearchList:function(e){var t=this.getValueFromOperatorVariantSettings(e,"cellBroadcastSearchList");this.updateOperatorVariantSettings("ril.cellbroadcast.searchlist",t)},canHandleType:function(e,t){return e.type&&e.type.indexOf(t)!=-1},convertApnSettings:function(e){var t=this;return e.map(function(e){var n=t.clone(e);return n.type&&Array.isArray(n.type)&&(n.types=n.type.map(function(e){return e})),delete n.type,a.forEach(function(e){var t;switch(e){case"authtype":t=r[n.authtype]||"notDefined",n[e]=t;break;case"protocol":case"roaming_protocol":t="notDefined";break;case"bearer":t=0;break;default:t=""}n[e]||(n[e]=t)}),n})},buildCompleteDefaultApnSettings:function(e){var t=window.navigator.mozSettings,n=e.filter(function(e){return e.type&&e.type.indexOf("operatorvariant")==-1});n=this.convertApnSettings(n);for(var i=0;i<n.length;i++)dump("operator_variant_handler launcher, buildCompleteDefaultApnSettings, validApnSettings["+i+"] = "+JSON.stringify(n[i]));var r=t.createLock(),a=r.get("ril.data.default.apns");this._iccSettings.mcc,this._iccSettings.mnc,a.onsuccess=function(){var e=a.result["ril.data.default.apns"]||{};e[this._iccCardIndex]=n,r.set({"ril.data.default.apns":e})}.bind(this)},buildApnSettings:function(e){for(var t=this,n=[],r=[],a=!1,o=0;o<i.length;o++){var s=i[o];a=!1;for(var u=0;u<n.length;u++)if(this.canHandleType(n[u],s)){a=!0;break}if(!a)for(var l=0;l<e.length;l++)if(this.canHandleType(e[l],s)){if(e[l].type.length>1){var c=this.clone(e[l]);delete c.type,c.type=[],c.type.push(s),n.push(c);break}n.push(e[l]);break}}r=this.convertApnSettings(n);for(var u=0;u<r.length;u++)dump("operator_variant_handler launcher, buildApnSettings, apnSettings["+u+"] = "+JSON.stringify(r[u]));navigator.hasFeature("device.capability.cdma_apn.feature").then(function(e){e?t.buildAllApnSettings().then(function(e){t.saveDefaultApnSettings(r,e)}):t.buildPreferredApnSettings(r)})},resetDefaultApnSettings:function(e){var t=this,n=window.navigator.mozSettings.createLock(),i=n.get("ril.data.default.apnSettings");i.onsuccess=function(){var r=i.result["ril.data.default.apnSettings"];r&&Array.isArray(r)||(r=[[],[]]),r[t._iccCardIndex]=e,n.set({"ril.data.default.apnSettings":r})}},buildPreferredApnSettings:function(e){var t=this;this.resetCpApns();var n=window.navigator.mozSettings,i=n.createLock(),r=i.get("ril.data.dm.apnSettings");r.onsuccess=function(){var n=r.result["ril.data.dm.apnSettings"];n&&Array.isArray(n)||(n=[[],[]]),n[t._iccCardIndex]=e,i.set({"ril.data.dm.apnSettings":n,"apn.selections":null}),t.resetDefaultApnSettings(e)}.bind(this)},resetCpApns:function(){var e=this,t=window.navigator.mozSettings,n=t.createLock(),i=n.get("ril.data.cp.apns");i.onsuccess=function(){var t=i.result["ril.data.cp.apns"];t&&Array.isArray(t)||(t=[{},{}]),t[e._iccCardIndex]={},n.set({"ril.data.cp.apns":t})}.bind(this)},buildAllApnSettings:function(){var e=this;return new Promise(function(t,i){LazyLoader.getJSON(n).then(function(n){var i=e._iccSettings.mcc,r=e._iccSettings.mnc,a=ApnHelper.getAll(n,i,r),o=[],s=[];a.forEach(function(t){var n=e.clone(t);n.type.forEach(function(t){var i=e.clone(n);delete i.type,i.type=[],i.type.push(t),o.push(i)})}),s=e.convertApnSettings(o),t(s)})})},mergeAndKeepCustomApnSettings:function(e,t){var n=this.clone(t),i=Array.isArray(e)?e.filter(function(e){return"_custom_"===e.carrier}):[],r=new Set;i.forEach(function(e){e.types.forEach(function(e){r.add(e)})});var a=n.filter(function(e){return e.types=e.types.filter(function(e){return!r.has(e)}),!!e.types.length});return a=a.concat(i)},saveDefaultApnSettings:function(e,t){var n=this;this.resetCpApns();var i=window.navigator.mozSettings,r=i.createLock(),a=r.get("ril.data.dm.apnSettings");a.onsuccess=function(){var i=a.result["ril.data.dm.apnSettings"];i&&Array.isArray(i)||(i=[[],[]]);var o=i[n._iccCardIndex],s=n.mergeAndKeepCustomApnSettings(o,e),u=[[],[]];u[n._iccCardIndex]=t,u[1^n._iccCardIndex]=i[1^n._iccCardIndex],i[n._iccCardIndex]=s,r.set({"ril.data.dm.apnSettings":u,"apn.selections":null}),n.resetDefaultApnSettings(s)}}},e.OperatorVariantHandler_launcher=t}(window)},function(e,t){"use strict";function n(e){return"A"}function i(e){return e>=0&&e<32?e+64:e>=32&&e<96?e-32:e}function r(e,t){var n=[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,23311120],r=106,a=[];a.add=function(e){var t=n[e];0===this.length?this.check=e:this.check=this.check+e*this.length,this.push(t||"UNDEFINED:"+e+"->"+t)},a.add(38+t.charCodeAt(0));for(var o=0;o<e.length;o++){var s=e.charCodeAt(o),u=i(s);if(isNaN(u)||u<0||u>106)throw new Error("Unrecognized character ("+s+") at position "+o+" in code '"+e+"'.");a.add(u)}return a.push(n[a.check%103],n[r]),a}function a(e){for(var t=[],n=0;n<e.length;n+=2)t.push('<div class="bar'+e.charAt(n)+" space"+e.charAt(n+1)+'"></div>');return t.join("")}function o(e,t){return arguments.length<2&&(t=n(e)),a(r(e,t).join(""))}Object.defineProperty(t,"__esModule",{value:!0});var s={code128:o};t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=i(l),f=n(5),d=i(f),p=n(35),h=i(p),m=n(10),g=i(m),v=n(2),y=i(v),b=n(269),w=i(b);n(299);var S=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.name="QRFace",n.initFocus=[0,0],n.state={focus:n.initFocus},y.default.register("show",n),y.default.register("hide",n),y.default.register("isShown",n),n.onFocus=n.onFocus.bind(n),n.onKeyDown=n.onKeyDown.bind(n);var i=[].concat(r(navigator.mozMobileConnections)).map(function(e,t){return e.getDeviceIdentities().then(function(e){if(e.imei)return e.imei+"/"+parseInt(e.imeisv,16);var n="Could not retrieve the "+"imei".toUpperCase()+" code for SIM "+t;return Promise.reject(new Error(n))})});return Promise.all(i).then(function(e){2==e.length?(document.getElementById("qrtitleone").innerHTML="imei".toUpperCase()+"/SV number",document.getElementById("qrnumberone").innerHTML=e[0],document.getElementById("qrimageone").innerHTML=w.default.code128(e[0].substr(0,15),"A"),document.getElementById("qrtitleone").classList.add("titleqrone"),document.getElementById("qrtitletwo").innerHTML="imei".toUpperCase()+"/SV number",document.getElementById("qrnumbertwo").innerHTML=e[1],document.getElementById("qrimagetwo").innerHTML=w.default.code128(e[1].substr(0,15),"A"),document.getElementById("qrtitletwo").classList.add("titleqrtwo")):(document.getElementById("qrtitleone").classList.add("hidden"),document.getElementById("qrnumberone").classList.add("hidden"),document.getElementById("qrimageone").classList.add("hidden"),document.getElementById("qrtitletwo").innerHTML="imei".toUpperCase()+"/SV number",document.getElementById("qrnumbertwo").innerHTML=e[0],document.getElementById("qrimagetwo").innerHTML=w.default.code128(e[0].substr(0,15),"A"),document.getElementById("qrtitletwo").classList.add("titleqr"))}),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){y.default.register("show",this),y.default.register("hide",this),y.default.register("isShown",this),this.updateSoftKeys(),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}},{key:"onFocus",value:function(){return this.element===document.activeElement?void this.updateSoftKeys():(this.element.focus(),void this.updateSoftKeys())}},{key:"focusIfPossible",value:function(){!this.element.contains(document.activeElement)}},{key:"updateSoftKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:"",center:"ok",right:""};g.default.register(e,this.element)}},{key:"onKeyDown",value:function(e){switch(e.key){case"EndCall":case"BrowserBack":case"Backspace":case"Enter":e.stopPropagation(),e.preventDefault(),this.hide();break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"*":case"#":e.stopPropagation(),e.preventDefault()}}},{key:"changeMyState",value:function(){this.setState({focus:[0,2]})}},{key:"show",value:function(){return y.default.query("QRFace.isShown",this)?void this.focus():void(this.isHidden()&&(y.default.request("openSheet","qrface"),this.isShown=!0,this.element.focus()))}},{key:"isHidden",value:function(){for(var e=this.element;e!==document.body&&!e.classList.contains("hidden")&&"closed"!==e.dataset.transitionState;)e=e.parentElement;return e.classList.contains("hidden")||"closed"===e.dataset.transitionState}},{key:"hide",value:function(){y.default.request("closeSheet","qrface"),this.isShown=!1}},{key:"focus",value:function(){this.element.focus()}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{tabIndex:"-1",className:"qrcode-input",onFocus:this.onFocus,onKeyDown:this.onKeyDown,ref:function(t){e.element=t}},c.default.createElement("div",{id:"qrtitleone"}),c.default.createElement("div",{className:"numberqr",id:"qrnumberone"}),c.default.createElement("div",{className:"container"},c.default.createElement("div",{className:"barcode",id:"qrimageone"})),c.default.createElement("div",{id:"qrtitletwo"}),c.default.createElement("div",{className:"numberqr",id:"qrnumbertwo"}),c.default.createElement("div",{className:"container"},c.default.createElement("div",{className:"barcode",id:"qrimagetwo"})))}}]),t}(d.default);t.default=(0,h.default)(S,"immediate","immediate")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return o.default.createElement("div",{tabIndex:"-1",role:"menuitem",className:"sidemenuItem "+(e.hasNotices?"has-notices":""),"data-index":e.index,ref:e.domRef,"data-total":e.total,onClick:function(){return(0,u.launch)(e.item)}},o.default.createElement("div",{className:"sidemenuItem__icon",ref:e.noticeIndicatorRef,style:{backgroundImage:"url('"+e.item.icon_url+"')"}},o.default.createElement("div",{className:"app__notices",onAnimationEnd:e.handleAnimationEnd})),o.default.createElement("div",{className:"sidemenuItem__name"},(0,s.unescapeNumericHTMLEntities)(e.item.displayName)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=i(a),s=n(84),u=n(51);t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(52),f=i(c),d=n(5),p=i(d),h=n(10),m=i(h),g=n(2),v=i(g),y=n(271),b=i(y),w=n(31),S=i(w),_=n(28),k=i(_),L=n(77),E=i(L),O=n(32),I=n(75),A=n(246),C=i(A),T=n(244),M=i(T),R=n(33),P=i(R);n(285);var N=n(130),x=C.default[0].origin,U=C.default[1].origin,j=(0,E.default)(b.default),D={name:"KaiOS-Store",origin:"app://kaios-plus.kaiostech.com"},F={name:"Browser",manifestURL:"app://search.gaiamobile.org/manifest.webapp"},B=function(e){return e.enabled&&"invisible"!==e.role},z=[],q=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Sidemenu",n.isActive=!1,n.sidemenuItems=[],n.isShowAllApp=!1,n.getForceSettingsEnd=function(e){if(e&&!z.length){var t="";t=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),dump("sidemenu:setDefaultConfig skuid: "+t),"62GMX"===t||"62HMX"===t?(dump("sidemenu:setDefaultConfig skuid for AMX"),z=e[P.default[2]]||M.default):z=e[P.default[2]]||C.default,n.isShowAllApp=e[P.default[7]]||!1}},n.unloadHandler=function(){window.removeEventListener("unload",n.unloadHandler),m.default.unregister(n.element)},n.generateItems=function(){var e=z,t="";t=navigator.engmodeExtension.getPropertyValue("ro.boot.skuid"),"62GMX"!==t&&"62HMX"!==t&&"0"==AppStore.customApps&&(e=A.chinaSideApps);var i=e.map(function(e){var t=(0,O.findItemByProps)(AppStore.apps,e);if(t)n.isShowAllApp||t.origin&&t.origin===D.origin||t.manifestURL&&t.manifestURL===F.manifestURL?t.isInSidemenu=!1:t.isInSidemenu=!1;else if(!t){if(e.origin===x)return(0,O.findItemByProps)(AppStore.apps,D);if(e.origin===U)return(0,O.findItemByProps)(AppStore.apps,F)}return t?B(t)&&t:t}).filter(function(e){return!(0,N.shouldHideinSideMenu)(e)});n.setState({items:i});var r=i.length,a=i.findIndex(function(e){return"app://assistant.google.com"===e.origin}),o=a!==-1?a:2;n.entryIndex=Math.min(o,r-1),n.isActive&&(0===r?n.exit():n.state.currentIndex+1>r?n.focusItem(r-1):n.focusItem(n.state.currentIndex))},n.onKeyDown=function(e){switch(e.key){case"Enter":if(v.default.query("LaunchStore.isLaunching"))return;k.default.refreshLaunchStateTimer(),k.default.isLaunching=!0,document.activeElement.click(),requestAnimationFrame(function(){n.exit(),v.default.request("MainView:forcedRefresh"),v.default.request("Clock:forcedRefresh")});break;case"SoftRight":if(!I.appState.get("uninstalling")&&!v.default.query("LaunchStore.isLaunching")&&n.isCurrentItemUninstallable){var t=[{id:"uninstall",callback:function(){n.focusItem(n.state.currentIndex);var e=n.state.items[n.state.currentIndex];(0,I.uninstallMozApp)(e.mozApp,e.displayName)}}];v.default.request("showOptionMenu",{options:t})}break;case"ArrowDown":var i=n.state.items.length;n.focusItem(Math.min(i-1,n.state.currentIndex+1));break;case"ArrowUp":n.focusItem(Math.max(0,n.state.currentIndex-1));break;case"ArrowRight":case"Backspace":case"EndCall":n.exit()}},n.state={items:[],currentIndex:0},AppStore.on("change",(0,f.default)(n.generateItems,1e3)),v.default.registerState("itemCount",n),emitter.on("getForceSettingsEnd",n.getForceSettingsEnd),n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){v.default.register("focus",this),m.default.register({left:"",center:"select",right:""},this.element),window.addEventListener("unload",this.unloadHandler)}},{key:"componentDidUpdate",value:function(){I.appState.get("uninstalling")&&I.appState.set("uninstalling",!1),m.default.register({left:"",center:"select",right:this.isCurrentItemUninstallable?"options":""},this.element)}},{key:"clearDefaultItemStatus",value:function(){z.forEach(function(e){var t=(0,O.findItemByProps)(AppStore.apps,e);t&&t.isInSidemenu&&(t.isInSidemenu=!1)})}},{key:"focusItem",value:function(e){this.setState({currentIndex:e}),this.sidemenuItems[e]&&this.sidemenuItems[e].focus()}},{key:"focus",value:function(){this.element.style.setProperty("display","block"),this.sidemenuItems?this.focusItem(this.entryIndex):this.element.focus(),this.isActive=!0}},{key:"exit",value:function(){this.isActive=!1,this.element.style.setProperty("display","none"),v.default.request("closeSheet","sidemenu")}},{key:"render",value:function(){var e=this;return this.sidemenuItems=[],l.default.createElement("div",{id:"Sidemenu",className:"Sidemenu",tabIndex:"-1",onKeyDown:this.onKeyDown,ref:function(t){e.element=t}},this.state.items.map(function(t,n){return l.default.createElement(j,{key:t.uid,index:n-e.state.currentIndex,manifestURL:t.manifestURL,domRef:function(t){e.sidemenuItems[n]=t},item:t,viewMode:"sideMenu",total:e.state.items.length})}))}},{key:"itemCount",get:function(){return this.state.items.length}},{key:"isCurrentItemUninstallable",get:function(){var e=this.state,t=e.items,n=e.currentIndex;return t.length>0&&t[n]&&t[n].removable&&t[n].type===S.default.MozApp}}]),t}(p.default);t.default=q},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(3),l=i(u),c=n(5),f=i(c),d=n(12),p=i(d),h=n(2),m=i(h);n(300);var g=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.simCardsName={},n.MAX_NAME_LENGTH=22,n.state={isVoWifi:!1,isAirplaneMode:!1,cardInfos:[]},n.simStatus=[],n.mainSimCardIndex=0,n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this._initCardInfos(),p.default.addObserver("airplaneMode.enabled",this),p.default.addObserver("custom.simcards.name",this),p.default.addObserver("ril.data.defaultServiceId",this),m.default.registerState("simStatus",this),m.default.registerState("mainSimCardIndex",this)}},{key:"componentWillUnmount",value:function(){var e=this;p.default.removeObserver("airplaneMode.enabled",this),p.default.removeObserver("custom.simcards.name",this),p.default.removeObserver("ril.data.defaultServiceId",this),m.default.unregisterState("simStatus",this),m.default.unregisterState("mainSimCardIndex",this);var t=navigator.mozMobileConnections;t&&Array.from(t).forEach(function(t,n){t.removeEventListener("datachange",e),t.removeEventListener("voicechange",e),t.removeEventListener("signalstrengthchange",e);var i=t.imsHandler;i&&i.removeEventListener("capabilitychange",e)})}},{key:"_observe_custom.simcards.name",value:function(e){this.simCardsName=e||{},this._updateCardInfos()}},{key:"_observe_airplaneMode.enabled",value:function(e){this.setState({isAirplaneMode:e})}},{key:"_observe_ril.data.defaultServiceId",value:function(e){this.mainSimCardIndex=e}},{key:"_handle_simslotready",value:function(){window.removeEventListener("simslotready",this),this._initCardInfos()}},{key:"_handle_datachange",value:function(){this._updateCardInfos()}},{key:"_handle_voicechange",value:function(){this._updateCardInfos()}},{key:"_handle_capabilitychange",value:function(){this._updateCardInfos()}},{key:"_handle_signalstrengthchange",value:function(){this._updateCardInfos()}},{key:"_initCardInfos",value:function(){var e=this,t=navigator.mozMobileConnections;t&&(Array.from(t).forEach(function(t,n){t.addEventListener("datachange",e),t.addEventListener("voicechange",e),t.addEventListener("signalstrengthchange",e);var i=t.imsHandler;i&&i.addEventListener("capabilitychange",e)}),SIMSlotManager.ready||window.addEventListener("simslotready",this),this._updateCardInfos())}},{key:"_updateCardInfos",value:function(){var e=this,t=navigator.mozSettings.createLock().get("language.current");t.onsuccess=function(){var n=t.result["language.current"];e._updateCardInfosImpl(n)}}},{key:"_updateCardInfosImpl",value:function(e){var t=navigator.mozMobileConnections;if(t){var n=!1,i=!1,r=[],a=window.SIMSlotManager.getSlots();Array.from(t).forEach(function(t,o){var s=!t.iccId,u=0;(!s&&t.voice.connected||t.data&&"registered"===t.data.state)&&(u=t.signalStrength?t.signalStrength.level+1:Math.ceil(t.voice.relSignalStrength/20));var l=void 0,c=void 0,f=t.data,d=void 0,p=t.voice?t.voice:t.data,h=t.imsHandler,m=!!h&&("voice-over-wifi"===h.capability||"video-over-wifi"===h.capability);t.voice&&t.voice.connected?d=t.voice.network:f&&"registered"===f.state&&(d=t.data.network);var g=!(!navigator.mozTelephony||!navigator.mozTelephony.active),v=t.voice&&t.voice.connected,y=t.data&&t.data.connected,b=s?"absent":a[o].getCardState();if(t&&t.voice&&t.voice.network&&"460"==t.voice.network.mcc?l=OperatorName.userCNOperatorStatus(t,u,g,v,y):t&&t.voice&&t.voice.network&&"505"==t.voice.network.mcc||1==o&&n?(l=OperatorName.userAUOperatorStatus(t,b,u,g,v,y),n=!0):t&&t.voice&&t.voice.network&&"530"==t.voice.network.mcc?(l=OperatorName.userNZOperatorStatus(t,u,g,v,y),i=!0):s?l="noSimCard":"ready"!==a[o].getCardState()?l="lockedSim":"searching"===p.state?l="searching":d||m?dump("homescreen, network well, operator:"+(d?d.longName:"null")):l="noService",m){var w=t.iccId,S=navigator.mozIccManager.getIccById(w),_=S?S.iccInfo:null;_&&_.isDisplaySpnRequired&&_.spn&&(c=_.spn),dump("homescreen, isVoWifi, carrierName:"+c)}c=OperatorName.userOperatorName(t,e)||c,dump("homescreen,simstatus,index:"+o+",signalLevel:"+u+", stateL10nId:"+l+", carrierName:"+c),r.push({signalLevel:u,carrierName:c,stateL10nId:l,isVoWifi:m})}),this.simStatus=r,this.setState({cardInfos:r}),emitter.emit("simInfoUpdate")}}},{key:"getScrollString",value:function(e){var t=void 0;if(e.carrierName&&e.carrierName.length>this.MAX_NAME_LENGTH)t=e.carrierName;else if(e.stateL10nId){var n=navigator.mozL10n.get(e.stateL10nId);n.length>this.MAX_NAME_LENGTH&&(t=n)}return t}},{key:"isAuMccWithSim",value:function(){for(var e=0;e<navigator.mozMobileConnections.length;e++){var t=navigator.mozMobileConnections[e].iccId;if(t){var n=navigator.mozIccManager.getIccById(t),i=n.iccInfo.mcc,r=n.iccInfo.mnc;if("505"==i&&("03"==r||"07"==r))return!0}}return!1}},{key:"is3UKWithSim",value:function(){for(var e=0;e<navigator.mozMobileConnections.length;e++){var t=navigator.mozMobileConnections[e].iccId;if(t){var n=navigator.mozIccManager.getIccById(t),i=n.iccInfo.mcc;if("234"==i||"235"==i||"272"==i)return!0}}return!1}},{key:"render",value:function(){var e=this;if(!window.SIMSlotManager.isMultiSIM())return null;var t=this.isAuMccWithSim(),n=this.is3UKWithSim();if(this.state.isAirplaneMode){var i=this.state.cardInfos.map(function(e,t){return!!e.isVoWifi&&l.default.createElement("div",null,l.default.createElement("span",{className:"sim-name"},e.carrierName),l.default.createElement("i",{"data-icon":"sim-"+(t+1)}))}),r=l.default.createElement("span",{"data-l10n-id":"airplaneMode"});return l.default.createElement("div",{className:"sim-card-status airplane-mode"},l.default.createElement("div",{className:"sim-card"},i[0]||i[1]?i:r))}var a=this.state.cardInfos.map(function(i,r){var a=l.default.createElement("div",{className:"sim-icon exist-signal","data-index":""+(r+1),"data-is-searching":"searching"===i.stateL10nId},l.default.createElement("i",{className:"icon-signal","data-icon":"signal-"+i.signalLevel}),l.default.createElement("i",{className:"icon-bg","data-icon":"signal-5"})),o=l.default.createElement("div",{className:"sim-icon"},l.default.createElement("i",{className:"icon-nosim","data-icon":"sim-"+(r+1)}),l.default.createElement("i",{className:"icon-signal","data-icon":"signal-0"})),s=l.default.createElement("div",{className:"sim-icon"}),u=e.getScrollString(i),c=SIMSlotManager.isSIMCardAbsent(r)?"text inactive":"text",f=c+" needscroll",d=l.default.createElement("div",{className:"sim-name secondary"},l.default.createElement("span",{className:c,"data-l10n-id":i.stateL10nId},i.carrierName)),p=l.default.createElement("div",{className:"carrier-name secondary"},l.default.createElement("span",{className:f},u));return l.default.createElement("div",{className:"sim-card"},u?p:d,t||n?s:["noSimCard","nocard-eccOnly","nocard-noservice"].includes(i.stateL10nId)?o:a)});return l.default.createElement("div",{className:"sim-card-status",dir:"ltr"},a)}}]),t}(f.default);t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(5),l=i(u),c=n(134),f=i(c),d=n(12),p=i(d),h=function(e){function t(){var e,n,i,o;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.SIZE=9,i.contacts=[],i.voicemailNumber=null,o=n,a(i,o)}return o(t,e),s(t,[{key:"start",value:function(){this.fetch(),this.getCustomSpeedDials(),p.default.addObserver("ril.iccInfo.mbdn",this),navigator.mozContacts.addEventListener("speeddialchange",this.fetch.bind(this)),navigator.mozContacts.addEventListener("contactchange",this.fetch.bind(this))}},{key:"_observe_ril.iccInfo.mbdn",value:function(e){this["ril.iccInfo.mbdn"]=e,e=(Array.isArray(e)?e[0]:e)||navigator.mozVoicemail&&navigator.mozVoicemail.getNumber(0),this.voicemailNumber=e,this.contacts[0].tel=e,this.emit("changed")}},{key:"getCustomSpeedDials",value:function(){var e=this;
p.default.get("custom.speeddials").then(function(t){t&&(e.customSpeedDials=t,e.fillCustomSpeedDials(t),e.emit("changed"))})}},{key:"fillCustomSpeedDials",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(t){var n=parseInt(t.key,10);e.contacts[n-1]={dial:n,editable:!1,tel:t.tel,name:t.name,id:"customsd"}})}},{key:"fetch",value:function(){var e=this;this.initData(),this.fillCustomSpeedDials(this.customSpeedDials),navigator.mozContacts.getSpeedDials().then(function(t){e.parse(t)})}},{key:"set",value:function(e,t,n){navigator.mozContacts.setSpeedDial(e,t,n).onerror=function(e){}}},{key:"remove",value:function(e){navigator.mozContacts.removeSpeedDial(e).onerror=function(e){}}},{key:"initData",value:function(){this.contacts=Array(this.SIZE).fill(null).map(function(e,t){return{dial:t+1,editable:!0}}),Object.assign(this.contacts[0],{tel:this.voicemailNumber,editable:!1,voicemail:!0,name:"voicemail",id:"voicemail"})}},{key:"parse",value:function(e){var t=this,n=e.map(function(e){return new Promise(function(n){if(!e.contactId){var i=parseInt(e.speedDial,10);return Object.assign(t.contacts[i-1],{dial:i,tel:e.tel}),void n()}f.default.findById(e.contactId,function(i){if(!(i instanceof window.mozContact))return void n();var r=void 0;i.photo&&i.photo.length&&(r=window.URL.createObjectURL(i.photo[0]));var a=parseInt(e.speedDial,10);Object.assign(t.contacts[a-1],{id:e.contactId,name:i.name&&i.name[0],photo:r,dial:a,tel:e.tel}),n()})})},this);Promise.all(n).then(function(){t.emit("changed")})}}]),t}(l.default),m=new h;m.start(),t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return e?e.includes(t)?c.default.createElement("div",null,(0,b.insertBetween)(e.split(t),n)):e:""}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(3),c=i(l),f=n(5),d=i(f),p=n(10),h=i(p),m=n(2),g=i(m),v=n(80),y=i(v),b=n(9);n(286);var w="tutorial-has-viewed",S=[{enabled:!1},{enabled:!0},{enabled:!1},{enabled:!0},{enabled:!0},{enabled:!0}],_=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="Tutorial",n.unloadHandler=function(){window.removeEventListener("unload",n.unloadHandler),h.default.unregister(n.element)},n.onKeyDown=function(e){if(n.tutorialReady)switch(e.key){case"SoftRight":n.state.step<S.length&&n.next();break;case"SoftLeft":2!==n.state.step&&n.perv();break;default:e.preventDefault(),e.stopPropagation()}},n.onKeyUp=function(e){if(n.tutorialReady)switch(e.key){case"Enter":n.state.step===S.length&&2!==n.state.step&&n.exit();break;default:e.preventDefault(),e.stopPropagation()}},n.state={l10n:{},hasViewed:!0,step:0},n.tutorialReady=!1,g.default.register("focus",n),g.default.registerState("hasViewed",n),g.default.register("updateDefaultTutorial",n),navigator.mozL10n.ready(function(){n.setState({l10n:{step1:(0,b.toL10n)("tutorial-for-side-menu-1"),step2:(0,b.toL10n)("tutorial-for-instant-settings-1"),step3:(0,b.toL10n)("tutorial-for-notices"),step4:(0,b.toL10n)("tutorial-for-google-assistant-1"),step5:(0,b.toL10n)("tutorial-for-voice-input-1"),step6:(0,b.toL10n)("tutorial-for-find-kaistore-2")}})}),n}return o(t,e),u(t,[{key:"componentDidMount",value:function(){window.addEventListener("unload",this.unloadHandler),this.updateSoftKeys()}},{key:"componentDidUpdate",value:function(){this.updateSoftKeys()}},{key:"updateDefaultTutorial",value:function(e){e&&e.length&&(S=e),this.tutorialReady=!0}},{key:"updateSoftKeys",value:function(){var e=null;e=this.state.step>=S.length?{left:"back",center:"ok",right:""}:2===this.state.step?{left:"",center:"",right:"next"}:{left:"back",center:"",right:"next"},h.default.register(e,this.element)}},{key:"focus",value:function(){this.state.hasViewed||(this.element.focus(),this.setState({step:2}))}},{key:"exit",value:function(){g.default.request("closeSheet","tutorial"),this.setState({hasViewed:!0,step:0}),this.setLocalStorage(w,"v0.2"),g.default.unregister("focus",this),g.default.unregisterState("hasViewed",this)}},{key:"perv",value:function(){this.setState(function(e){var t=S.map(function(t,n){return!!(n+1<e.step&&t.enabled)&&n+1}).filter(Boolean);return{step:t[t.length-1]}})}},{key:"next",value:function(){var e=this;this.setState(function(e){return{step:S.findIndex(function(t,n){return n+1>e.step&&t.enabled})+1}},function(){4!==e.state.step||localStorage.getItem("experienceRemind")||(y.default.updateStateTime(),e.setLocalStorage("experienceRemind",{time:Date.now(),times:1})),0===e.state.step&&e.exit()})}},{key:"setLocalStorage",value:function(e,t){try{localStorage.setItem(e,"string"==typeof t?t:JSON.stringify(t))}catch(n){}}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{id:"Tutorial",className:"Tutorial",tabIndex:"-1","data-has-viewed":this.state.hasViewed,"data-step":this.state.step,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,ref:function(t){e.element=t}},c.default.createElement("div",{className:"Tutorial__step Tutorial__step--1"},c.default.createElement("div",{className:"Tutorial__fingertip"}),c.default.createElement("div",{className:"Tutorial__text"},s(this.state.l10n.step1,"{{ left }}",c.default.createElement("span",{className:"Tutorial__capital"},(0,b.toL10n)("tutorial-for-left"))))),c.default.createElement("div",{className:"Tutorial__step Tutorial__step--2"},c.default.createElement("div",{className:"Tutorial__fingertip"}),c.default.createElement("div",{className:"Tutorial__text"},s(this.state.l10n.step2,"{{ up }}",c.default.createElement("span",{className:"Tutorial__capital"},(0,b.toL10n)("tutorial-for-up"))))),c.default.createElement("div",{className:"Tutorial__step Tutorial__step--3"},c.default.createElement("div",{className:"Tutorial__fingertip"}),c.default.createElement("div",{className:"Tutorial__text"},this.state.l10n.step3)),c.default.createElement("div",{className:"Tutorial__step Tutorial__step--4"},c.default.createElement("div",{className:"Tutorial__fingertip"}),c.default.createElement("div",{className:"Tutorial__text"},s(this.state.l10n.step4,"{{ microphone }}",c.default.createElement("span",{className:"Tutorial__capital"},(0,b.toL10n)("ok"))))),c.default.createElement("div",{className:"Tutorial__step Tutorial__step--5"},c.default.createElement("div",{className:"Tutorial__fingertip"}),c.default.createElement("div",{className:"Tutorial__text"},s(this.state.l10n.step5,"{{ microphone }}",c.default.createElement("span",{className:"Tutorial__capital"},(0,b.toL10n)("ok"))))),c.default.createElement("div",{className:"Tutorial__step Tutorial__step--6"},c.default.createElement("div",{className:"Tutorial__text"},this.state.l10n.step6)))}},{key:"hasViewed",get:function(){return this.state.hasViewed}}]),t}(d.default);t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(19),l=i(u),c=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="FlashlightHelper",n.init=function(e){e.addEventListener("flashlightchange",n),n.flashlightManager=e,n.emit("ready",e.flashlightEnabled)},navigator.getFlashlightManager&&navigator.hasFeature&&navigator.hasFeature("device.capability.torch").then(function(e){n.capability=e,navigator.getFlashlightManager().then(n.init)}),n}return o(t,e),s(t,[{key:"_handle_flashlightchange",value:function(){this.emit("change",this.flashlightManager.flashlightEnabled)}},{key:"toggle",value:function(){this.flashlightManager.flashlightEnabled=!this.flashlightManager.flashlightEnabled}}]),t}(l.default);t.default=new c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(33),s=i(o),u=function(){function e(){r(this,e),this.settings={},this.returnValueNum=0}return a(e,[{key:"getSettings",value:function(){var e=this;return new Promise(function(t){var n=navigator.mozSettings.createLock();s.default.forEach(function(i){n.get(i).then(function(n){e.returnValueNum++,e.settings=Object.assign(e.settings,n),e.returnValueNum===s.default.length&&t(e.settings)})}),n.forceClose&&n.forceClose()})}}]),e}();t.default=new u},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this.shouldFallback=this.fallback}return i(e,[{key:"isOnlineNetworkType",value:function(e){return"cellular"===e||"wifi"===e}},{key:"addEventListeners",value:function(){var e=this;dump("network-helper.js from launcher, shouldFallback:"+this.shouldFallback),this.shouldFallback?(window.addEventListener("online",function(){e.onNetworkStatusChange(!0)}),window.addEventListener("offline",function(){e.onNetworkStatusChange(!1)})):window.navigator.connection.ontypechange=function(t){dump("network-helper.js from launcher, conn type:"+t.target.type);var n=e.isOnlineNetworkType(t.target.type);e.onNetworkStatusChange(n)}}},{key:"onNetworkStatusChange",value:function(e){var t=new CustomEvent("networkstatuschange",{detail:{online:e}});window.dispatchEvent(t)}},{key:"online",get:function(){if(this.shouldFallback)return navigator.onLine;var e=navigator.connection.type;return this.isOnlineNetworkType(e)}},{key:"fallback",get:function(){return!("connection"in navigator&&navigator.connection.type)}}]),e}(),a=new r;t.default=a},,140,140,,,,140,140,140,140,140,140,140,140,140,,140,140,140,140,140,140,,,,function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){}]);
//# sourceMappingURL=app.bundle.js.map