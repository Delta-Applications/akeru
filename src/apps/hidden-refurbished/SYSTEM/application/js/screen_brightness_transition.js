'use strict';(function(exports){var ScreenBrightnessTransition=function ScreenBrightnessTransition(){this.isRunning=false;this._timer=undefined;};ScreenBrightnessTransition.prototype.STEP_INTERVAL_MS=20;ScreenBrightnessTransition.prototype.STEP_DELTA=0.01;ScreenBrightnessTransition.prototype.onsuccess=null;ScreenBrightnessTransition.prototype.transitionTo=function(brightness){if(this.isRunning){throw new Error('ScreenBrightnessTransition: '+'transitionTo() is called again during transition.');}
this.isRunning=true;var currentBrightness=navigator.mozPower.screenBrightness;this._timer=setInterval(function brightnessTransitionTick(){var delta=this.STEP_DELTA*((currentBrightness>brightness)?-1:1);currentBrightness+=delta;if((delta<0&&currentBrightness<brightness)||(delta>0&&currentBrightness>brightness)){navigator.mozPower.screenBrightness=brightness;clearTimeout(this._timer);this.isRunning=false;if(typeof this.onsuccess==='function'){this.onsuccess();}
return;}else{navigator.mozPower.screenBrightness=currentBrightness;}}.bind(this),this.STEP_INTERVAL_MS);};ScreenBrightnessTransition.prototype.abort=function(){if(!this.isRunning){throw new Error('ScreenBrightnessTransition: '+'abort() is called but it is not currently in transition.');}
clearTimeout(this._timer);this.isRunning=false;};exports.ScreenBrightnessTransition=ScreenBrightnessTransition;}(window));