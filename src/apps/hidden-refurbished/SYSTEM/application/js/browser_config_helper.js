'use strict';(function(window){var isOutOfProcessDisabled=false;window.BrowserConfigHelper=function(config,eventType){if(eventType==='webapps-launch'&&config.manifestURL.includes('app://search')){var homepageUrl=browserSettings.getHomepageUrl();if(homepageUrl!==''){this.homepageUrl=config.url=homepageUrl;config.manifestURL=null;}}
var app=config.manifestURL&&applications.getByManifestURL(config.manifestURL);this.url=config.url;var name='';if(app){var manifest=app.manifest;name=new ManifestHelper(manifest).name;var origin=app.origin;var entryPoints=manifest.entry_points;if(entryPoints&&manifest.type=='certified'){manifest=JSON.parse(JSON.stringify(manifest));var givenPath=this.url.substr(origin.length);for(var ep in entryPoints){var currentEp=entryPoints[ep];var path=givenPath;if(path.indexOf('?')!=-1){path=path.substr(0,path.indexOf('?'));}
if(path.indexOf('/'+ep)===0&&(currentEp.launch_path===path)){origin=origin+currentEp.launch_path;name=new ManifestHelper(currentEp).name;for(var key in currentEp){if(key!=='locale'&&key!=='name'){manifest[key]=currentEp[key];}}}}}
var host=document.location.host;var domain=host.replace(/(^[\w\d]+\.)?([\w\d]+\.[a-z]+)/,'$2');var protocol=document.location.protocol+'//';var browserManifestUrl=protocol+'browser.'+domain+'/manifest.webapp';var loopbackManifestUrl=protocol+'loopback-test.'+domain+'/manifest.webapp';var outOfProcessBlackList=[loopbackManifestUrl,browserManifestUrl];if(Service.query('isLowMemoryDevice')){var launcherManifestUrl=protocol+'launcher.'+domain+'/manifest.webapp';var musicManifestUrl=protocol+'music.'+domain+'/manifest.webapp';outOfProcessBlackList.push(launcherManifestUrl);outOfProcessBlackList.push(musicManifestUrl);}
if(!isOutOfProcessDisabled&&outOfProcessBlackList.indexOf(config.manifestURL)===-1){this.oop=true;}
this.name=name;this.manifestURL=config.manifestURL;this.origin=origin;this.manifest=manifest;}else{this.iframe=config.iframe;this.name=config.name||'';this.origin=config.url;this.manifestURL='';this.manifest=null;}};})(this);