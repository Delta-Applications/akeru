'use strict';(function(exports){var AttentionWindow=function AttentionWindow(config){this.reConfig(config);this.render();if(this._DEBUG){AttentionWindow[this.instanceID]=this;}
this.makeNotification();var detail={type:'launch',manifestURL:config.manifestURL};var evt=new CustomEvent('systemattention',{detail:detail});window.ExternalScreenManager.send(evt);this.publish('created');};AttentionWindow.prototype=Object.create(AppWindow.prototype);AttentionWindow.prototype.constructor=AttentionWindow;AttentionWindow.prototype.eventPrefix='attention';AttentionWindow.prototype.CLASS_NAME='AttentionWindow';AttentionWindow.prototype.CLASS_LIST='appWindow attentionWindow';AttentionWindow.prototype.HIERARCHY_MANAGER='AttentionWindowManager';AttentionWindow.prototype._DEBUG=false;AttentionWindow.prototype.closedHeight=40;AttentionWindow.prototype.openAnimation='immediate';AttentionWindow.prototype.closeAnimation='reduce';AttentionWindow.prototype.isAttentionWindow=false;AttentionWindow.prototype.view=function attw_view(){this.debug('intance id: '+this.instanceID);return`<div class="${this.CLASS_LIST}" id="${this.instanceID}">
            <div class="browser-container"></div>
            <div class="screenshot-overlay"></div>
            </div>`;};AttentionWindow.SUB_COMPONENTS={'transitionController':window.AppTransitionController,'modalDialog':window.AppModalDialog,'authDialog':window.AppAuthenticationDialog,'statusbar':window.AppStatusbar,'childWindowFactory':window.ChildWindowFactory};AttentionWindow.REGISTERED_EVENTS=['mozbrowserclose','mozbrowsererror','mozbrowservisibilitychange','mozbrowserloadend','mozbrowserloadstart','_localized','click','_willdestroy','_languagechange'];AttentionWindow.prototype.render=function attw_render(){this.publish('willrender');this.containerElement.insertAdjacentHTML('beforeend',this.view());this.browser={element:this.config.iframe};this.element=document.getElementById(this.instanceID);this.element.classList.add('statusbar-overlapped');this.browserContainer=this.element.querySelector('.browser-container');this.browserContainer.insertBefore(this.browser.element,null);this.frame=this.element;this.iframe=this.browser.element;this.screenshotOverlay=this.element.querySelector('.screenshot-overlay');this._registerEvents();this.installSubComponents();this.publish('rendered');};AttentionWindow.prototype._handle_click=function attw__handle_click(evt){this.publish('will-become-active');this.requestOpen();};AttentionWindow.prototype.ready=function attw_ready(callback){if(!this.element){return;}
var self=this;if(!this.loaded){this.element.addEventListener('_loaded',function onLoaded(){self.element.removeEventListener('_loaded',onLoaded);setTimeout(callback);});}else{this.tryWaitForFullRepaint(function(){setTimeout(callback);});}};AttentionWindow.prototype.requestOpen=function(){this.element.classList.remove('fake-notification');this.element.classList.remove('notification-disappearing');AppWindow.prototype.requestOpen.apply(this);};AttentionWindow.prototype.makeNotification=function(){return;};AttentionWindow.prototype.translateNotification=function(){if(!this.notification){return;}
var manifest=this.manifest;var title=this.notificationTitle;navigator.mozL10n.once(function(){var helper=new ManifestHelper(manifest);title.textContent=helper.name;});};AttentionWindow.prototype.show=function(){if(this.notification){this.translateNotification();this.notification.style.display='block';}
this._resize();this.element.style.width='';AppWindow.prototype.show.call(this);};AttentionWindow.prototype.hide=function(){if(this.notification){this.notification.style.display='none';}
AppWindow.prototype.hide.call(this);};AttentionWindow.prototype.kill=function(evt){AppWindow.prototype.kill.call(this);var detail={type:'close',manifestURL:this.config.manifestURL};var evt=new CustomEvent('systemattention',{detail:detail});window.ExternalScreenManager.send(evt);};AttentionWindow.prototype._handle__willdestroy=function(){if(this.notification){this.notification.parentNode.removeChild(this.notification);this.notification=null;}};AttentionWindow.prototype._handle__languagechange=function(){this.translateNotification();};AttentionWindow.prototype.promote=function(){this.element&&this.element.classList.add('top-most');};AttentionWindow.prototype.demote=function(){this.element&&this.element.classList.remove('top-most');};AttentionWindow.prototype.containerElement=document.getElementById('windows');exports.AttentionWindow=AttentionWindow;}(window));