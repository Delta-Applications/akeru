!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(exports,e,n){t.o(exports,e)||Object.defineProperty(exports,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="dist/",t(t.s=203)}([function(e,exports,t){"use strict";function n(e,t,n,i,o,a,s,u){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,a,s,u],d=0;l=new Error(t.replace(/%s/g,function(){return c[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(e){};e.exports=n},function(e,exports,t){"use strict";var n=t(10),r=n;e.exports=r},function(e,exports,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var a,s,u=n(e),l=1;l<arguments.length;l++){a=Object(arguments[l]);for(var c in a)i.call(a,c)&&(u[c]=a[c]);if(r){s=r(a);for(var d=0;d<s.length;d++)o.call(a,s[d])&&(u[s[d]]=a[s[d]])}}return u}},function(e,exports,t){"use strict";e.exports=t(144)},function(e,exports,t){"use strict";function n(e){for(var t;t=e._renderedComponent;)e=t;return e}function r(e,t){var r=n(e);r._nativeNode=t,t[h]=r}function i(e){var t=e._nativeNode;t&&(delete t[h],e._nativeNode=null)}function o(e,t){if(!(e._flags&p.hasCachedChildNodes)){var i=e._renderedChildren,o=t.firstChild;e:for(var a in i)if(i.hasOwnProperty(a)){var s=i[a],u=n(s)._domID;if(null!=u){for(;null!==o;o=o.nextSibling)if(1===o.nodeType&&o.getAttribute(f)===String(u)||8===o.nodeType&&o.nodeValue===" react-text: "+u+" "||8===o.nodeType&&o.nodeValue===" react-empty: "+u+" "){r(s,o);continue e}d(!1)}}e._flags|=p.hasCachedChildNodes}}function a(e){if(e[h])return e[h];for(var t=[];!e[h];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[h]);e=t.pop())n=r,t.length&&o(r,e);return n}function s(e){var t=a(e);return null!=t&&t._nativeNode===e?t:null}function u(e){if(void 0===e._nativeNode&&d(!1),e._nativeNode)return e._nativeNode;for(var t=[];!e._nativeNode;)t.push(e),e._nativeParent||d(!1),e=e._nativeParent;for(;t.length;e=t.pop())o(e,e._nativeNode);return e._nativeNode}var l=t(20),c=t(75),d=t(0),f=l.ID_ATTRIBUTE_NAME,p=c,h="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:a,getInstanceFromNode:s,getNodeFromInstance:u,precacheChildNodes:o,precacheNode:r,uncacheNode:i};e.exports=v},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={_providers:new Map,_services:new Map,_requestsByService:new Map,_requestsByProvider:new Map,request:function(e){var t=e.split(":"),n=Array.prototype.slice.call(arguments,1),r=this;if(this.debug(t),t.length>1){var i=t[0],o=t[1];return this._providers.get(i)?(this.debug("service: "+o+" is online, perform the request with "+n.concat()),Promise.resolve(this._providers.get(i)[o].apply(r._providers.get(i),n))):new Promise(function(t,a){r.debug("service: "+e+" is offline, queue the task."),r._requestsByProvider.has(i)||r._requestsByProvider.set(i,[]),r._requestsByProvider.get(i).push({service:o,resolve:t,args:n})})}if(this._services.has(e)){var a=this._services.get(e);return this.debug("service ["+e+"] provider ["+a.name+"] is online, perform the task."),Promise.resolve(a[e].apply(a,n))}return this.debug("service: "+e+" is offline, queue the task."),new Promise(function(t,i){r.debug("storing the requests..."),r._requestsByService.has(e)||r._requestsByService.set(e,[]),r._requestsByService.get(e).push({service:e,resolve:t,args:n})})},register:function(e,t){var n=this;if(this._providers.has(t.name)||this._providers.set(t.name,t),this.debug((t.name||"(Anonymous)")+" is registering service: ["+e+"]"),this.debug("checking awaiting requests by server.."),this._requestsByProvider.has(t.name)&&(this._requestsByProvider.get(t.name).forEach(function(e){n.debug("resolving..",t,t.name,e.service,e.args);var r="function"==typeof t[e.service]?t[e.service].apply(t,e.args):t[e.service];e.resolve(r)}),this._requestsByProvider.delete(t.name)),this._services.has(e))return void this.debug("the service ["+e+"] has already been registered by other server:",this._services.get(e).name);this._services.set(e,t),this.debug("checking awaiting requests by service.."),this._requestsByService.has(e)&&(this._requestsByService.get(e).forEach(function(e){n.debug("resolving..",t,e.service);var r=t[e.service].apply(t,e.args);e.resolve(r)}),this._requestsByService.delete(e))},unregister:function(e,t){this._providers.delete(t.name);var n=this._services.get(e);n&&t===n&&this._services.delete(e)},_states:new Map,_statesByState:new Map,registerState:function(e,t){this._states.set(t.name,t),t.name,this._statesByState.set(e,t)},unregisterState:function(e,t){this._states.delete(t.name),this._statesByState.get(e)===t&&this._statesByState.delete(e)},query:function(e){this.debug(e);var t,n,r=e.split(".");if(r.length>1?(n=this._states.get(r[0]),t=r[1]):(t=r[0],n=this._statesByState.get(t)),!n)return void this.debug("Provider not ready, return undefined state.");if("function"==typeof n[t]){var i=Array.prototype.slice.call(arguments,1);return n[t].apply(n,i)}return n[t]},_start:(new Date).getTime()/1e3,currentTime:function(){return((new Date).getTime()/1e3-this._start).toFixed(3)},debug:function(){}};exports.default=n},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(!e||"string"!=typeof e)throw new Error("Event name should be a valid non-empty string!")}function s(e){if("function"!=typeof e)throw new Error("Handler should be a function!")}Object.defineProperty(exports,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t(3),c=n(l),d=t(13),f=n(d),p=t(5);n(p);t(228);var h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"setHierarchy",value:function(e){this.getElement()&&e&&this.getElement().focus()}},{key:"handleEvent",value:function(e){if("function"==typeof this._pre_handleEvent){if(!1===this._pre_handleEvent(e))return}else this.debug("no handle event pre found. skip");"function"==typeof this["_handle_"+e.type]&&(this.debug("handling "+e.type),this["_handle_"+e.type](e)),"function"==typeof this._post_handleEvent&&this._post_handleEvent(e)}},{key:"open",value:function(e){}},{key:"close",value:function(e){}},{key:"show",value:function(){this.getElement()&&(this.getElement().classList.remove("hidden"),this.focus(),this.emit("opened"))}},{key:"hide",value:function(){this.getElement()&&(this.getElement().classList.add("hidden"),this.emit("closed"))}},{key:"focus",value:function(){this.getElement()&&this.getElement().focus()}},{key:"respondToHierarchyEvent",value:function(e){return!this.isActive()}},{key:"_changeState",value:function(e,t){this.getElement()&&this.getElement().setAttribute(e+"-state",t.toString())}},{key:"isHidden",value:function(){return!this.getElement()||this.getElement().classList.contains("hidden")}},{key:"isActive",value:function(){return!!this.getElement()&&!this.getElement().classList.contains("hidden")}},{key:"publish",value:function(e,t,n){if(this.getElement()){this.broadcast(e,t);var r=new CustomEvent(n?e:this.EVENT_PREFIX+e,{bubbles:!0,detail:t||this});this.debug("publishing external event: "+e+(t?JSON.stringify(t):"")),this.getElement().dispatchEvent(r)}}},{key:"getElement",value:function(){return this.element||f.default.findDOMNode(this)}},{key:"broadcast",value:function(e,t){if(this.getElement()){var n=new CustomEvent("_"+e,{bubbles:!1,detail:t||this});this.getElement().dispatchEvent(n)}}},{key:"debug",value:function(){this.DEBUG&&this.TRACE}},{key:"on",value:function(e,t){a(e),s(t),this.listeners||(this.listeners=new Map);var n=this.listeners.get(e);n||(n=new Set,this.listeners.set(e,n)),n.add(t)}},{key:"off",value:function(e,t){a(e),s(t);var n=this.listeners.get(e);n&&(n.delete(t),n.size||this.listeners.delete(e))}},{key:"offAll",value:function(e){if(void 0===e)return void this.listeners.clear();a(e);var t=this.listeners.get(e);t&&(t.clear(),this.listeners.delete(e))}},{key:"observe",value:function(e,t){this._settings||(this._settings={}),this._settings[e]=t,"function"==typeof this["_observe_"+e]&&this["_observe_"+e](t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a(e),this.listeners||(this.listeners=new Map);var i=this.listeners.get(e);i&&i.forEach(function(e){try{e.apply(null,n)}catch(e){}})}}]),t}(c.default.Component);exports.default=h},function(e,exports,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},function(e,exports,t){"use strict";var n=t(164);e.exports={debugTool:n}},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(22),u=n(s),l=t(223),c=n(l),d=t(30),f=n(d),p=t(19),h=n(p),v=t(21),m=n(v),g=t(5),y=n(g),b=t(98),w=n(b),_=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.selectedCamera="back",e.mode="picture",e.mozCamera=null,e.recording=!1,e.video={filePath:null,minSpace:1048576,spacePadding:1048576},e.sharingIsActive=!1,e.recorderProfile=new Map,e.storage=navigator.getDeviceStorage("videos"),f.default.on("volumechanged",e.onStorageVolumeChanged.bind(e)),e}return o(t,e),a(t,[{key:"load",value:function(){var e=this,t=this.selectedCamera!==this.lastLoadedCamera;if(this.releasing)return void this.on("released",function(){e.load(),e.offAll("released")});this.mozCamera?t&&this.release().then(function(){e.doRequest()}):this.doRequest()}},{key:"doRequest",value:function(){this.requestCamera(this.selectedCamera),this.lastLoadedCamera=this.selectedCamera}},{key:"requestCamera",value:function(e,t){if(!this.isBusy){t||(t={mode:this.mode,previewSize:"video"===this.mode?this.recorderVideoSize:this.givenPreviewSize,pictureSize:"video"===this.mode?this.recorderVideoSize:this.pictureSize,recorderProfile:this.recorderProfile.get(this.selectedCamera)});this.request(e,t,3)}}},{key:"request",value:function(e,t,n){var r=this;0!==n&&navigator.mozCameras&&(this.busy("requesting-camera"),t.previewSize={height:480,width:640},navigator.mozCameras.getCamera(e,t).then(function(e){r.mozCamera=e.Camera,r.updateConfig(e.configuration),r.setupNewCamera(e.camera),r.emit("configured",e.camera.capabilities),r.ready()},function(i){n--,r.cameraRequestTimeout=setTimeout(r.request(e,t,n),1e3),r.ready()}))}},{key:"setupNewCamera",value:function(e){this.capabilities=e.capabilities,this.mozCamera=e,this.mozCamera.addEventListener("previewstatechange",this.onPreviewStateChange.bind(this)),this.mozCamera.addEventListener("recorderstatechange",this.onRecorderStateChange.bind(this)),m.default.update(this.capabilities),this.configureCamera(),this.audioChannelClient=new AudioChannelClient("normal")}},{key:"configureCamera",value:function(){var e=m.default.settings.pictureSizes.selected("data"),t=m.default.settings.recorderProfiles.selected("key");this.configureFlash(),this.configureZoom(),k.setPictureSize(e,{configure:!1}),k.setRecorderProfile(t,{configure:!1})}},{key:"setPictureSize",value:function(e,t){if(e){var n=!(t&&!1===t.configure);if(!this.isPictureSize(e))return this.pictureSize=e,n?this.configureHardware():this.mozCamera.setPictureSize(e),this.setThumbnailSize(),this}}},{key:"isPictureSize",value:function(e){if(!this.pictureSize)return!1;var t=e.width===this.pictureSize.width,n=e.height===this.pictureSize.height;return t&&n}},{key:"setThumbnailSize",value:function(){var e=this.mozCamera.capabilities.thumbnailSizes,t=this.mozCamera.getPictureSize(),n=this.pickThumbnailSize(e,t);n&&this.mozCamera.setThumbnailSize(n)}},{key:"pickThumbnailSize",value:function(e,t){var n=window.innerWidth*window.devicePixelRatio,r=window.innerHeight*window.devicePixelRatio,i=t.width/t.height,o=void 0,a=void 0;if((e=e.slice(0))&&t&&(e=e.filter(function(e){var t=e.width/e.height;return Math.abs(t-i)<.05}),0!==e.length)){for(e.sort(function(e,t){return e.width*e.height-t.width*t.height}),a=0;a<e.length;++a)if(o=e[a],function(e,t){return(e>=n||t>=r)&&(e>=r||t>=n)}(o.width,o.height))return o;return e[e.length-1]}}},{key:"configureFlash",value:function(){var e=m.default.settings.flashModes;this.setFlashMode(e.selected("key"))}},{key:"onPreviewStateChange",value:function(e){var t=e.newState;this.emit("previewChanged",t)}},{key:"onRecorderStateChange",value:function(e){var t=e.newState;"FileSizeLimitReached"!==t||this.FileSizeLimitReached||(this.FileSizeLimitReached=!0,this.mozCamera.stopRecording(),y.default.request("update")),"Stopped"===t&&this.emit("recording-stop")}},{key:"onStorageVolumeChanged",value:function(e){this.storage=e.video}},{key:"loadStreamInto",value:function(e){if(this.mozCamera&&e){e.mozSrcObject===this.mozCamera||(e.mozSrcObject=this.mozCamera,e.play())}}},{key:"getSensorAngle",value:function(){return this.mozCamera&&this.mozCamera.sensorAngle}},{key:"getRecorderProfile",value:function(){var e=this.recorderProfile.get(this.selectedCamera);return this.mozCamera.capabilities.recorderProfiles[e]}},{key:"updateConfig",value:function(e){"picture"===this.mode&&(this.pictureSize=e.pictureSize,this.givenPreviewSize=e.previewSize),this.recorderProfile.set(this.selectedCamera,e.recorderProfile),this.configured=!0}},{key:"previewSize",value:function(){return this.givenPreviewSize}},{key:"release",value:function(){var e=this;return new Promise(function(t){if(clearTimeout(e.cameraRequestTimeout),!e.mozCamera||e.releasing)return void t();e.releasing=!0,e.busy("releasing-camera"),e.mozCamera.release().then(function(){e.releasing=!1,e.ready(),e.mozCamera=null,e.emit("released"),t()},function(t){e.ready()})})}},{key:"configureHardware",value:function(e){var t=this;return new Promise(function(n,r){if(!t.isBusy){if(t.configured=!1,e&&(t.mode=e),!t.mozCamera)return void r("no mozCamera");t.stopRecording(),t.busy("configuring-hardware");var i={mode:t.mode,previewSize:"video"===t.mode?t.getRecorderProfile().video.size:t.givenPreviewSize,pictureSize:"video"===t.mode?t.getRecorderProfile().video.size:t.pictureSize,recorderProfile:t.recorderProfile.get(t.selectedCamera)};t.mozCamera.setConfiguration(i).then(function(e){t.configured=!0,t.emit("configured"),n(e),t.ready()},function(e){t.configured=!0,r("configureError"),t.ready()})}})}},{key:"takePicture",value:function(e){var t=this;if(!this.isBusy){var n=e&&e.position,r={dateTime:Date.now()/1e3,pictureSize:this.pictureSize,fileFormat:"jpeg"};return n&&(r.position=n),new Promise(function(e,n){t.getFreeStorageSpace().then(function(e){return t.checkStorageSpace(e)}).then(function(e){return t.takePic(r)}).then(function(t){e(t)},function(e){n(e)})})}}},{key:"takePic",value:function(e){var t=this;return new Promise(function(n){t.busy("taking-picture"),t.mozCamera.takePicture(e).then(function(e){t.emit("takepic:success"),n({blob:e}),w.default.player("shutter"),t.mozCamera.resumePreview(),t.ready()},function(){t.ready()})})}},{key:"startRecording",value:function(){var e=this;return new Promise(function(t,n){if(e.isBusy)return void n("busy now");e.recording=!0;var r=e.storage,i=e.video,o=null;e.getFreeStorageSpace().then(function(t){return e.checkStorageSpace(t)}).then(function(t){var n=e.getRecorderProfile().video.size,r=t-e.video.spacePadding+n.height*n.width,i=e.maxFileSizeBytes,a=i||r;return o={rotation:0,maxFileSizeBytes:a},e.busy("creating-videofile"),f.default.createVideoFilePath()}).then(function(a){void 0===a?(e.ready(),e.recording=!1,n("filePath is undefined")):(i.filePath=a,w.default.player("recordingStart"),e.audioChannelClient.requestChannel(),e.busy("start-recording"),e.mozCamera.startRecording(o,r,a).then(function(){e.ready(),t()}))}).catch(function(t){e.ready(),e.recording=!1,n(t)})})}},{key:"stopRecording",value:function(){var e=this;return new Promise(function(t,n){function r(e){var n=this;if("unavailable"===e.reason)return void this.ready();var r=e.path.indexOf(i)>-1;"modified"===e.reason&&r&&(o.removeEventListener("change",a),o.get(i).then(function(e){var r={blob:e,filePath:i};(0,c.default)(e,function(e,i){if(n.ready(),e)return void t();r.poster=i.poster,r.width=i.width,r.height=i.height,r.rotation=i.rotation,t(r)})}))}if(e.isBusy)return void n("busy");if(!k.recording)return void t(null);var i=e.video.filePath,o=e.storage;if(e.busy("stop-recording"),!e.mozCamera)return e.recording=!1,void e.ready();e.mozCamera.stopRecording(),w.default.player("recordingEnd"),setTimeout(function(){e.audioChannelClient.abandonChannel()},300),e.recording=!1,y.default.request("hideRecordingTime");var a=r.bind(e);o.addEventListener("change",a)})}},{key:"getFreeStorageSpace",value:function(){var e=this;return new Promise(function(t,n){var r=e.storage.freeSpace();r.then(function(){var e=r.result;t(e)},function(){n("error")})})}},{key:"checkStorageSpace",value:function(e){var t=this;return new Promise(function(n,r){e<=1048576?(y.default.request("showDialog",{type:"confirm",header:"sdcard"===t.storage.storageName?"nospace2-title":"nospace1-title",content:"sdcard"===t.storage.storageName?"nospace2-text":"nospace1-text",ok:"settings",cancel:"cancel",onOk:function(){new MozActivity({name:"configure",data:{target:"device",section:"mediaStorage"}})},onCancel:function(){y.default.request("update")}}),r("nospace")):n(e)})}},{key:"sendEvt",value:function(e){this.emit(e)}},{key:"setZoom",value:function(e){this.mozCamera.zoom=e}},{key:"isZoomSupported",value:function(){return this.mozCamera.capabilities.zoomRatios.length>1}},{key:"configureZoom",value:function(){var e=this.getMinimumZoom();return this.setZoom(e),this.emit("zoomconfigured"),this}},{key:"getMinimumZoom",value:function(){var e=this.mozCamera.capabilities.zoomRatios;return 0===e.length?1:e[0]}},{key:"getMaximumZoom",value:function(){var e=this.mozCamera.capabilities.zoomRatios;return 0===e.length?1:e[e.length-1]}},{key:"previewSizes",value:function(){if(this.mozCamera)return this.mozCamera.capabilities.previewSizes}},{key:"setCamera",value:function(e){this.selectedCamera!==e&&(this.selectedCamera=e,this.load())}},{key:"setMode",value:function(e){this.mode=e,this.configureFlash()}},{key:"isMode",value:function(e){return this.mode===e}},{key:"setFlashMode",value:function(e){this.mozCamera&&(e=e||"off",this.suspendedFlashCount>0?this.suspendedFlashMode=e:this.mozCamera.flashMode=e),y.default.request("updateFlashIcon",this)}},{key:"setMaxFileSize",value:function(e){this.maxFileSizeBytes=e}},{key:"updatePictureSize",value:function(e){var t="picture"===m.default.settings.mode.selected("key"),n=m.default.settings.pictureSizes.selected("data"),r=m.default.settings.pictureSizes.selected("key");if(!this.isPictureSize(n)){if(!t)return void this.setPictureSize(n,{configure:!1});this.setPictureSize(n),e&&this.showResolutionChangedToast(r)}}},{key:"updateRecorderProfile",value:function(e){var t="video"===m.default.settings.mode.selected("key"),n=m.default.settings.recorderProfiles.selected("key");if(!this.isRecorderProfile(n)){if(!t)return void this.setRecorderProfile(n,{configure:!1});this.setRecorderProfile(n),e&&this.showResolutionChangedToast(n)}}},{key:"showResolutionChangedToast",value:function(e){var t=null;("video"===this.mode?m.default.settings.recorderProfiles:m.default.settings.pictureSizes).get("options").forEach(function(n){n.key===e&&(t=n)});var n=navigator.mozL10n.get("set-resolution-to");n+=" ",n+=navigator.mozL10n.get(t.title),n+=".",h.default.ShowToaster(n)}},{key:"isRecorderProfile",value:function(e){return e===this.recorderProfile.get(this.selectedCamera)}},{key:"setRecorderProfile",value:function(e,t){var n=this;if(e){var r=!(t&&!1===t.configure);return this.recorderProfile.set(this.selectedCamera,e),this.recorderVideoSize=this.getRecorderProfile().video.size,r&&("video"===this.mode?setTimeout(function(){n.configureHardware()}):this.configureHardware()),this}}},{key:"isSharingActive",value:function(){return this.sharingIsActive}},{key:"setSharingState",value:function(e){var t="sharing"===e;t!==this.sharingIsActive&&(this.sharingIsActive=t,this.sharingIsActive)}},{key:"handleZoomChange",value:function(e){var t=this.getMinimumZoom(),n=this.getMaximumZoom(),r=n-t,i=r*e/100+t;this.setZoom(i)}},{key:"busy",value:function(e){this.isBusy=!0,this.emit("busy",e),clearTimeout(this.readyTimeout)}},{key:"ready",value:function(){var e=this;this.isBusy=!1,clearTimeout(this.readyTimeout),this.readyTimeout=setTimeout(function(){e.emit("ready")},150)}}]),t}(u.default),k=new _;exports.default=k},function(e,exports,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,exports,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=t(2),i=t(18),o=(t(1),t(50),"function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103),a={key:!0,ref:!0,__self:!0,__source:!0},s=function(e,t,n,r,i,a,s){var u={$$typeof:o,type:e,key:t,ref:n,props:s,_owner:a};return u};s.createElement=function(e,t,n){var r,o={},u=null,l=null;if(null!=t){l=void 0===t.ref?null:t.ref,u=void 0===t.key?null:""+t.key,void 0===t.__self?null:t.__self,void 0===t.__source?null:t.__source;for(r in t)t.hasOwnProperty(r)&&!a.hasOwnProperty(r)&&(o[r]=t[r])}var c=arguments.length-2;if(1===c)o.children=n;else if(c>1){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];o.children=d}if(e&&e.defaultProps){var p=e.defaultProps;for(r in p)void 0===o[r]&&(o[r]=p[r])}return s(e,u,l,0,0,i.current,o)},s.createFactory=function(e){var t=s.createElement.bind(null,e);return t.type=e,t},s.cloneAndReplaceKey=function(e,t){return s(e.type,t,e.ref,e._self,e._source,e._owner,e.props)},s.cloneElement=function(e,t,n){var o,u=r({},e.props),l=e.key,c=e.ref,d=(e._self,e._source,e._owner);if(null!=t){void 0!==t.ref&&(c=t.ref,d=i.current),void 0!==t.key&&(l=""+t.key);var f;e.type&&e.type.defaultProps&&(f=e.type.defaultProps);for(o in t)t.hasOwnProperty(o)&&!a.hasOwnProperty(o)&&(void 0===t[o]&&void 0!==f?u[o]=f[o]:u[o]=t[o])}var p=arguments.length-2;if(1===p)u.children=n;else if(p>1){for(var h=Array(p),v=0;v<p;v++)h[v]=arguments[v+2];u.children=h}return s(e.type,l,c,0,0,d,u)},s.isValidElement=function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e&&e.$$typeof===o},e.exports=s},function(e,exports,t){"use strict";function n(){S.ReactReconcileTransaction&&w||v(!1)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(),this.reconcileTransaction=S.ReactReconcileTransaction.getPooled(!0)}function i(e,t,r,i,o,a){n(),w.batchedUpdates(e,t,r,i,o,a)}function o(e,t){return e._mountOrder-t._mountOrder}function a(e){var t=e.dirtyComponentsLength;t!==m.length&&v(!1),m.sort(o),g++;for(var n=0;n<t;n++){var r=m[n],i=r._pendingCallbacks;r._pendingCallbacks=null;if(f.logTopLevelRenders){var a=r;r._currentElement.props===r._renderedComponent._currentElement&&(a=r._renderedComponent),"React update: "+a.getName()}if(p.performUpdateIfNecessary(r,e.reconcileTransaction,g),i)for(var s=0;s<i.length;s++)e.callbackQueue.enqueue(i[s],r.getPublicInstance())}}function s(e){if(n(),!w.isBatchingUpdates)return void w.batchedUpdates(s,e);m.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=g+1)}function u(e,t){w.isBatchingUpdates||v(!1),y.enqueue(e,t),b=!0}var l=t(2),c=t(69),d=t(17),f=t(79),p=(t(8),t(24)),h=t(39),v=t(0),m=[],g=0,y=c.getPooled(),b=!1,w=null,_={initialize:function(){this.dirtyComponentsLength=m.length},close:function(){this.dirtyComponentsLength!==m.length?(m.splice(0,this.dirtyComponentsLength),C()):m.length=0}},k={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},E=[_,k];l(r.prototype,h.Mixin,{getTransactionWrappers:function(){return E},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,S.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return h.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),d.addPoolingTo(r);var C=function(){for(;m.length||b;){if(m.length){var e=r.getPooled();e.perform(a,null,e),r.release(e)}if(b){b=!1;var t=y;y=c.getPooled(),t.notifyAll(),c.release(t)}}},P={injectReconcileTransaction:function(e){e||v(!1),S.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||v(!1),"function"!=typeof e.batchedUpdates&&v(!1),"boolean"!=typeof e.isBatchingUpdates&&v(!1),w=e}},S={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:s,flushBatchedUpdates:C,injection:P,asap:u};e.exports=S},function(e,exports,t){"use strict";e.exports=t(147)},function(e,exports,t){"use strict";var n=t(32),r=n({bubbled:null,captured:null}),i=n({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),o={topLevelTypes:i,PropagationPhases:r};e.exports=o},function(e,exports,t){"use strict";function n(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s?this[a]=s(n):"target"===a?this.target=r:this[a]=n[a]}var u=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=u?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}var r=t(2),i=t(17),o=t(10),a=(t(1),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),s={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<a.length;n++)this[a[n]]=null}}),n.Interface=s,n.augmentClass=function(e,t){var n=this,o=function(){};o.prototype=n.prototype;var a=new o;r(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=r({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.fourArgumentPooler)},i.addPoolingTo(n,i.fourArgumentPooler),e.exports=n},function(e,exports,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,exports,t){"use strict";var n=t(0),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},a=function(e,t,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r),o}return new i(e,t,n,r)},s=function(e,t,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r,i),a}return new o(e,t,n,r,i)},u=function(e){var t=this;e instanceof t||n(!1),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},l=r,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=10),n.release=u,n},d={addPoolingTo:c,oneArgumentPooler:r,twoArgumentPooler:i,threeArgumentPooler:o,fourArgumentPooler:a,fiveArgumentPooler:s};e.exports=d},function(e,exports,t){"use strict";var n={current:null};e.exports=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={scaleSizeToFitViewport:function(e,t){var n=e.width/t.width,r=e.height/t.height,i=void 0;return i=Math.min(n,r),{width:t.width*i,height:t.height*i}},scaleSizeToFillViewport:function(e,t){var n=e.width/t.width,r=e.height/t.height,i=void 0;return i=Math.max(n,r),{width:t.width*i,height:t.height*i}},getMaximumPreviewSize:function(e,t){var n=0,r=null;return e.forEach(function(e){var i=e.width*e.height;if(t){var o=e.width/e.height;if(Math.abs(o-t)>.001)return}i>n&&(n=i,r=e)}),r},ShowToaster:function(e){Toaster.showToast({message:e})}};exports.default=n},function(e,exports,t){"use strict";function n(e,t){return(e&t)===t}var r=t(0),i={MUST_USE_PROPERTY:1,HAS_SIDE_EFFECTS:2,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=i,o=e.Properties||{},s=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&a._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in o){a.properties.hasOwnProperty(d)&&r(!1);var f=d.toLowerCase(),p=o[d],h={attributeName:f,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:n(p,t.MUST_USE_PROPERTY),hasSideEffects:n(p,t.HAS_SIDE_EFFECTS),hasBooleanValue:n(p,t.HAS_BOOLEAN_VALUE),hasNumericValue:n(p,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:n(p,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:n(p,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(!h.mustUseProperty&&h.hasSideEffects&&r(!1),h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1||r(!1),u.hasOwnProperty(d)){var v=u[d];h.attributeName=v}s.hasOwnProperty(d)&&(h.attributeNamespace=s[d]),l.hasOwnProperty(d)&&(h.propertyName=l[d]),c.hasOwnProperty(d)&&(h.mutationMethod=c[d]),a.properties[d]=h}}},o=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",a={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:o,ATTRIBUTE_NAME_CHAR:o+"\\-.0-9\\uB7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<a._isCustomAttributeFunctions.length;t++){if((0,a._isCustomAttributeFunctions[t])(e))return!0}return!1},injection:i};e.exports=a},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t(22),l=n(u),c=t(217),d=n(c),f=t(9),p=n(f),h=t(29),v=n(h),m=t(219),g=n(m),y=t(220),b=n(y),w=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.key=e.key,n.settings=e.settings,n.current=e.get.bind(n),n.forwardMethods=["filterOptions","resetOptions","supported","selected","select","next","get","set"],n.forwardMethods.forEach(n.forward,n),n}return o(t,e),s(t,[{key:"each",value:function(e){for(var t in this.settings)e(this.settings[t])}},{key:"is",value:function(e){return this.get("key")===e}},{key:"forward",value:function(e){this[e]=function(){var t=this.current();return t[e].apply(t,arguments)}}}]),t}(l.default),_=function(){function e(t){r(this,e),this.key=t.key,this.reset(t,{silent:!0}),this.select=this.select.bind(this),this.next=this.next.bind(this),this.get=this.get.bind(this),this.set=this.set.bind(this),this.configure(t),this.dontSave=!1}return s(e,[{key:"reset",value:function(e,t){if(e){var n=e instanceof Array;this._data=n?e:this.mix({},e)}}},{key:"mix",value:function(e,t){for(var n in t)e[n]=t[n];return e}},{key:"get",value:function(e){var t=this._getData();return arguments.length?t[e]:this.mix({},t)}},{key:"set",value:function(e,t,n){n="object"===(void 0===e?"undefined":a(e))?t:n;var r=n&&n.silent,i=this._getData(),o=void 0;switch(void 0===e?"undefined":a(e)){case"string":return i[e]=t,void(r||"selected"===e&&(!0!==this._getData().persistent||this.dontSave||this.save()));case"object":return this.mix(i,e),void(r||(o=Object.keys(e),o.forEach(this.onKeyChange,this)))}}},{key:"_getData",value:function(){return this._data=this._data||{},this._data}},{key:"configure",value:function(e){var t=!(!e.options||!e.options.length);this.options={defined:t},this.resetOptions(e.options)}},{key:"resetOptions",value:function(e){e=e||[];var t=this.optionsToHash(e);this.options.all=t,this.options.available=t,this.set("options",e,{silent:!0}),this.updateSelected({silent:!0})}},{key:"filterOptions",value:function(e,t){var n=this.options.available={},r=this.options.all,i=[];(e||[]).forEach(function(e){var t=r[e];void 0!==t&&(i.push(t),n[e]=t)}),this.sortByIndex(i),this.set("options",i,t),this.updateSelected({silent:!0})}},{key:"optionsToHash",value:function(e){var t={};return e.forEach(function(e,n){e.index=n,t[e.key]=e}),t}},{key:"selected",value:function(e){var t=this.options.available,n=t[this.get("selected")];return e?n&&n[e]:n}},{key:"select",value:function(e,t){if(void 0===e||null===e)return void this.select(0,t);var n=this.get("options");if(n.length){var r="number"==typeof e?n:this.options.available,i=r[e];return"high"!==e||i?i?void this.set("selected",i.key,t):void this.select(0,t):(e="medium",void this.select(e,t))}}},{key:"sortByIndex",value:function(e){return e.sort(function(e,t){return e.index-t.index})}},{key:"updateSelected",value:function(e){this.select(this.get("selected")||this.fetched,e)}},{key:"next",value:function(){var e=this.get("options"),t=this.selected(),n=e.indexOf(t),r=(n+1)%e.length;this.select(r)}},{key:"save",value:function(){var e=this.get("selected");localStorage.setItem("setting:"+this.key,e)}},{key:"fetch",value:function(){if(this.get("persistent")){if(this.fetched=localStorage.getItem("setting:"+this.key),!this.fetched)switch(this.key){case"recorderProfilesBack":this.fetched="480p";break;case"recorderProfilesFront":this.fetched="cif"}this.fetched&&this.select(this.fetched,{silent:!0})}}},{key:"supported",value:function(){return this.enabled()&&!!this.get("options").length}},{key:"enabled",value:function(){return!this.get("disabled")}}]),e}(),k=function(){function e(t){r(this,e),this.ids={},this.items=[],this.aliases={},this.dontSave=this.dontSave.bind(this),this.addEach(t)}return s(e,[{key:"addEach",value:function(e){if(e){var t=void 0,n=void 0;for(n in e)t=e[n],t.key=t.key||n,this.add(e[n])}}},{key:"add",value:function(e){var t=new _(e);this.items.push(t),this.ids[t.key]=this[t.key]=t}},{key:"fetch",value:function(){this.items.forEach(function(e){e.fetch()})}},{key:"dontSave",value:function(){this.items.forEach(function(e){e.dontSave=!0})}},{key:"alias",value:function(e){var t=new w(e);this.aliases[e.key]=t,this[e.key]=t}}]),e}(),E=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.settingsData=d.default,e.settings=new k(e.settingsData),e.settings.fetch(),e.setupSettingsMenuAlias(),e.setupFlashModesAlias(),e.setupPictureSizesAlias(),e.setupRecorderProfilesAlias(),e.cameraList=navigator.mozCameras&&navigator.mozCameras.getListOfCameras(),e.refsHash={},e.currentSettings=null,e}return o(t,e),s(t,[{key:"fetch",value:function(){this.items.forEach(function(e){e.fetch()})}},{key:"menuItems",value:function(){var e=void 0,t=void 0,n=void 0;return this.cameraList&&1===this.cameraList.length&&(t="cameras",(n=this.settings[t])&&n.set("disabled",n.key,{silent:!0})),(window.isSecureMode||"pick"===v.default.name)&&(t="video"===p.default.mode?"video":"gallery",(n=this.settings[t])&&n.set("disabled",n.key,{silent:!0})),t="pictureSizes",n=this.settings[t],1===n.get("options").length&&n.set("disabled","pictureSizes",{silent:!0}),e=this.settings.settingsMenu.get("items"),e.filter(this.validMenuItem,this).map(function(e){return this.settings[e.key]},this)}},{key:"setupFlashModesAlias",value:function(){var e=this.settings;this.settings.alias({key:"flashModes",settings:{picture:this.settings.flashModesPicture,video:this.settings.flashModesVideo},get:function(){var t=e.mode.selected("key");return this.settings[t]}})}},{key:"setupSettingsMenuAlias",value:function(){var e=this.settings;this.settings.alias({key:"settingsMenu",settings:{picture:this.settings.settingsMenuPhoto,video:this.settings.settingsMenuVideo},get:function(){var t=e.mode.selected("key");return this.settings[t]}})}},{key:"setupPictureSizesAlias",value:function(){var e=this.settings;this.settings.alias({key:"pictureSizes",settings:{back:this.settings.pictureSizesBack,front:this.settings.pictureSizesFront},get:function(){var t=e.cameras.selected("key");return this.settings[t]}})}},{key:"setupRecorderProfilesAlias",value:function(){var e=this.settings;this.settings.alias({key:"recorderProfiles",settings:{back:this.settings.recorderProfilesBack,front:this.settings.recorderProfilesFront},get:function(){var t=e.cameras.selected("key");return this.settings[t]}})}},{key:"validMenuItem",value:function(e){var t=this.settings[e.key];return!!t&&t.supported()}},{key:"getSupportedModes",value:function(){return this.settings.mode.get().options}},{key:"setMaxPixelSize",value:function(e){if(e){var t=this.settings.pictureSizes,n=t.get("maxPixelSize");if(this.settings.pictureSizesFront.set("maxPixelSize",e),this.settings.pictureSizesBack.set("maxPixelSize",e),n!==e){var r=t.get("options"),i=[];r&&r.length>0&&(r.forEach(function(t){t.pixelSize<=e&&i.push(t)}),t.resetOptions(i))}}}},{key:"setMaxFileSize",value:function(e){var t=this.settings.recorderProfiles;if(this.settings.recorderProfilesFront.set("maxFileSizeBytes",e),this.settings.recorderProfilesBack.set("maxFileSizeBytes",e),e&&this.formattedRecorderProfiles){var n=this.formattedRecorderProfiles[0];t.resetOptions([n]),t.select(n.key),p.default.updateRecorderProfile()}}},{key:"configurePictureSizes",value:function(e){var t=this.settings.pictureSizes,n=t.get("support"),r=t.get("maxPixelSize"),i={support:n,maxPixelSize:r},o=(0,g.default)(e,i);t.resetOptions(o)}},{key:"configureRecorderProfiles",value:function(e){var t=this.settings.recorderProfiles,n=t.get("maxFileSizeBytes"),r=t.get("options"),i=(0,b.default)(e,r);t.options=i,this.formattedRecorderProfiles=i,n&&(i=[i[0]],t.select(i),p.default.updateRecorderProfile()),t.resetOptions(i)}},{key:"update",value:function(e){1===e.flashModes.length&&"off"===e.flashModes[0]&&(e.flashModes[0]=void 0,this.settings.flashModes.select("off")),this.settings.flashModesVideo.filterOptions(e.flashModes),this.settings.flashModesPicture.filterOptions(e.flashModes),this.configurePictureSizes(e.pictureSizes),this.configureRecorderProfiles(e.recorderProfiles)}}]),t}(l.default),C=new E;exports.default=C},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(61),u=n(s),l=t(5),c=n(l),d=t(200),f=n(d),p=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.EVENT_PREFIX="",e.service=window.Service||c.default,e.EVENTS&&e.EVENTS.forEach(function(e){window.addEventListener(e,this)},e),e.SERVICES&&e.SERVICES.forEach(function(e){this.service.register(e,this)},e),e.STATES&&e.STATES.forEach(function(e){this.service.registerState(e,this)},e),e.SETTINGS&&(e._settings={},e.SETTINGS.forEach(function(e){f.default.addObserver(e,this)},e)),e}return o(t,e),a(t,[{key:"publish",value:function(e,t,n){var r=n?"":this.EVENT_PREFIX,i=new CustomEvent(r+e,{bubbles:!0,detail:t||this});this.debug("publishing: "+r+e),window.dispatchEvent(i)}},{key:"handleEvent",value:function(e){if("function"==typeof this._pre_handleEvent){if(!1===this._pre_handleEvent(e))return}else this.debug("no handle event pre found. skip");"function"==typeof this["_handle_"+e.type]&&(this.debug("handling "+e.type),this["_handle_"+e.type](e)),"function"==typeof this._post_handleEvent&&this._post_handleEvent(e)}},{key:"observe",value:function(e,t){this.debug("observing "+e+" : "+t),this._settings||(this._settings={}),this._settings[e]=t,"function"==typeof this["_observe_"+e]&&(this.debug("observer for "+e+" found, invoking."),this["_observe_"+e](t))}},{key:"debug",value:function(){this.DEBUG?this.TRACE:window.DUMP&&DUMP("["+this.name+"]"+Array.slice(arguments).concat())}}]),t}(u.default);exports.default=p},function(e,exports,t){"use strict";function n(e){if(f){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)p(t,n[r],null);else null!=e.html?t.innerHTML=e.html:null!=e.text&&d(t,e.text)}}function r(e,t){e.parentNode.replaceChild(t.node,e),n(t)}function i(e,t){f?e.children.push(t):e.node.appendChild(t.node)}function o(e,t){f?e.html=t:e.node.innerHTML=t}function a(e,t){f?e.text=t:d(e.node,t)}function s(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:s}}var l=t(70),c=t(51),d=t(96),f="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),p=c(function(e,t,r){11===t.node.nodeType||1===t.node.nodeType&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===l.html)?(n(t),e.insertBefore(t.node,r)):(e.insertBefore(t.node,r),n(t))});u.insertTreeBefore=p,u.replaceChildWithTree=r,u.queueChild=i,u.queueHTML=o,u.queueText=a,e.exports=u},function(e,exports,t){"use strict";function n(){r.attachRefs(this,this._currentElement)}var r=t(174),i=(t(8),t(0)),o={mountComponent:function(e,t,r,i,o){var a=e.mountComponent(t,r,i,o);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(n,e),a},getNativeNode:function(e){return e.getNativeNode()},unmountComponent:function(e,t){r.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,i,o){var a=e._currentElement;if(t!==a||o!==e._context){var s=r.shouldUpdateRefs(a,t);s&&r.detachRefs(e,a),e.receiveComponent(t,i,o),s&&e._currentElement&&null!=e._currentElement.ref&&i.getReactMountReady().enqueue(n,e)}},performUpdateIfNecessary:function(e,t,n){if(e._updateBatchNumber!==n)return void(null!=e._updateBatchNumber&&e._updateBatchNumber!==n+1&&i(!1));e.performUpdateIfNecessary(t)}};e.exports=o},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(61),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(e){function t(){var e,i,o,a;n(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return i=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.name="SoftKeyStore",a=i,r(o,a)}return i(t,e),a(t,[{key:"start",value:function(){this.currentKeys={},this.currentTheme=null,this.registeredDOMMap=new Map}},{key:"register",value:function(e,t,n){var r=this.registeredDOMMap.get(t),i=this;r?r.updateKeys(e):(r={start:function(){t.addEventListener("focus",this,!0),this.theme=n,this.updateKeys(e)},stop:function(){t.removeEventListener("focus",this,!0)},handleEvent:function(){this.check()},check:function(){if(document.activeElement===t||t.contains(document.activeElement)){var e=i.recount();i.store(e,this.theme)}},updateKeys:function(e){this.keys=e,this.check()}},this.registeredDOMMap.set(t,r),r.start())}},{key:"generateKeysInfo",value:function(e){var t=[];for(var n in e){var r={};switch(n){case"left":r.code="SoftLeft";break;case"center":r.code="Enter";break;case"right":r.code="SoftRight"}r.options={name:e[n]},t.push(r)}return t}},{key:"registerSoftkeys",value:function(e){var t=this,n=this.generateKeysInfo(e);n.length&&navigator.softkeyManager&&(n.forEach(function(e){if(e.options.name){var n="";n="object"===o(e.options.name)?e.options.name.text||n:e.options.name,e.options.name=t.toL10n(n)}}),navigator.softkeyManager.registerKeys(n))}},{key:"toL10n",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"complete"===navigator.mozL10n.readyState&&e?navigator.mozL10n.get(e)||e:e}},{key:"store",value:function(e,t){this.currentKeys=e,this.currentTheme=t,this.registerSoftkeys(e),this.emit("change")}},{key:"recount",value:function(){for(var e={},t=document.activeElement;t!==document.body;){var n=this.registeredDOMMap.get(t);if(n){var r=n.keys;for(var i in r)i in e||(e[i]=r[i])}t=t.parentNode}return e}},{key:"unregister",value:function(e){var t=this.registeredDOMMap.get(e);t&&(t.stop(),this.registeredDOMMap.delete(e),this.store(this.recount()))}}]),t}(u.default),c=new l;c.start(),exports.default=c},function(e,exports,t){"use strict";var n=("function"==typeof Symbol&&Symbol.iterator,t(34)),r=t(44),i=t(48),o=t(90),a=t(91),s=t(0),u={},l=null,c=function(e,t){e&&(r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},d=function(e){return c(e,!0)},f=function(e){return c(e,!1)},p={injection:{injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},putListener:function(e,t,r){"function"!=typeof r&&s(!1),(u[t]||(u[t]={}))[e._rootNodeID]=r;var i=n.registrationNameModules[t];i&&i.didPutListener&&i.didPutListener(e,t,r)},getListener:function(e,t){var n=u[t];return n&&n[e._rootNodeID]},deleteListener:function(e,t){var r=n.registrationNameModules[t];r&&r.willDeleteListener&&r.willDeleteListener(e,t);var i=u[t];i&&delete i[e._rootNodeID]},deleteAllListeners:function(e){for(var t in u)if(u[t][e._rootNodeID]){var r=n.registrationNameModules[t];r&&r.willDeleteListener&&r.willDeleteListener(e,t),delete u[t][e._rootNodeID]}},extractEvents:function(e,t,r,i){for(var a,s=n.plugins,u=0;u<s.length;u++){var l=s[u];if(l){var c=l.extractEvents(e,t,r,i);c&&(a=o(a,c))}}return a},enqueueEvents:function(e){e&&(l=o(l,e))},processEventQueue:function(e){var t=l;l=null,e?a(t,d):a(t,f),l&&s(!1),i.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};e.exports=p},function(e,exports,t){"use strict";function n(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return y(e,r)}function r(e,t,r){var i=t?g.bubbled:g.captured,o=n(e,r,i);o&&(r._dispatchListeners=v(r._dispatchListeners,o),r._dispatchInstances=v(r._dispatchInstances,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,r,e)}function o(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,r,e)}}function a(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=y(e,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,e))}}function s(e){e&&e.dispatchConfig.registrationName&&a(e._targetInst,null,e)}function u(e){m(e,i)}function l(e){m(e,o)}function c(e,t,n,r){h.traverseEnterLeave(n,r,a,e,t)}function d(e){m(e,s)}var f=t(14),p=t(26),h=t(44),v=t(90),m=t(91),g=(t(1),f.PropagationPhases),y=p.getListener,b={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:c};e.exports=b},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(15),i=t(54),o={view:function(e){if(e.view)return e.view;var t=i(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(n,o),e.exports=n},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(22),u=n(s),l=t(5),c=n(l),d=t(21),f=n(d),p=t(9),h=n(p),v=t(19),m=n(v),g=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.types={pick:"pick",record:"record"},e.name=null,e.configure(),e}return o(t,e),a(t,[{key:"configure",value:function(){this.name=this.getName()}},{key:"getName",value:function(){var e=window.location.hash,t=e&&e.substr(1);return"cam-picker"===t&&(t="pick"),this.types[t]}},{key:"setupListener",value:function(){navigator.mozSetMessageHandler("activity",this.onMessage.bind(this)),m.default.activity&&(this.onMessage(m.default.activity),m.default.activity=null)}},{key:"onMessage",value:function(e){var t=this.name;if(this.types[t]){var n={name:t,maxPixelSize:this.getMaxPixelSize(e),maxFileSizeBytes:e.source.data.maxFileSizeBytes};this.activity=e,this.configureMode(e),"record"===t&&this.configureCamera(e),h.default.setMaxFileSize(n.maxFileSizeBytes),f.default.setMaxPixelSize(n.maxPixelSize),f.default.setMaxFileSize(n.maxFileSizeBytes),c.default.request("update")}}},{key:"getMaxPixelSize",value:function(e){var t=e.source.data,n=t.maxFileSizeBytes;return n?this.bytesToPixels(n):t.width||t.height?this.getMaxPixelsFromSize(t):0}},{key:"bytesToPixels",value:function(e){var t=window.CONFIG_AVG_JPEG_COMPRESSION_RATIO||8,n=e*t;return Math.round(n/3)}},{key:"getMaxPixelsFromSize",value:function(e){return(e.width||e.height*(4/3))*(e.height||e.width*(4/3))*2.5}},{key:"configureMode",value:function(e){var t=e.source.data.type,n=this.name,r="pick"===n?this.getModesForPick(t):this.getModesForRecord(t);f.default.settings.mode.filterOptions(r),f.default.settings.mode.select(r[0]),h.default.emit("change:mode",r[0])}},{key:"configureCamera",value:function(e){var t=e.source.data.camera;t&&f.default.settings.cameras.select(t)}},{key:"getModesForPick",value:function(e){e=[].concat(e||[]);var t=[];return e.forEach(function(e){var n=e.split("/")[0],r="image"===n?"picture":n;-1===t.indexOf(r)&&t.push(r)}),0===t.length&&(t=["picture","video"]),t}},{key:"getModesForRecord",value:function(e){e=[].concat(e||[]);var t=[];return e.forEach(function(e){var n="photos"===e?"picture":"video";-1===t.indexOf(n)&&t.push(n)}),0===t.length&&(t=["picture","video"]),t}},{key:"onActivityExit",value:function(){this.activity&&this.activity.postResult({})}}]),t}(u.default),y=new g;exports.default=y},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t(22),l=n(u),c=t(218),d=n(c),f=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return d.default.init(),navigator.mozSettings.addObserver("device.storage.writable.name",e.onStorageVolumeChanged.bind(e)),e.picture=navigator.getDeviceStorage("pictures"),e.video=navigator.getDeviceStorage("videos"),e.onStorageChangeFunc=e.onStorageChange.bind(e),e.configure(),e}return o(t,e),s(t,[{key:"addPicture",value:function(e,t){var n=this;return new Promise(function(e){var r=t&&t.filePath;r?n.onCreated(r).then(function(t){var n=a(t,3),r=n[0],i=n[1],o=n[2];e([r,i,o])}):d.default.createDCFFilename(n.picture,"image").then(function(t){n.onCreated(t).then(function(t){var n=a(t,3),r=n[0],i=n[1],o=n[2];e([r,i,o])})})})}},{key:"onCreated",value:function(e){var t=this;return new Promise(function(n){var r=t.picture.addNamed(blob,e);r.onerror=function(){},r.onsuccess=function(r){var i=r.target.result;t.refetchFile(e,i).then(function(e){var t=a(e,3),r=t[0],i=t[1],o=t[2];n([r,i,o])})}})}},{key:"onStorageChange",value:function(e){var t=e.reason;if("deleted"===t){var n=this.checkFilepath(e.path);this.emit("delete",n)}else this.setState(t);this.check()}},{key:"configure",value:function(e){var t=void 0,n=void 0,r=void 0;if(this.picture&&this.picture.removeEventListener("change",this.onStorageChangeFunc),this.video&&this.video.removeEventListener("change",this.onStorageChangeFunc),e){for(n=navigator.getDeviceStorages("videos"),this.video=n[0],t=0;t<n.length;++t)if(n[t].storageName===e){this.video=n[t];break}for(r=navigator.getDeviceStorages("pictures"),this.picture=r[0],t=0;t<r.length;++t)if(r[t].storageName===e){this.picture=r[t];break}}else this.video=navigator.getDeviceStorage("videos"),this.picture=navigator.getDeviceStorage("pictures");if(!this.picture)return void this.setState("unavailable");this.picture.addEventListener("change",this.onStorageChangeFunc),this.video.addEventListener("change",this.onStorageChangeFunc),this.emit("volumechanged",{video:this.video,picture:this.picture})}},{key:"onStorageVolumeChanged",value:function(e){this.configure(e.settingValue)}},{key:"checkFilepath",value:function(e){var t=e.indexOf("DCIM/");if(!(t<-1)&&(t>0&&(e=e.substr(t)),-1!==e.indexOf("VID")&&e.lastIndexOf(".jpg")===e.length-4&&(e=e.replace(".jpg",".3gp")),-1===e.lastIndexOf(".tmp.3gp")))return e}},{key:"setState",value:function(e){this.state=e,this.emit("changed",e)}},{key:"setMaxFileSize",value:function(e){this.maxFileSize=e}},{key:"check",value:function(){var e=this;this.getState().then(function(t){if(e.setState(t),!e.available())return void e.emit("checked","unhealthy");e.isSpace().then(function(t){t||("sdcard"===e.video.storageName?e.setState("nospace2"):e.setState("nospace1")),e.emit("checked","healthy")})})}},{key:"isSpace",value:function(){var e=this;return new Promise(function(t){e.picture.freeSpace().onsuccess=function(e){var n=e.target.result;t(n>1048576)}})}},{key:"getState",value:function(){var e=this;return new Promise(function(t){if(!e.picture)return void setTimeout(function(){t("unavailable")});e.picture.available().onsuccess=function(e){t(e.target.result)}})}},{key:"available",value:function(){return"available"===this.state}},{key:"deletePicture",value:function(e){var t=this;return new Promise(function(n){var r=t.picture.delete(e);r.onerror=function(t){var r="Failed to delete "+e+" from DeviceStorage:"+t.target.error;n(r)},r.onsuccess=function(){n(null)}})}},{key:"deleteVideo",value:function(e){var t=this;return new Promise(function(n){var r=e.replace(".3gp",".jpg"),i=t.video.delete(e),o=t.picture.delete(r);i.onerror=function(e){},i.onsuccess=function(){n(null)},o.onerror=function(e){},o.onsuccess=function(){n(null)}})}},{key:"getDir",value:function(e){var t=e.lastIndexOf("/")+1;return t?e.substring(0,t):""}},{key:"storePicture",value:function(e){var t=this;return this.memoryBlob=e.blob,new Promise(function(n,r){t.createFilePath(t.memoryBlob).then(function(e){return t.addFile(e)}).then(function(e){var n=a(e,2),r=n[0],i=n[1];return t.refetchFile(r,i)},function(e){r(e)}).then(function(t){var r=a(t,3),i=r[0],o=(r[1],r[2]);e.blob=o,e.filePath=i,n(e)})})}},{key:"createFilePath",value:function(e,t){var n=this;return new Promise(function(e){var r=t&&t.filePath;r?e(r):d.default.createDCFFilename(n.picture,"image").then(function(t){var n=a(t,3),r=n[0];n[1],n[2];e(r)})})}},{key:"addFile",value:function(e){var t=this;return new Promise(function(n,r){t.picture.addNamed(t.memoryBlob,e).then(function(t){n([e,t])},function(){r("addNamed error")})})}},{key:"refetchFile",value:function(e,t){var n=this;return new Promise(function(r,i){n.picture.get(e).then(function(n){r([e,t,n])},function(e){i(e)})})}},{key:"createVideoFilePath",value:function(){var e=this;return new Promise(function(t,n){var r=e.video;d.default.createDCFFilename(e.video,"video").then(function(i){var o=a(i,1),s=o[0],u=e.getDir(s)+".tmp.3gp",l=new Blob([""],{type:"video/3gpp"}),c=r.addNamed(l,u);c.onerror=function(t){var i=r.delete(u);i.onerror=function(){n("Error creating video file path")},i.onsuccess=function(){e.createVideoFilePath()}},c.onsuccess=function(e){r.delete(e.target.result),t(s)}})})}},{key:"getDir",value:function(e){var t=e.lastIndexOf("/")+1;return t?e.substring(0,t):""}}]),t}(l.default),p=new f;exports.default=p},function(e,exports,t){"use strict";var n={};e.exports=n},function(e,exports,t){"use strict";var n=t(0),r=function(e){var t,r={};e instanceof Object&&!Array.isArray(e)||n(!1);for(t in e)e.hasOwnProperty(t)&&(r[t]=t);return r};e.exports=r},function(e,exports,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getNativeProps:function(e,t){if(!t.disabled)return t;var r={};for(var i in t)!n[i]&&t.hasOwnProperty(i)&&(r[i]=t[i]);return r}};e.exports=r},function(e,exports,t){"use strict";function n(){if(a)for(var e in s){var t=s[e],n=a.indexOf(e);if(n>-1||o(!1),!u.plugins[n]){t.extractEvents||o(!1),u.plugins[n]=t;var i=t.eventTypes;for(var l in i)r(i[l],t,l)||o(!1)}}}function r(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)&&o(!1),u.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];i(s,t,n)}return!0}return!!e.registrationName&&(i(e.registrationName,t,n),!0)}function i(e,t,n){u.registrationNameModules[e]&&o(!1),u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=t(0),a=null,s={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){a&&o(!1),a=Array.prototype.slice.call(e),n()},injectEventPluginsByName:function(e){var t=!1;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];s.hasOwnProperty(r)&&s[r]===i||(s[r]&&o(!1),s[r]=i,t=!0)}t&&n()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=u.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){a=null;for(var e in s)s.hasOwnProperty(e)&&delete s[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=u.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=u},function(e,exports,t){"use strict";function n(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=p++,d[e[v]]={}),d[e[v]]}var r,i=t(2),o=t(14),a=t(34),s=t(167),u=t(89),l=t(195),c=t(56),d={},f=!1,p=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),m=i({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,i=n(r),s=a.registrationNameDependencies[e],u=o.topLevelTypes,l=0;l<s.length;l++){var d=s[l];i.hasOwnProperty(d)&&i[d]||(d===u.topWheel?c("wheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",r):c("mousewheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",r):m.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",r):d===u.topScroll?c("scroll",!0)?m.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",r):m.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):d===u.topFocus||d===u.topBlur?(c("focus",!0)?(m.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",r),m.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",r)):c("focusin")&&(m.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",r),m.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",r)),i[u.topBlur]=!0,i[u.topFocus]=!0):h.hasOwnProperty(d)&&m.ReactEventListener.trapBubbledEvent(d,h[d],r),i[d]=!0)}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!r&&!f){var e=u.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),f=!0}}});e.exports=m},function(e,exports,t){"use strict";var n={};e.exports=n},function(e,exports,t){"use strict";var n=t(32),r=n({prop:null,context:null,childContext:null});e.exports=r},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(28),i=t(89),o=t(53),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(n,a),e.exports=n},function(e,exports,t){"use strict";var n=t(0),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,r,i,o,a,s,u){this.isInTransaction()&&n(!1);var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,r,i,o,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()||n(!1);for(var t=this.transactionWrappers,r=e;r<t.length;r++){var o,a=t[r],s=this.wrapperInitData[r];try{o=!0,s!==i.OBSERVED_ERROR&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(r+1)}catch(e){}}}this.wrapperInitData.length=0}},i={Mixin:r,OBSERVED_ERROR:{}};e.exports=i},function(e,exports,t){"use strict";function n(e){return i[e]}function r(e){return(""+e).replace(o,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;e.exports=r},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(13),c=t(6),d=n(c),f=t(133),p=n(f),h=t(105),v=n(h),m=t(132),g=n(m),y=t(99),b=n(y),w=t(9),_=n(w);t(234);var k=t(211),E=n(k),C=t(209),P=n(C),S=t(205),O=n(S),x=t(212),M=n(x),T=t(213),N=n(T),I=t(204),R=n(I),A=t(214),D=n(A),L=t(207),j=n(L),F=t(215),U=n(F),z=[{path:"/",action:function(){var e=(0,v.default)(b.default,"fade-in","fade-out");return u.default.createElement(e,{ref:"main"})}},{path:"/record",action:function(){var e=(0,v.default)(b.default,"fade-in","fade-out");return u.default.createElement(e,{ref:"main"})}},{path:"/pick",action:function(){var e=(0,v.default)(b.default,"fade-in","fade-out");return u.default.createElement(e,{ref:"main"})}},{path:"/cam-picker",action:function(){var e=(0,v.default)(b.default,"fade-in","fade-out");return u.default.createElement(e,{ref:"main"})}},{path:"/PreviewGalleryRenderer",action:function(){var e=(0,v.default)(E.default,"fade-in","fade-out");return u.default.createElement(e,{ref:"PreviewGalleryRenderer"})}}],V=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"#secure"===window.location.hash&&(window.isSecureMode=!0,window.location.hash=""),n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){window.addEventListener("visibilitychange",this)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("visibilitychange",this)}},{key:"handleEvent",value:function(e){"visibilitychange"===e.type&&_.default.sendEvt("visiblechange")}},{key:"render",value:function(){return u.default.createElement("div",{id:"app",tabIndex:"-1"},u.default.createElement(p.default,{ref:"history",routes:z}),u.default.createElement(P.default,null),u.default.createElement(O.default,null),u.default.createElement(g.default,null),u.default.createElement(M.default,null),u.default.createElement(R.default,null),u.default.createElement(D.default,null),u.default.createElement(j.default,null),u.default.createElement(N.default,null),u.default.createElement(U.default,{handleZoomChange:_.default.handleZoomChange}))}}]),t}(d.default);exports.default=V,(0,l.render)(u.default.createElement(V,null),document.getElementById("root"))},function(e,exports,t){"use strict";function n(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function r(e,t,n){l.insertTreeBefore(e,t,n)}function i(e,t,n){Array.isArray(t)?a(e,t[0],t[1],n):v(e,t,n)}function o(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],s(e,t,n),e.removeChild(n)}e.removeChild(t)}function a(e,t,n,r){for(var i=t;;){var o=i.nextSibling;if(v(e,i,r),i===n)break;i=o}}function s(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function u(e,t,n){var r=e.parentNode,i=e.nextSibling;i===t?n&&v(r,document.createTextNode(n),i):n?(h(i,n),s(r,i,t)):s(r,e,t)}var l=t(23),c=t(139),d=t(82),f=(t(4),t(8),t(51)),p=t(57),h=t(96),v=f(function(e,t,n){e.insertBefore(t,n)}),m=c.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:m,replaceDelimitedText:u,processUpdates:function(e,t){for(var a=0;a<t.length;a++){var s=t[a];switch(s.type){case d.INSERT_MARKUP:r(e,s.content,n(e,s.afterNode));break;case d.MOVE_EXISTING:i(e,s.fromNode,n(e,s.afterNode));break;case d.SET_MARKUP:p(e,s.content);break;case d.TEXT_CONTENT:h(e,s.content);break;case d.REMOVE_NODE:o(e,s.fromNode)}}}};e.exports=g},function(e,exports,t){"use strict";function n(e){return!!u.hasOwnProperty(e)||!s.hasOwnProperty(e)&&(a.test(e)?(u[e]=!0,!0):(s[e]=!0,!1))}function r(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var i=t(20),o=(t(4),t(157),t(8),t(197)),a=(t(1),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),s={},u={},l={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+o(e)},setAttributeForID:function(e,t){e.setAttribute(i.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){if(r(n,t))return"";var a=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===t?a+'=""':a+"="+o(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+o(t):null},createMarkupForCustomAttribute:function(e,t){return n(e)&&null!=t?e+"="+o(t):""},setValueForProperty:function(e,t,n){var o=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(o){var a=o.mutationMethod;if(a)a(e,n);else{if(r(o,n))return void this.deleteValueForProperty(e,t);if(o.mustUseProperty){var s=o.propertyName;o.hasSideEffects&&""+e[s]==""+n||(e[s]=n)}else{var u=o.attributeName,c=o.attributeNamespace;c?e.setAttributeNS(c,u,""+n):o.hasBooleanValue||o.hasOverloadedBooleanValue&&!0===n?e.setAttribute(u,""):e.setAttribute(u,""+n)}}}else if(i.isCustomAttribute(t))return void l.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,r){if(n(t)){null==r?e.removeAttribute(t):e.setAttribute(t,""+r)}},deleteValueForProperty:function(e,t){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?e[o]=!1:n.hasSideEffects&&""+e[o]==""||(e[o]="")}else e.removeAttribute(n.attributeName)}else i.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=l},function(e,exports,t){"use strict";function n(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function r(e){return e===g.topMouseMove||e===g.topTouchMove}function i(e){return e===g.topMouseDown||e===g.topTouchStart}function o(e,t,n,r){var i=e.type||"unknown-event";e.currentTarget=y.getNodeFromInstance(r),t?h.invokeGuardedCallbackWithCatch(i,n,e):h.invokeGuardedCallback(i,n,e),e.currentTarget=null}function a(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)o(e,t,n[i],r[i]);else n&&o(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function s(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function u(e){var t=s(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)&&v(!1),e.currentTarget=t?y.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function c(e){return!!e._dispatchListeners}var d,f,p=t(14),h=t(48),v=t(0),m=(t(1),{injectComponentTree:function(e){d=e},injectTreeTraversal:function(e){f=e}}),g=p.topLevelTypes,y={isEndish:n,isMoveish:r,isStartish:i,executeDirectDispatch:l,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:u,hasDispatches:c,getInstanceFromNode:function(e){return d.getInstanceFromNode(e)},getNodeFromInstance:function(e){return d.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,i){return f.traverseEnterLeave(e,t,n,r,i)},injection:m};e.exports=y},function(e,exports,t){"use strict";function n(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1))).replace(t,function(e){return n[e]})}var i={escape:n,unescape:r};e.exports=i},function(e,exports,t){"use strict";function n(e){null!=e.checkedLink&&null!=e.valueLink&&u(!1)}function r(e){n(e),(null!=e.value||null!=e.onChange)&&u(!1)}function i(e){n(e),(null!=e.checked||null!=e.onChange)&&u(!1)}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var a=t(86),s=t(37),u=t(0),l=(t(1),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),c={value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:a.func},d={},f={checkPropTypes:function(e,t,n){for(var r in c){if(c.hasOwnProperty(r))var i=c[r](t,r,e,s.prop);if(i instanceof Error&&!(i.message in d)){d[i.message]=!0;o(n)}}},getValue:function(e){return e.valueLink?(r(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(r(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=f},function(e,exports,t){"use strict";var n=t(0),r=!1,i={unmountIDFromEnvironment:null,replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r&&n(!1),i.unmountIDFromEnvironment=e.unmountIDFromEnvironment,i.replaceNodeWithMarkup=e.replaceNodeWithMarkup,i.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};e.exports=i},function(e,exports,t){"use strict";function n(e,t,n,i){try{return t(n,i)}catch(e){return void(null===r&&(r=e))}}var r=null,i={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};e.exports=i},function(e,exports,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,exports,t){"use strict";var n=!1;e.exports=n},function(e,exports,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e};e.exports=n},function(e,exports,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,t>=32||13===t?t:0}e.exports=n},function(e,exports,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function r(e){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,exports,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,exports,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[i]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=n},function(e,exports,t){"use strict";function n(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}var r,i=t(7);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=n},function(e,exports,t){"use strict";var n=t(7),r=/^[ \r\n\t\f]/,i=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=t(51),a=o(function(e,t){e.innerHTML=t});if(n.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(a=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),r.test(t)||"<"===t[0]&&i.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),s=null}e.exports=a},function(e,exports,t){"use strict";function n(e,t){var n=null===e||!1===e,i=null===t||!1===t;if(n||i)return n===i;var o=void 0===e?"undefined":r(e),a=void 0===t?"undefined":r(t);return"string"===o||"number"===o?"string"===a||"number"===a:"object"===a&&e.type===t.type&&e.key===t.key}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n},function(e,exports,t){"use strict";function n(e,t){return e&&"object"===(void 0===e?"undefined":o(e))&&null!=e.key?l.escape(e.key):t.toString(36)}function r(e,t,i,f){var p=void 0===e?"undefined":o(e);if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||a.isValidElement(e))return i(f,e,""===t?c+n(e,0):t),1;var h,v,m=0,g=""===t?c:t+d;if(Array.isArray(e))for(var y=0;y<e.length;y++)h=e[y],v=g+n(h,y),m+=r(h,v,i,f);else{var b=s(e);if(b){var w,_=b.call(e);if(b!==e.entries)for(var k=0;!(w=_.next()).done;)h=w.value,v=g+n(h,k++),m+=r(h,v,i,f);else for(;!(w=_.next()).done;){var E=w.value;E&&(h=E[1],v=g+l.escape(E[0])+d+n(h,0),m+=r(h,v,i,f))}}else if("object"===p){String(e);u(!1)}}return m}function i(e,t,n){return null==e?0:r(e,"",t,n)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(t(18),t(11)),s=t(55),u=t(0),l=t(45),c=(t(1),"."),d=":";e.exports=i},function(e,exports,t){"use strict";var n=(t(2),t(10)),r=(t(1),n);e.exports=r},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){if(!e||"string"!=typeof e)throw new Error("Event name should be a valid non-empty string!")}function i(e){if("function"!=typeof e)throw new Error("Handler should be a function!")}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){n(this,e)}return o(e,[{key:"on",value:function(e,t){r(e),i(t),this.listeners||(this.listeners=new Map);var n=this.listeners.get(e);n||(n=new Set,this.listeners.set(e,n)),n.add(t)}},{key:"off",value:function(e,t){r(e),i(t);var n=this.listeners.get(e);n&&(n.delete(t),n.size||this.listeners.delete(e))}},{key:"offAll",value:function(e){if(void 0===e)return void this.listeners.clear();r(e);var t=this.listeners.get(e);t&&(t.clear(),this.listeners.delete(e))}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r(e),this.listeners||(this.listeners=new Map);var o=this.listeners.get(e);o&&o.forEach(function(e){try{e.apply(null,n)}catch(e){}})}}]),e}();exports.default=a},function(e,exports,t){"use strict";var n=t(10),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!0),{remove:function(){e.removeEventListener(t,r,!0)}}):{remove:n}},registerDefault:function(){}};e.exports=r},function(e,exports,t){"use strict";function n(e){try{e.focus()}catch(e){}}e.exports=n},function(e,exports,t){"use strict";function n(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=n},function(e,exports,t){"use strict";function n(e){return o||i(!1),d.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||(o.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",a[e]=!o.firstChild),a[e]?d[e]:null}var r=t(7),i=t(0),o=r.canUseDOM?document.createElement("div"):null,a={},s=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:s,option:s,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:l,th:l};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(e){d[e]=c,a[e]=!0}),e.exports=n},function(e,exports,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!==(void 0===e?"undefined":i(e))||null===e||"object"!==(void 0===t?"undefined":i(t))||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var s=0;s<r.length;s++)if(!o.call(t,r[s])||!n(e[r[s]],t[r[s]]))return!1;return!0}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.prototype.hasOwnProperty;e.exports=r},function(e,exports,t){"use strict";exports.__esModule=!0;exports.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},exports.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e},exports.stripPrefix=function(e,t){return 0===e.indexOf(t)?e.substr(t.length):e},exports.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},exports.parsePath=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),t=decodeURI(t),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},exports.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,i=encodeURI(t||"/");return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(e,exports,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.exports=a},function(e,exports,t){"use strict";function n(){this._callbacks=null,this._contexts=null}var r=t(2),i=t(17),o=t(0);r(n.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length&&o(!1),this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(n),e.exports=n},function(e,exports,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,exports,t){"use strict";function n(e){return(""+e).replace(b,"$&/")}function r(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function o(e,t,n){if(null==e)return e;var o=r.getPooled(t,n);m(e,i,o),r.release(o)}function a(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function s(e,t,r){var i=e.result,o=e.keyPrefix,a=e.func,s=e.context,l=a.call(s,t,e.count++);Array.isArray(l)?u(l,i,r,v.thatReturnsArgument):null!=l&&(h.isValidElement(l)&&(l=h.cloneAndReplaceKey(l,o+(!l.key||t&&t.key===l.key?"":n(l.key)+"/")+r)),i.push(l))}function u(e,t,r,i,o){var u="";null!=r&&(u=n(r)+"/");var l=a.getPooled(t,u,i,o);m(e,s,l),a.release(l)}function l(e,t,n){if(null==e)return e;var r=[];return u(e,r,null,t,n),r}function c(e,t,n){return null}function d(e,t){return m(e,c,null)}function f(e){var t=[];return u(e,t,null,v.thatReturnsArgument),t}var p=t(17),h=t(11),v=t(10),m=t(59),g=p.twoArgumentPooler,y=p.fourArgumentPooler,b=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},p.addPoolingTo(r,g),a.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p.addPoolingTo(a,y);var w={forEach:o,map:l,mapIntoWithKeyPrefixInternal:u,count:d,toArray:f};e.exports=w},function(e,exports,t){"use strict";function n(e,t){var n=k.hasOwnProperty(t)?k[t]:null;C.hasOwnProperty(t)&&n!==w.OVERRIDE_BASE&&m(!1),e&&n!==w.DEFINE_MANY&&n!==w.DEFINE_MANY_MERGED&&m(!1)}function r(e,t){if(t){"function"==typeof t&&m(!1),p.isValidElement(t)&&m(!1);var r=e.prototype,i=r.__reactAutoBindPairs;t.hasOwnProperty(b)&&E.mixins(e,t.mixins);for(var o in t)if(t.hasOwnProperty(o)&&o!==b){var u=t[o],l=r.hasOwnProperty(o);if(n(l,o),E.hasOwnProperty(o))E[o](e,u);else{var c=k.hasOwnProperty(o),d="function"==typeof u,f=d&&!c&&!l&&!1!==t.autobind;if(f)i.push(o,u),r[o]=u;else if(l){var h=k[o];(!c||h!==w.DEFINE_MANY_MERGED&&h!==w.DEFINE_MANY)&&m(!1),h===w.DEFINE_MANY_MERGED?r[o]=a(r[o],u):h===w.DEFINE_MANY&&(r[o]=s(r[o],u))}else r[o]=u}}}}function i(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in E;i&&m(!1);var o=n in e;o&&m(!1),e[n]=r}}}function o(e,t){e&&t&&"object"===(void 0===e?"undefined":c(e))&&"object"===(void 0===t?"undefined":c(t))||m(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]&&m(!1),e[n]=t[n]);return e}function a(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return o(i,n),o(i,r),i}}function s(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function u(e,t){var n=t.bind(e);return n}function l(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=u(e,i)}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=t(2),f=t(73),p=t(11),h=(t(37),t(36),t(85)),v=t(31),m=t(0),g=t(32),y=t(16),b=(t(1),y({mixins:null})),w=g({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),_=[],k={mixins:w.DEFINE_MANY,statics:w.DEFINE_MANY,propTypes:w.DEFINE_MANY,contextTypes:w.DEFINE_MANY,childContextTypes:w.DEFINE_MANY,getDefaultProps:w.DEFINE_MANY_MERGED,getInitialState:w.DEFINE_MANY_MERGED,getChildContext:w.DEFINE_MANY_MERGED,render:w.DEFINE_ONCE,componentWillMount:w.DEFINE_MANY,componentDidMount:w.DEFINE_MANY,componentWillReceiveProps:w.DEFINE_MANY,shouldComponentUpdate:w.DEFINE_ONCE,componentWillUpdate:w.DEFINE_MANY,componentDidUpdate:w.DEFINE_MANY,componentWillUnmount:w.DEFINE_MANY,updateComponent:w.OVERRIDE_BASE},E={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=d({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=d({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=a(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=d({},e.propTypes,t)},statics:function(e,t){i(e,t)},autobind:function(){}},C={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},P=function(){};d(P.prototype,f.prototype,C);var S={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindPairs.length&&l(this),this.props=e,this.context=t,this.refs=v,this.updater=n||h,this.state=null;var r=this.getInitialState?this.getInitialState():null;("object"!==(void 0===r?"undefined":c(r))||Array.isArray(r))&&m(!1),this.state=r};t.prototype=new P,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],_.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render||m(!1);for(var n in k)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){_.push(e)}}};e.exports=S},function(e,exports,t){"use strict";function n(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||i}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=t(85),o=(t(8),t(50),t(31)),a=t(0);t(1);n.prototype.isReactComponent={},n.prototype.setState=function(e,t){"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e&&null!=e&&a(!1),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};e.exports=n},function(e,exports,t){"use strict";var n=t(42),r=t(155),i={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:n.dangerouslyReplaceNodeWithMarkup,unmountIDFromEnvironment:function(e){}};e.exports=i},function(e,exports,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,exports,t){"use strict";function n(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=s.getValue(e);null!=t&&r(this,Boolean(e.multiple),t)}}function r(e,t,n){var r,i,o=u.getNodeFromInstance(e).options;if(t){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function i(e){var t=this._currentElement.props,r=s.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),l.asap(n,this),r}var o=t(2),a=t(33),s=t(46),u=t(4),l=t(12),c=(t(1),!1),d={getNativeProps:function(e,t){return o({},a.getNativeProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=s.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:i.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||c||(c=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=s.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,r(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?r(e,Boolean(t.multiple),t.defaultValue):r(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=d},function(e,exports,t){"use strict";function n(){if(d.current){var e=d.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function r(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;i("uniqueKey",e,t)}}function i(e,t,r){var i=n();if(!i){var o="string"==typeof r?r:r.displayName||r.name;o&&(i=" Check the top-level render call using <"+o+">.")}var a=h[e]||(h[e]={});if(a[i])return null;a[i]=!0;var s={parentOrOwner:i,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return t&&t._owner&&t._owner!==d.current&&(s.childOwner=" It was passed a child from "+t._owner.getName()+"."),s}function o(e,t){if("object"===(void 0===e?"undefined":u(e)))if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];l.isValidElement(i)&&r(i,t)}else if(l.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var o=f(e);if(o&&o!==e.entries)for(var a,s=o.call(e);!(a=s.next()).done;)l.isValidElement(a.value)&&r(a.value,t)}}function a(e,t,r,i){for(var o in t)if(t.hasOwnProperty(o)){var a;try{"function"!=typeof t[o]&&p(!1),a=t[o](r,o,e,i)}catch(e){a=e}if(a instanceof Error&&!(a.message in v)){v[a.message]=!0;n()}}}function s(e){var t=e.type;if("function"==typeof t){var n=t.displayName||t.name;t.propTypes&&a(n,t.propTypes,e.props,c.prop),t.getDefaultProps}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=t(11),c=t(37),d=(t(36),t(18)),f=(t(50),t(55)),p=t(0),h=(t(1),{}),v={},m={createElement:function(e,t,n){var r="string"==typeof e||"function"==typeof e,i=l.createElement.apply(this,arguments);if(null==i)return i;if(r)for(var a=2;a<arguments.length;a++)o(arguments[a],e);return s(i),i},createFactory:function(e){var t=m.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var r=l.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)o(arguments[i],r.type);return s(r),r}};e.exports=m},function(e,exports,t){"use strict";var n,r={injectEmptyComponentFactory:function(e){n=e}},i={create:function(e){return n(e)}};i.injection=r,e.exports=i},function(e,exports,t){"use strict";var n={logTopLevelRenders:!1};e.exports=n},function(e,exports,t){"use strict";function n(e){return i(document.documentElement,e)}var r=t(159),i=t(109),o=t(63),a=t(64),s={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:s.hasSelectionCapabilities(e)?s.getSelection(e):null}},restoreSelection:function(e){var t=a(),r=e.focusedElem,i=e.selectionRange;t!==r&&n(r)&&(s.hasSelectionCapabilities(r)&&s.setSelection(r,i),o(r))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if(void 0===i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(e,t)}};e.exports=s},function(e,exports,t){"use strict";function n(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function r(e){return e?e.nodeType===T?e.documentElement:e.firstChild:null}function i(e){return e.getAttribute&&e.getAttribute(x)||""}function o(e,t,n,r,i){if(y.logTopLevelRenders){var o=e._currentElement.props,a=o.type;"React mount: "+("string"==typeof a?a:a.displayName||a.name)}var s=w.mountComponent(e,n,null,v(e,t),i);e._renderedComponent._topLevelWrapper=e,A._mountImageIntoNode(s,t,e,r,n)}function a(e,t,n,r){var i=k.ReactReconcileTransaction.getPooled(!n&&m.useCreateElement);i.perform(o,null,e,t,i,n,r),k.ReactReconcileTransaction.release(i)}function s(e,t,n){for(w.unmountComponent(e,n),t.nodeType===T&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=r(e);if(t){var n=h.getInstanceFromNode(t);return!(!n||!n._nativeParent)}}function l(e){var t=r(e),n=t&&h.getInstanceFromNode(t);return n&&!n._nativeParent?n:null}function c(e){var t=l(e);return t?t._nativeContainerInfo._topLevelWrapper:null}var d=t(23),f=t(20),p=t(35),h=(t(18),t(4)),v=t(150),m=t(154),g=t(11),y=t(79),b=(t(8),t(170)),w=t(24),_=t(87),k=t(12),E=t(31),C=t(94),P=t(0),S=t(57),O=t(58),x=(t(1),f.ID_ATTRIBUTE_NAME),M=f.ROOT_ATTRIBUTE_NAME,T=9,N={},I=1,R=function(){this.rootID=I++};R.prototype.isReactComponent={},R.prototype.render=function(){return this.props};var A={TopLevelWrapper:R,_instancesByReactRootID:N,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return A.scrollMonitor(n,function(){_.enqueueElementInternal(e,t),r&&_.enqueueCallbackInternal(e,r)}),e},_renderNewRootComponent:function(e,t,n,r){(!t||1!==t.nodeType&&t.nodeType!==T&&11!==t.nodeType)&&P(!1),p.ensureScrollValueMonitoring();var i=C(e);k.batchedUpdates(a,i,t,n,r);var o=i._instance.rootID;return N[o]=i,i},renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||null==e._reactInternalInstance)&&P(!1),A._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,o){_.validateCallback(o,"ReactDOM.render"),g.isValidElement(t)||P(!1);var a=g(R,null,null,null,null,null,t),s=c(n);if(s){var l=s._currentElement,d=l.props;if(O(d,t)){var f=s._renderedComponent.getPublicInstance(),p=o&&function(){o.call(f)};return A._updateRootComponent(s,a,n,p),f}A.unmountComponentAtNode(n)}var h=r(n),v=h&&!!i(h),m=u(n),y=v&&!s&&!m,b=A._renderNewRootComponent(a,n,y,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):E)._renderedComponent.getPublicInstance();return o&&o.call(b),b},render:function(e,t,n){return A._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){(!e||1!==e.nodeType&&e.nodeType!==T&&11!==e.nodeType)&&P(!1);var t=c(e);if(!t){u(e),1===e.nodeType&&e.hasAttribute(M);return!1}return delete N[t._instance.rootID],k.batchedUpdates(s,t,e,!1),!0},_mountImageIntoNode:function(e,t,i,o,a){if((!t||1!==t.nodeType&&t.nodeType!==T&&11!==t.nodeType)&&P(!1),o){var s=r(t);if(b.canReuseMarkup(e,s))return void h.precacheNode(i,s);var u=s.getAttribute(b.CHECKSUM_ATTR_NAME);s.removeAttribute(b.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(b.CHECKSUM_ATTR_NAME,u);var c=e,f=n(c,l);c.substring(f-20,f+20),l.substring(f-20,f+20);t.nodeType===T&&P(!1)}if(t.nodeType===T&&P(!1),a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);d.insertTreeBefore(t,e,null)}else S(t,e),h.precacheNode(i,t.firstChild)}};e.exports=A},function(e,exports,t){"use strict";var n=t(32),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=r},function(e,exports,t){"use strict";function n(e){if("function"==typeof e.type)return e.type;var t=e.type,n=c[t];return null==n&&(c[t]=n=u(t)),n}function r(e){return l||s(!1),new l(e)}function i(e){return new d(e)}function o(e){return e instanceof d}var a=t(2),s=t(0),u=null,l=null,c={},d=null,f={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){d=e},injectComponentClasses:function(e){a(c,e)}},p={getComponentClassForElement:n,createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:f};e.exports=p},function(e,exports,t){"use strict";var n=t(11),r=t(0),i={NATIVE:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||!1===e?i.EMPTY:n.isValidElement(e)?"function"==typeof e.type?i.COMPOSITE:i.NATIVE:void r(!1)}};e.exports=i},function(e,exports,t){"use strict";var n=(t(1),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){},enqueueReplaceState:function(e,t){},enqueueSetState:function(e,t){}});e.exports=n},function(e,exports,t){"use strict";function n(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function r(e){function t(t,n,r,i,o,a){if(i=i||w,a=a||r,null==n[r]){var s=g[o];return t?new Error("Required "+s+" `"+a+"` was not specified in `"+i+"`."):null}return e(n,r,i,o,a)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,r,i,o){var a=t[n];if(f(a)!==e){var s=g[i],u=p(a);return new Error("Invalid "+s+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `"+e+"`.")}return null}return r(t)}function o(e){function t(t,n,r,i,o){if("function"!=typeof e)return new Error("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a)){var s=g[i],u=f(a);return new Error("Invalid "+s+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<a.length;l++){var c=e(a,l,r,i,o+"["+l+"]");if(c instanceof Error)return c}return null}return r(t)}function a(e){function t(t,n,r,i,o){if(!(t[n]instanceof e)){var a=g[i],s=e.name||w,u=h(t[n]);return new Error("Invalid "+a+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null}return r(t)}function s(e){function t(t,r,i,o,a){for(var s=t[r],u=0;u<e.length;u++)if(n(s,e[u]))return null;var l=g[o],c=JSON.stringify(e);return new Error("Invalid "+l+" `"+a+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+c+".")}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function u(e){function t(t,n,r,i,o){if("function"!=typeof e)return new Error("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=t[n],s=f(a);if("object"!==s){var u=g[i];return new Error("Invalid "+u+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected an object.")}for(var l in a)if(a.hasOwnProperty(l)){var c=e(a,l,r,i,o+"."+l);if(c instanceof Error)return c}return null}return r(t)}function l(e){function t(t,n,r,i,o){for(var a=0;a<e.length;a++){if(null==(0,e[a])(t,n,r,i,o))return null}var s=g[i];return new Error("Invalid "+s+" `"+o+"` supplied to `"+r+"`.")}return r(Array.isArray(e)?t:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function c(e){function t(t,n,r,i,o){var a=t[n],s=f(a);if("object"!==s){var u=g[i];return new Error("Invalid "+u+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.")}for(var l in e){var c=e[l];if(c){var d=c(a,l,r,i,o+"."+l);if(d)return d}}return null}return r(t)}function d(e){switch(void 0===e?"undefined":v(e)){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(d);if(null===e||m.isValidElement(e))return!0;var t=b(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!d(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!d(i[1]))return!1}return!0;default:return!1}}function f(e){var t=void 0===e?"undefined":v(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function p(e){var t=f(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function h(e){return e.constructor&&e.constructor.name?e.constructor.name:w}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=t(11),g=t(36),y=t(10),b=t(55),w="<<anonymous>>",_={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:function(){return r(y.thatReturns(null))}(),arrayOf:o,element:function(){function e(e,t,n,r,i){if(!m.isValidElement(e[t])){var o=g[r];return new Error("Invalid "+o+" `"+i+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return r(e)}(),instanceOf:a,node:function(){function e(e,t,n,r,i){if(!d(e[t])){var o=g[r];return new Error("Invalid "+o+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return r(e)}(),objectOf:u,oneOf:s,oneOfType:l,shape:c};e.exports=_},function(e,exports,t){"use strict";function n(e){o.enqueueUpdate(e)}function r(e,t){var n=i.get(e);return n||null}var i=("function"==typeof Symbol&&Symbol.iterator,t(18),t(49)),o=t(12),a=t(0),s=(t(1),{isMounted:function(e){var t=i.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,i){s.validateCallback(t,i);var o=r(e);if(!o)return null;o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],n(o)},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],n(e)},enqueueForceUpdate:function(e){var t=r(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,n(t))},enqueueReplaceState:function(e,t){var i=r(e,"replaceState");i&&(i._pendingStateQueue=[t],i._pendingReplaceState=!0,n(i))},enqueueSetState:function(e,t){var i=r(e,"setState");if(i){(i._pendingStateQueue||(i._pendingStateQueue=[])).push(t),n(i)}},enqueueElementInternal:function(e,t){e._pendingElement=t,n(e)},validateCallback:function(e,t){e&&"function"!=typeof e&&a(!1)}});e.exports=s},function(e,exports,t){"use strict";e.exports="15.1.0"},function(e,exports,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,exports,t){"use strict";function n(e,t){if(null==t&&r(!1),null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n&&i?(e.push.apply(e,t),e):n?(e.push(t),e):i?[e].concat(t):[e,t]}var r=t(0);e.exports=n},function(e,exports,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=n},function(e,exports,t){"use strict";function n(e){for(var t;(t=e._renderedNodeType)===r.COMPOSITE;)e=e._renderedComponent;return t===r.NATIVE?e._renderedComponent:t===r.EMPTY?null:void 0}var r=t(84);e.exports=n},function(e,exports,t){"use strict";function n(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=t(7),i=null;e.exports=n},function(e,exports,t){"use strict";function n(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function r(e){var t,o=null===e||!1===e;if(o)t=s.create(r);else if("object"===(void 0===e?"undefined":i(e))){var a=e;(!a||"function"!=typeof a.type&&"string"!=typeof a.type)&&l(!1),t="string"==typeof a.type?u.createInternalComponent(a):n(a.type)?new a.type(a):new c(a)}else"string"==typeof e||"number"==typeof e?t=u.createInstanceForText(e):l(!1);t._mountIndex=0,t._mountImage=null;return t}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t(2),a=t(146),s=t(78),u=t(83),l=(t(8),t(0)),c=(t(1),function(e){this.construct(e)});o(c.prototype,a.Mixin,{_instantiateReactComponent:r});e.exports=r},function(e,exports,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&r[e.type]||"textarea"===t)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,exports,t){"use strict";var n=t(7),r=t(40),i=t(57),o=function(e,t){e.textContent=t};n.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){i(e,r(t))})),e.exports=o},function(e,exports,t){"use strict";var n=function(){};e.exports=n},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(22),u=n(s),l=t(216),c=n(l),d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.items={},(e||[]).forEach(n.add,n),n}return o(t,e),a(t,[{key:"add",value:function(e){var t=this,n={name:e.name,url:e.url,setting:e.setting,enabled:!1};this.items[e.name]=n,this.isEnabled(n).then(function(e){t.setEnabled(n,e),t.observeSetting(n)})}},{key:"isEnabled",value:function(e){return new Promise(function(t){setTimeout(function(){var n=navigator.mozSettings,r=e.setting;n&&(n.createLock().get(r).onsuccess=function(e){var n=e.target.result[r];t(n)})})})}},{key:"observeSetting",value:function(e){var t=this,n=navigator.mozSettings,r=e.setting;n&&n.addObserver(r,function(n){t.setEnabled(e,n.settingValue)})}},{key:"setEnabled",value:function(e,t){e.enabled=t}},{key:"play",value:function(e){var t=this.items[e];t.audio||(t.audio=this.createAudio(t.url)),this.playSound(t)}},{key:"player",value:function(e){this.play(e)}},{key:"playSound",value:function(e){e.enabled&&e.audio.cloneNode(!0).play()}},{key:"createAudio",value:function(e){var t=new Audio(e);return t.mozAudioChannelType="notification",t}}]),t}(u.default),f=new d(c.default.sounds.list);exports.default=f},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l),d=t(100),f=n(d),p=t(25),h=n(p),v=t(208),m=n(v),g=t(21),y=n(g),b=t(206),w=n(b),_=t(30),k=n(_),E=t(5),C=n(E),P=t(9),S=n(P),O=t(29),x=n(O),M=t(222),T=n(M),N=t(19),I=n(N),R=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.ftu=n.checkFtu(),n.state={mode:n.ftu?"ftu":"picture",activity:"record"===x.default.name||"pick"===x.default.name||I.default.activity},n.disableKey=!1,C.default.register("update",n),n.state.activity&&(n.disableKey=!0,n.launchingActivity=!0,y.default.settings.dontSave()),n.endCall=!1,n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;navigator.mozCameras||C.default.request("showDialog",{type:"alert",header:"action-not-allowed",content:"camera-disabled",ok:"ok",onClosed:function(){window.close()}}),I.default.isActivity&&S.default.load(),"ftu"===this.state.mode&&(C.default.request("setIndicatorsVisibility",!1),C.default.request("setZoomVisibility",!1)),this.updateSoftKey(),x.default.setupListener(),x.default.pick||T.default.watch(),S.default.on("recording-stop",function(){e.setState({mode:"video"}),C.default.request("hideRecordingTime"),S.default.recording=!1}),S.default.on("busy",function(){e.disableKey=!0}),S.default.on("ready",function(){e.launchingActivity||(e.disableKey=!1)}),S.default.on("takepic:success",function(){"pick"!==x.default.name&&h.default.register({left:"preview",center:"icon=shutter",right:"options"},e.element)}),S.default.on("visiblechange",function(){e.onVisibilityChange()}),S.default.on("change:mode",function(t){if(t!==S.default.mode){var n=y.default.settings.mode.selected("key");S.default.setMode(n),e.setState({mode:n})}}),this.resetFlashlight()}},{key:"shouldComponentUpdate",value:function(){return!S.default.FileSizeLimitReached||(this.stopRecording().then(function(){return S.default.FileSizeLimitReached=!1,S.default.getFreeStorageSpace()}).then(function(e){S.default.checkStorageSpace(e)}),!1)}},{key:"componentDidUpdate",value:function(){if(this.shouldSwitchCamera()){if(this.shouldSwitchMode()){var e=y.default.settings.mode.selected("key");S.default.setMode(e),this.setState({mode:e})}S.default.setCamera(y.default.settings.cameras.selected("key"))}else this.shouldSwitchMode()&&this.switchMode(y.default.settings.mode.selected("key"));this.updateSoftKey(),this.state.activity&&(this.launchingActivity=!1,this.disableKey=!1)}},{key:"onVisibilityChange",value:function(){document.getElementById("previewGallery")||(document.hidden?this.onHidden():this.onVisible())}},{key:"onVisible",value:function(){y.default.settings.fetch(),S.default.load(),!x.default.pick&&T.default.watch(),this.resetFlashlight(),f.default.CheckCurrentPreviewItem().then(function(){C.default.request("update")},function(){C.default.request("update")})}},{key:"onHidden",value:function(){T.default.stopWatching(),this.timer&&(this.clearCaptureTimer(),C.default.request("showCaptureTimer",-1)),this.stopRecording(),S.default.release()}},{key:"update",value:function(){this.setState({})}},{key:"shouldSwitchCamera",value:function(){return y.default.settings.cameras.selected("key")!==S.default.selectedCamera}},{key:"shouldSwitchMode",value:function(){return"recording"!==this.state.mode&&(this.state.mode!==S.default.mode||y.default.settings.mode.selected("key")!==this.state.mode&&1===y.default.getSupportedModes().length)&&!S.default.isBusy&&"ftu"!==this.state.mode}},{key:"updateSoftKey",value:function(){switch(this.state.mode){case"ftu":h.default.register({center:"ok"},this.element);break;case"picture":h.default.register({left:"pick"===x.default.name?"cancel":0===f.default.items.length?"":"preview",center:"icon=shutter",right:"options"},this.element);break;case"video":h.default.register({left:"pick"===x.default.name?"cancel":0===f.default.items.length?"":"preview",center:"icon=recording",right:"options"},this.element);break;case"recording":h.default.register({center:"icon=stop"},this.element)}}},{key:"onKeyDown",value:function(e){if("MicrophoneToggle"===e.key&&("video"===this.state.mode||"recording"===this.state.mode))return void e.preventDefault();if(!this.disableKey&&!this.seconds)switch(e.key){case"Enter":switch(this.state.mode){case"picture":if(h.default.register({left:"pick"===x.default.name?"cancel":0===f.default.items.length?"":"preview",center:"",right:"options"},this.element),this.checkCaptureTimerSet())return void this.doCaptureWithTimer();this.capture();break;case"ftu":this.setState({mode:"picture"}),C.default.request("setIndicatorsVisibility",!0),C.default.request("setZoomVisibility",!0),C.default.request("focus");break;case"video":case"recording":S.default.recording&&!this.recordingGreyout?this.stopRecording():this.recordingGreyout||this.startRecording()}break;case"ArrowLeft":case"ArrowRight":if("picture"===this.state.mode||"video"===this.state.mode){if(1===y.default.getSupportedModes().length)return;var t="picture"===this.state.mode?"video":"picture";y.default.settings.mode.select(t),this.switchMode(t),window.performance.mark("modechange-start")}break;case"SoftLeft":if("pick"===x.default.name)return void window.close();0===f.default.items.length||S.default.recording||(h.default.register({left:"video"===this.state.mode?"":"zoom",center:"video"===this.state.mode?"icon=play":"",right:"options"},this.element),C.default.request("push","PreviewGalleryRenderer"),window.performance.mark("preview-lsk-start"));break;case"SoftRight":"picture"!==this.state.mode&&"video"!==this.state.mode||S.default.recording||C.default.request("showSettings",this.state.mode);break;case"ArrowUp":C.default.request("changeZoom",!0);break;case"ArrowDown":C.default.request("changeZoom",!1);break;case"Backspace":S.default.recording&&(this.stopRecording(),x.default.onActivityExit(),e.preventDefault());break;case"EndCall":S.default.recording&&(this.endCall=!0,this.stopRecording(),x.default.onActivityExit(),e.preventDefault())}}},{key:"switchMode",value:function(e){var t=this;S.default.setMode(e),S.default.configureHardware(e).then(function(){t.setState({mode:e})})}},{key:"checkCaptureTimerSet",value:function(){return y.default.settings.timer.selected("value")}},{key:"capture",value:function(){var e=this;window.performance.mark("takepicture-start"),S.default.takePicture({position:T.default.position}).then(function(e){return k.default.storePicture(e)}).then(function(e){f.default.onNewMedia(e).then(function(e){"pick"===x.default.name&&C.default.request("push","PreviewGalleryRenderer")}),window.performance.getEntriesByName("takepicture-start","mark").length>0&&(window.performance.mark("takepicture-end"),window.performance.measure("performance-takepicture","takepicture-start","takepicture-end"),window.performance.clearMeasures("performance-takepicture"),window.performance.clearMarks("takepicture-start"),window.performance.clearMarks("takepicture-end"))},function(t){e.updateSoftKey()})}},{key:"doCaptureWithTimer",value:function(){var e=this;C.default.request("setZoomVisibility",!1),C.default.request("setIndicatorsVisibility",!1),h.default.unregister(this.element),this.seconds=y.default.settings.timer.selected("value"),C.default.request("showCaptureTimer",this.seconds),this.timer&&this.clearCaptureTimer(),this.timer=setInterval(function(){--e.seconds>=0&&(C.default.request("showCaptureTimer",e.seconds),0===e.seconds&&(e.clearCaptureTimer(),C.default.request("setZoomVisibility",!0),C.default.request("setIndicatorsVisibility",!0),e.capture()))},1e3)}},{key:"clearCaptureTimer",value:function(){clearInterval(this.timer),this.timer=null,this.seconds=0}},{key:"startRecording",value:function(){var e=this,t=document.getElementById("software-keys-center");S.default.startRecording().then(function(){e.setState({mode:"recording"}),C.default.request("showRecordingTime"),e.recordingGreyout=!0,e.disableKey=!0,t.setAttribute("data-grey","true"),setTimeout(function(){e.recordingGreyout=!1,e.disableKey=!1,t.setAttribute("data-grey","false")},1200)},function(e){})}},{key:"stopRecording",value:function(){var e=this;return new Promise(function(t){S.default.stopRecording().then(function(t){t?(e.endCall&&(e.endCall=!1,window.close()),t.isVideo=!0,f.default.onNewMedia(t).then(function(t){"pick"===x.default.name?(e.state.mode="video",C.default.request("push","PreviewGalleryRenderer")):e.setState({mode:"video"})})):"recording"===e.state.mode&&e.setState({mode:"video"})}).catch(function(e){}),t()})}},{key:"checkFtu",value:function(){return null===localStorage.getItem("ftu.opened")&&!("record"===x.default.name||"pick"===x.default.name||I.default.activity)}},{key:"resetFlashlight",value:function(){navigator.getFlashlightManager().then(function(e){e.flashlightEnabled=!1})}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:"main",tabIndex:"-1",onKeyDown:function(t){e.onKeyDown(t)},ref:function(t){e.element=t}},u.default.createElement(m.default,{mode:this.state.mode,activity:this.state.activity}),this.ftu&&u.default.createElement(w.default,{ref:"ftu",mode:this.state.mode}))}}]),t}(c.default);exports.default=R},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(22),u=n(s),l=t(225),c=n(l),d=t(30),f=n(d),p=t(29),h=n(p),v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.currentItemIndex=0,e.items=[],e.thumbnailItem=null,f.default.on("delete",e.onItemDeleted.bind(e)),e}return o(t,e),a(t,[{key:"onNewMedia",value:function(e){var t=this;return new Promise(function(n){e.isVideo?("pick"===h.default.name?t.items[0]=e:t.items.unshift(e),t.updateThumbnail().then(function(e){n(e)})):(0,c.default)(e.blob).then(function(r){r.blob=e.blob,r.filePath=e.filePath,"pick"===h.default.name?t.items[0]=r:t.items.unshift(r),t.updateThumbnail().then(function(e){n(e)})})})}},{key:"CheckCurrentPreviewItem",value:function(){var e=this;return new Promise(function(t,n){0===e.items.length&&n("item length is 0");for(var r=e.currentItemIndex,i=e.items[r].filePath,o=[],a=navigator.getDeviceStorages("sdcard"),s=0;s<a.length;++s)!function(e){var t=new Promise(function(t){a[e].get(i).then(function(){t(!0)},function(){t(!1)})});o.push(t)}(s);Promise.all(o).then(function(o){o.find(function(e){return!0===e})?t(r):(e.onItemDeleted(i),n("error"))})})}},{key:"updateThumbnail",value:function(){var e=this;return new Promise(function(t){var n=e.thumbnailItem=e.items[0]||null,r=null;if(null!==n){if(n.isVideo)r=n.poster.blob;else{if(n.preview){var i=n.width/n.height,o=n.preview.width/n.preview.height;Math.abs(i-o)<.01&&(r=n.blob.slice(n.preview.start,n.preview.end,"image/jpeg"))}r||(r=n.blob)}t(r)}})}},{key:"onItemDeleted",value:function(e){if(!this.stopItemDeletedEvent){for(var t=-1,n=0;n<this.items.length;n++)if(this.items[n].filePath===e){t=n;break}n!==this.items.length&&this.deleteItem(t)}}},{key:"deleteItem",value:function(e){var t=this;return new Promise(function(n){t.items.splice(e,1),n()})}}]),t}(u.default),m=new v;exports.default=m},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t(3),l=n(u),c=t(13),d=n(c),f=t(128),p=n(f),h=t(6),v=n(h),m=t(5),g=n(m),y=t(106),b=n(y);t(229);var w=function(e,t,n){return function(u){function c(t){r(this,c);var n=i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return n.name="EnhanceAnimation-"+e.name,n.DEBUG=!1,n}return o(c,u),s(c,[{key:"componentDidMount",value:function(){var t=this;this.debug("did mount:",e.name),this.refs.composed.open=this.refs.composing.open.bind(this.refs.composing),this.refs.composed.close=this.refs.composing.close.bind(this.refs.composing),g.default.register("open",this.refs.composed),g.default.register("close",this.refs.composed),this.refs.composed.isActive=this.refs.composing.isActive.bind(this.refs.composing),this.refs.composing.on("closed",function(){t.refs.composed.emit("closed"),t.emit("closed")}),this.refs.composing.on("opened",function(){t.refs.composed.emit("opened"),t.emit("opened")})}},{key:"open",value:function(e){this.refs.composing.open(e)}},{key:"focus",value:function(){var e=d.default.findDOMNode(this.refs.composed);e.activeElement?(e.activeElement.focus(),document.activeElement===document.body&&e.focus()):e.focus()}},{key:"close",value:function(e){this.refs.composing.close(e)}},{key:"isClosed",value:function(){return"closed"===this.refs.composing.state.transition}},{key:"isTransitioning",value:function(){var e=this.refs.popup&&this.refs.popup.isOpening,t=this.refs.composing.isTransitioning()||e;return this.debug("isTransitioning: popupTransitioning, result:",e,t),t}},{key:"getTopMost",value:function(){return this.refs.popup.refs.popup?this.refs.popup.refs.popup.getTopMost():this}},{key:"openPopup",value:function(e){this.refs.popup.setPanel(e)}},{key:"componentDidUpdate",value:function(){this.refs.popup&&this.refs.popup.open()}},{key:"render",value:function(){return l.default.createElement(p.default,{ref:"composing",openAnimation:t,closeAnimation:n},l.default.createElement(e,a({ref:"composed"},this.props)),l.default.createElement(b.default,{ref:"popup"}))}}]),c}(v.default)};exports.default=w},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(13),c=n(l),d=t(6),f=n(d),p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="PopupManager",n.DEBUG=!1,n.isOpening=!1,n.state={panel:null},n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.debug("did mount")}},{key:"setPanel",value:function(e){this.isOpening=!0,this.setState({panel:e})}},{key:"focus",value:function(){c.default.findDOMNode(this.refs.composed).focus()}},{key:"open",value:function(e){this.refs.popup&&this.refs.popup.open(e)}},{key:"componentDidUpdate",value:function(){var e=this;this.debug("did update"),this.refs.popup&&(this.refs.popup.open("bottom-to-up"),this.refs.popup.refs.composing.on("opened",function(){e.isOpening=!1}),this.refs.popup.refs.composed.close=this.close.bind(this),this.refs.popup.refs.composing.on("closing",function(){e.setState({panel:null})}))}},{key:"render",value:function(){var e=this.state.panel?u.default.cloneElement(this.state.panel,{ref:"popup"}):null;return u.default.createElement("div",{className:"popup"},e)}}]),t}(f.default);exports.default=p},function(e,exports,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,exports,t){"use strict";function n(e){return r(e.replace(i,"ms-"))}var r=t(107),i=/^-ms-/;e.exports=n},function(e,exports,t){"use strict";function n(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?n(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=t(116);e.exports=n},function(e,exports,t){"use strict";function n(e){var t=e.length;if((Array.isArray(e)||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e)&&a(!1),"number"!=typeof t&&a(!1),0===t||t-1 in e||a(!1),"function"==typeof e.callee&&a(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function r(e){return!!e&&("object"==(void 0===e?"undefined":o(e))||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return r(e)?Array.isArray(e)?e.slice():n(e):[e]}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=t(0);e.exports=i},function(e,exports,t){"use strict";function n(e){var t=e.match(l);return t&&t[1].toLowerCase()}function r(e,t){var r=u;u||s(!1);var i=n(e),l=i&&a(i);if(l){r.innerHTML=l[1]+e+l[2];for(var c=l[0];c--;)r=r.lastChild}else r.innerHTML=e;var d=r.getElementsByTagName("script");d.length&&(t||s(!1),o(d).forEach(t));for(var f=Array.from(r.childNodes);r.lastChild;)r.removeChild(r.lastChild);return f}var i=t(7),o=t(110),a=t(65),s=t(0),u=i.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;e.exports=r},function(e,exports,t){"use strict";function n(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,exports,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,exports,t){"use strict";function n(e){return r(e).replace(i,"-ms-")}var r=t(113),i=/^ms-/;e.exports=n},function(e,exports,t){"use strict";function n(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"===(void 0===e?"undefined":r(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n},function(e,exports,t){"use strict";function n(e){return r(e)&&3==e.nodeType}var r=t(115);e.exports=n},function(e,exports,t){"use strict";function n(e,t,n){if(!e)return null;var i={};for(var o in e)r.call(e,o)&&(i[o]=t.call(n,e[o],o,e));return i}var r=Object.prototype.hasOwnProperty;e.exports=n},function(e,exports,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,exports,t){"use strict";var n,r=t(7);r.canUseDOM&&(n=window.performance||window.msPerformance||window.webkitPerformance),e.exports=n||{}},function(e,exports,t){"use strict";var n,r=t(119);n=r.now?function(){return r.now()}:function(){return Date.now()},e.exports=n},function(e,exports,t){"use strict";exports.__esModule=!0;exports.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),exports.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},exports.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},exports.getConfirmation=function(e,t){return t(window.confirm(e))},exports.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},exports.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},exports.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},exports.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.locationsAreEqual=exports.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t(199),o=n(i),a=t(202),s=n(a),u=t(67);exports.createLocation=function(e,t,n,i){var a=void 0;return"string"==typeof e?(a=(0,u.parsePath)(e),a.state=t):(a=r({},e),void 0===a.pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t)),a.key=n,i&&(a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,o.default)(a.pathname,i.pathname)):a.pathname=i.pathname),a},exports.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,s.default)(e.state,t.state)}},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=t(97),o=n(i),a=t(125),s=n(a),u=t(122),l=t(67),c=t(124),d=n(c),f=t(121),p={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,l.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:l.stripLeadingSlash,decodePath:l.addLeadingSlash},slash:{encodePath:l.addLeadingSlash,decodePath:l.addLeadingSlash}},h=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},v=function(e){return window.location.hash=e},m=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(f.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,f.supportsGoWithoutReloadUsingHash)(),i=e.getUserConfirmation,a=void 0===i?f.getConfirmation:i,c=e.hashType,g=void 0===c?"slash":c,y=e.basename?(0,l.stripTrailingSlash)((0,l.addLeadingSlash)(e.basename)):"",b=p[g],w=b.encodePath,_=b.decodePath,k=function(){var e=_(h());return y&&(e=(0,l.stripPrefix)(e,y)),(0,l.parsePath)(e)},E=(0,d.default)(),C=function(e){r(W,e),W.length=t.length,E.notifyListeners(W.location,W.action)},P=!1,S=null,O=function(){var e=h(),t=w(e);if(e!==t)m(t);else{var n=k(),r=W.location;if(!P&&(0,u.locationsAreEqual)(r,n))return;if(S===(0,l.createPath)(n))return;S=null,x(n)}},x=function(e){if(P)P=!1,C();else{E.confirmTransitionTo(e,"POP",a,function(t){t?C({action:"POP",location:e}):M(e)})}},M=function(e){var t=W.location,n=R.lastIndexOf((0,l.createPath)(t));-1===n&&(n=0);var r=R.lastIndexOf((0,l.createPath)(e));-1===r&&(r=0);var i=n-r;i&&(P=!0,j(i))},T=h(),N=w(T);T!==N&&m(N);var I=k(),R=[(0,l.createPath)(I)],A=function(e){return"#"+w(y+(0,l.createPath)(e))},D=function(e,t){(0,o.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,u.createLocation)(e,void 0,void 0,W.location);E.confirmTransitionTo(n,"PUSH",a,function(e){if(e){var t=(0,l.createPath)(n),r=w(y+t);if(h()!==r){S=t,v(r);var i=R.lastIndexOf((0,l.createPath)(W.location)),a=R.slice(0,-1===i?0:i+1);a.push(t),R=a,C({action:"PUSH",location:n})}else(0,o.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),C()}})},L=function(e,t){(0,o.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,u.createLocation)(e,void 0,void 0,W.location);E.confirmTransitionTo(n,"REPLACE",a,function(e){if(e){var t=(0,l.createPath)(n),r=w(y+t);h()!==r&&(S=t,m(r));var i=R.indexOf((0,l.createPath)(W.location));-1!==i&&(R[i]=t),C({action:"REPLACE",location:n})}})},j=function(e){(0,o.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},F=function(){return j(-1)},U=function(){return j(1)},z=0,V=function(e){z+=e,1===z?(0,f.addEventListener)(window,"hashchange",O):0===z&&(0,f.removeEventListener)(window,"hashchange",O)},B=!1,q=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=E.setPrompt(e);return B||(V(1),B=!0),function(){return B&&(B=!1,V(-1)),t()}},K=function(e){var t=E.appendListener(e);return V(1),function(){V(-1),t()}},W={length:t.length,action:"POP",location:I,createHref:A,push:D,replace:L,go:j,goBack:F,goForward:U,block:q,listen:K};return W};exports.default=g},function(e,exports,t){"use strict";exports.__esModule=!0;var n=t(97),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){var e=null,t=function(t){return(0,r.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},n=function(t,n,i,o){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof i?i(a,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},i=[];return{setPrompt:t,confirmTransitionTo:n,appendListener:function(e){var t=!0,n=function(){t&&e.apply(void 0,arguments)};return i.push(n),function(){t=!1,i=i.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.forEach(function(e){return e.apply(void 0,t)})}}};exports.default=i},function(e,exports,t){"use strict";var n=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=n},function(e,exports,t){"use strict";var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,exports,t){"use strict";function n(e,t){for(var n,r=[],i=0,o=0,a="",l=t&&t.delimiter||"/";null!=(n=y.exec(e));){var c=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+c.length,d)a+=d[1];else{var p=e[o],h=n[2],v=n[3],m=n[4],g=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var _=null!=h&&null!=p&&p!==h,k="+"===b||"*"===b,E="?"===b||"*"===b,C=n[2]||l,P=m||g;r.push({name:v||i++,prefix:h||"",delimiter:C,optional:E,repeat:k,partial:_,asterisk:!!w,pattern:P?u(P):w?".*":"[^"+s(C)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function r(e,t){return a(n(e,t))}function i(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function o(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===m(e[n])&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var a="",s=n||{},u=r||{},l=u.pretty?i:encodeURIComponent,c=0;c<e.length;c++){var d=e[c];if("string"!=typeof d){var f,p=s[d.name];if(null==p){if(d.optional){d.partial&&(a+=d.prefix);continue}throw new TypeError('Expected "'+d.name+'" to be defined')}if(g(p)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var h=0;h<p.length;h++){if(f=l(p[h]),!t[c].test(f))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===h?d.prefix:d.delimiter)+f}}else{if(f=d.asterisk?o(p):l(p),!t[c].test(f))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+f+'"');a+=d.prefix+f}}else a+=d}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function c(e){return e.sensitive?"":"i"}function d(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}function f(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(v(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",c(n)),t)}function p(e,t,r){return h(n(e,r),t,r)}function h(e,t,n){g(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var u=e[a];if("string"==typeof u)o+=s(u);else{var d=s(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+d+f+")*"),f=u.optional?u.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")",o+=f}}var p=s(n.delimiter||"/"),h=o.slice(-p.length)===p;return r||(o=(h?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+p+"|$)",l(new RegExp("^"+o,c(n)),t)}function v(e,t,n){return g(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?d(e,t):g(e)?f(e,t,n):p(e,t,n)}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=t(126);e.exports=v,e.exports.parse=n,e.exports.compile=r,e.exports.tokensToFunction=a,e.exports.tokensToRegExp=h;var y=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(13),c=n(l),d=t(6),f=n(d),p=t(129),h=n(p);t(230);var v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={transition:"closed",animation:"immediate"},n}return o(t,e),a(t,[{key:"isHidden",value:function(){return"opened"!==this.state.transition}}]),a(t,[{key:"isActive",value:function(){return"opened"===this.state.transition||"opening"===this.state.transition}},{key:"isTransitioning",value:function(){return"opening"===this.state.transition||"closing"===this.state.transition}},{key:"onAnimationEnd",value:function(e){if(e.target===c.default.findDOMNode(this))switch(this.state.transition){case"opening":this.setState({transition:"opened",animation:""});break;case"closing":this.setState({transition:"closed",animation:""})}}},{key:"componentDidMount",value:function(){c.default.findDOMNode(this).addEventListener("animationend",this.onAnimationEnd.bind(this),!1)}},{key:"getActivatedState",value:function(){switch(this.state.transition){case"opening":return"-activating";case"closing":return"-deactivating";case"opened":return"-activated";case"closed":return"-deactivated"}}},{key:"componentDidUpdate",value:function(){this.emit(this.state.transition),this.publish(this.getActivatedState());var e=(u.default.Children.toArray(this.props.children)[0],c.default.findDOMNode(this.refs.shadow).firstChild);if(!e)return void this.debug("no content");if("opened"===this.state.transition){if(this.debug("focusing inner content"),this.props.noFocus)return;e.activeElement?e.activeElement.focus():e.focus()}else"closing"===this.state.transition&&e.blur()}},{key:"shouldComponentUpdate",value:function(e,t){return t.transition!==this.state.transition||t.animation!==this.state.animation}},{key:"open",value:function(e){switch(e=e||this.props.openAnimation,this.state.transition){case"opened":break;case"opening":case"closing":case"closed":"immediate"!==e&&e?this.setState({transition:"opening",animation:e}):this.setState({transition:"opened",animation:""})}}},{key:"focus",value:function(){var e=c.default.findDOMNode(this.refs.shadow).firstChild;e&&e.focus()}},{key:"close",value:function(e){switch(e=e||this.props.closeAnimation,this.state.transition){case"closed":break;case"opening":case"closing":case"opened":"immediate"!==e&&e?this.setState({transition:"closing",animation:e}):this.setState({transition:"closed",animation:""})}}},{key:"render",value:function(){return u.default.createElement("div",{tabIndex:"-1",className:"x-window "+this.state.animation,"aria-hidden":"opened"===this.state.transition?"false":"true","data-transition-state":this.state.transition},u.default.createElement(h.default,{ref:"shadow",transition:this.state.transition,animation:this.state.animation},this.props.children))}}]),t}(f.default);v.defaultProps={openAnimation:"immediate",closeAnimation:"immediate",noFocus:!1},v.propTypes={openAnimation:u.default.PropTypes.string,closeAnimation:u.default.PropTypes.string,noFocus:u.default.PropTypes.bool},exports.default=v},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(13),c=(n(l),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"isOpening",value:function(e){var t=e||this.props;return"opening"===t.transition||"opened"===t.transition&&"immediate"===t.animation}},{key:"isClosed",value:function(e){return"closed"===(e||this.props).transition}},{key:"shouldComponentUpdate",value:function(e,t){return!!this.isOpening(e)}},{key:"render",value:function(){return u.default.createElement("div",{className:"shadow-window"},this.props.children)}}]),t}(u.default.Component));c.defaultProps={transition:"",animation:""},c.propTypes={transition:u.default.PropTypes.string.isRequired,animation:u.default.PropTypes.string.isRequired},exports.default=c},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=t(3),l=n(u),c=t(13),d=n(c),f=t(6),p=n(f),h=t(25),v=n(h),m=t(5),g=n(m);t(231);var y=0,b=function(e){function t(){var e,n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.name="Dialog",a=n,i(o,a)}return o(t,e),a(t,[{key:"componentDidUpdate",value:function(e,t){"prompt"===this.props.type&&(d.default.findDOMNode(this.refs.input).value=this.props.initialValue||"")}},{key:"componentDidMount",value:function(){this.element=d.default.findDOMNode(this),this.content=this.element.querySelector(".content"),g.default.register("show",this),g.default.register("hide",this),this.updateSoftKeys()}},{key:"scrollContent",value:function(e){if(this.content){var t=this.content.scrollHeight-this.content.clientHeight;if(0==this.content.scrollTop&&e<0||this.content.scrollTop==t&&e>0)return!1;var n,r=this.content.clientHeight-41;return e>0?n=this.content.scrollTop+r:e<0&&(n=this.content.scrollTop-r),n<0?n=0:n>t&&(n=t),this.content.scrollTo(0,n),!0}}},{key:"updateSoftKeys",value:function(){if("custom"!==this.props.type)"alert"===this.props.type?v.default.register({left:"",center:"icon=ok",right:""},d.default.findDOMNode(this)):v.default.register({left:this.props.cancel||"cancel",center:"",right:this.props.ok||"ok"},d.default.findDOMNode(this));else{var e=this.props.buttons;3===e.length?"alert"!==this.props.type?v.default.register({left:e[0].message,center:e[1].message,right:e[2].message},d.default.findDOMNode(this)):v.default.register({left:"",center:"icon=ok",right:""},d.default.findDOMNode(this)):2===e.length?(v.default.register({left:e[0].message,center:"",right:e[1].message},d.default.findDOMNode(this)),v.default.register({center:"check-on"===d.default.findDOMNode(this.refs.checkbox).dataset.icon?"off":"on"},d.default.findDOMNode(this.refs.checkboxContainer))):1===e.length&&v.default.register({left:"",center:e[0].message,right:""},d.default.findDOMNode(this))}}},{key:"focus",value:function(){this.focusIfPossible(),this.updateSoftKeys()}},{key:"focusIfPossible",value:function(){this.isHidden()||("custom"===this.props.type&&this.refs.checkboxContainer?d.default.findDOMNode(this.refs.checkboxContainer).focus():"prompt"===this.props.type?d.default.findDOMNode(this.refs.input).focus():this.props.noFocus||(this.refs.content?d.default.findDOMNode(this.refs.content).focus():this.element.focus()))}},{key:"hide",value:function(){"prompt"===this.props.type&&(d.default.findDOMNode(this.refs.input).value=this.props.initialValue||""),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}},{key:"getInstanceID",value:function(){return this._id||(this._id=y,y++),this._id}},{key:"onKeyDown",value:function(e){var t=(e.target,e.key);switch(t){case"ArrowDown":e.stopPropagation(),e.preventDefault(),this.scrollContent(1);break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),this.scrollContent(-1);break;case"Enter":if(e.stopPropagation(),e.preventDefault(),"custom"===this.props.type){if(3===this.props.buttons.length){var n={selectedButton:1};if(this.props.showCheckbox){var r=d.default.findDOMNode(this.refs.checkbox).dataset.icon;n.checked="check-on"===r}this.props.onOk&&this.props.onOk(n),this.props.noClose||this.hide()}else if(this.props.showCheckbox&&document.activeElement===d.default.findDOMNode(this.refs.checkboxContainer)){var r=d.default.findDOMNode(this.refs.checkbox).dataset.icon;d.default.findDOMNode(this.refs.checkbox).dataset.icon="check-on"===r?"check-off":"check-on",this.updateSoftKeys()}}else"alert"===this.props.type&&(this.props.onOk&&this.props.onOk(),this.props.noClose||this.hide());break;case"F1":case"SoftLeft":if(e.stopPropagation(),e.preventDefault(),"custom"===this.props.type){var n={selectedButton:0};this.props.showCheckbox&&(n.checked="check-on"===d.default.findDOMNode(this.refs.checkbox).dataset.icon),this.props.onOk&&this.props.onOk(n)}else"alert"!==this.props.type&&this.props.onCancel&&this.props.onCancel();"alert"!==this.props.type&&this.hide();break;case"F2":case"SoftRight":if(e.stopPropagation(),e.preventDefault(),"custom"===this.props.type){var n={selectedButton:3===this.props.buttons.length?2:1};this.props.showCheckbox&&(n.checked=d.default.findDOMNode(this.refs.checkbox).checked),this.props.onOk&&this.props.onOk(n)}else"prompt"===this.props.type?this.props.onOk&&this.props.onOk(d.default.findDOMNode(this.refs.input).value):"confirm"===this.props.type&&this.props.onOk&&this.props.onOk();this.props.noClose||"alert"===this.props.type||this.hide();break;case"BrowserBack":case"Backspace":case"EndCall":if("INPUT"===document.activeElement.tagName&&document.activeElement.value)return;e.stopPropagation(),e.preventDefault(),this.props.onBack&&this.props.onBack(),this.hide()}}},{key:"render",value:function(){var e=this,t="";return this.props.header&&(t=this.props.translated?l.default.createElement("div",{className:"header h1",key:"no-translated-header",id:"dialog-header-"+this.getInstanceID()},this.props.header):l.default.createElement("div",{className:"header h1",key:"translated-header","data-l10n-id":this.props.header,id:"dialog-header-"+this.getInstanceID()})),l.default.createElement("div",{className:"dialog-container",tabIndex:"-1",onKeyDown:function(t){return e.onKeyDown(t)}},l.default.createElement("div",{role:"heading",className:"dialog","aria-labelledby":"dialog-header-"+this.getInstanceID()},t,this.props.children||l.default.createElement("div",{className:"content p-ul",ref:"content",tabIndex:"-1"},this.props.translated?this.props.content:l.default.createElement("div",{"data-l10n-id":this.props.content}),"prompt"===this.props.type?l.default.createElement("input",{ref:"input",className:"primary",placeholder:this.props.placeholder,defaultValue:this.props.initialValue}):"","custom"===this.props.type&&this.props.showCheckbox?l.default.createElement("div",{tabIndex:"-1",ref:"checkboxContainer"},l.default.createElement("i",{ref:"checkbox","data-icon":this.props.checkboxCheckedByDefault?"check-on":"check-off"}),l.default.createElement("span",null,this.props.checkboxMessage)):"")))}}]),t}(p.default);b.defaultProps={header:"",content:"",type:"confirm",ok:"",cancel:"",onOk:null,onBack:null,onCancel:null,translated:!1,buttons:[],showCheckbox:!1,checkboxCheckedByDefault:!1,checkboxMessage:"",placeholder:"",initialValue:"",noClose:!1,noFocus:!1},b.propTypes={header:l.default.PropTypes.string,content:l.default.PropTypes.string,type:l.default.PropTypes.string,ok:l.default.PropTypes.string,cancel:l.default.PropTypes.string,onOk:l.default.PropTypes.func,onBack:l.default.PropTypes.func,onCancel:l.default.PropTypes.func,translated:l.default.PropTypes.bool,buttons:l.default.PropTypes.array,showCheckbox:l.default.PropTypes.bool,checkboxCheckedByDefault:l.default.PropTypes.bool,checkboxMessage:l.default.PropTypes.string,placeholder:l.default.PropTypes.string,initialValue:l.default.PropTypes.string},exports.default=b},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=t(3),l=n(u),c=t(13),d=n(c),f=t(6),p=n(f),h=t(25),v=n(h),m=t(201),g=n(m);t(232);var y=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="OptionMenu",n.FOCUS_SELECTOR=".menu-item",n.state={header:"",options:[],onCancel:function(){}},n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.element=d.default.findDOMNode(this),this.navigator=new g.default(this.FOCUS_SELECTOR,this.element),this.updateSoftKeys()}},{key:"componentWillUnmount",value:function(){this.navigator.destroy(),this.unregisterSoftKeys(),this.element=null}},{key:"componentDidUpdate",value:function(){this.isActive()&&document.activeElement===document.body&&this.focus()}},{key:"componentWillUpdate",value:function(){var e=this.element.querySelector('[data-index="0"]');e&&this.navigator.setFocus(e)}},{key:"unregisterSoftKeys",value:function(){v.default.unregister(this.element)}},{key:"toL10n",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"complete"===navigator.mozL10n.readyState&&e?(e+="",navigator.mozL10n.get(e,t)||e):e}},{key:"updateSoftKeys",value:function(){v.default.register({left:this.state.hasCancel?this.toL10n("cancel"):"",center:this.toL10n("select"),right:""},this.element)}},{key:"clear",value:function(){this.setState({header:"",options:[],onCancel:function(){}})}},{key:"show",value:function(e){var n=this;this.clear(),this.setState(e,function(){n.updateSoftKeys()}),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"onKeyDown",value:function(e){var t=(e.target,e.key),n=null;switch(t){case"Enter":e.stopPropagation(),e.preventDefault();var r=this.state.options[+e.target.dataset.index];r&&r.callback&&r.callback(),this.hide();break;case"ArrowUp":e.stopPropagation(),e.preventDefault(),n=this.findPrev();break;case"ArrowDown":e.stopPropagation(),e.preventDefault(),n=this.findNext();break;case"SoftLeft":if(!this.state.hasCancel)break;case"BrowserBack":case"Backspace":e.stopPropagation(),e.preventDefault(),this.state.onCancel&&this.state.onCancel(),this.hide()}n&&(n.scrollIntoView(!1),n.focus())}},{key:"render",value:function(){var e=this,t=[];this.state.options.forEach(function(e,n){var r="";e.icon&&(r=l.default.createElement("img",{src:e.icon,className:"icon"}));var i="content"+(e.checked?" checked":"");t.push(l.default.createElement("div",{key:"option-"+n,tabIndex:"-1","data-index":n,className:"menu-item p-pri"},r,l.default.createElement("div",{className:i,"data-l10n-id":e.id||"","data-l10n-args":e.l10nArgs||null,"data-icon":e.dataicon||""},e.label||"")))});var n="option-menu-container";return this.state.customClass&&(n+=" "+n+"--"+this.state.customClass),l.default.createElement("div",{tabIndex:"-1",role:"heading","aria-labelledby":"option-menu-header",className:n,onKeyDown:function(t){return e.onKeyDown(t)}},l.default.createElement("div",{className:"option-menu"},l.default.createElement("div",{id:"option-menu-header",className:"header h1",key:"translated-header","data-l10n-id":this.state.header||"options"},this.toL10n(this.state.header||"options")),l.default.createElement("div",{className:"content p-ul"},this.props.children||t)))}}]),t}(p.default);exports.default=y},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.content?{"data-icon":e.content.icon,"data-l10n-id":e.content.text}:null;return c.default.createElement("button",u({id:"software-keys-"+e.pos,className:"sk-button","data-position":e.pos},t),e.content.text)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=t(3),c=n(l),d=t(6),f=n(d),p=t(25),h=n(p);t(233);var v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={left:e.left||"",center:e.center||"",right:e.right||""},n.setRef=n.setRef.bind(n),n.softkeys=["left","right","center"],n}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;h.default.on("change",function(){var t=h.default.currentKeys;e.softkeys.forEach(function(n){t[n]=e.uniformContent(t[n]||"")}),e.setState(t)})}},{key:"componentWillUpdate",value:function(e,t){Array.from(this.element.getElementsByTagName("button")).forEach(function(e){t[e.dataset.position].text||(e.textContent="")})}},{key:"uniformContent",value:function(e){return"string"==typeof e&&(e=e.startsWith("icon=")?{icon:e.replace("icon=","")}:{text:e}),e}},{key:"setRef",value:function(e){this.element=e}},{key:"render",value:function(){return c.default.createElement("form",{className:"skbar none-paddings visible focused",id:"softkeyPanel","data-type":"action",ref:this.setRef},c.default.createElement(a,{pos:"left",content:this.state.left}),c.default.createElement(a,{pos:"center",content:this.state.center}),c.default.createElement(a,{pos:"right",content:this.state.right}))}}]),t}(f.default);exports.default=v},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(123),u=n(s),l=t(3),c=n(l),d=t(13),f=n(d),p=t(5),h=n(p),v=t(6),m=n(v),g=t(134),y=n(g),b=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="ReactWindowManager",n.DEBUG=!1,n.state={panels:[],activeRef:"",action:""},n.parentRefs={},n.requestQueue=[],n}return o(t,e),a(t,[{key:"componentWillUpdate",value:function(e,t){var n=this;if(this.state.activeRef&&t.activeRef!==this.state.activeRef){var r=null;for(var i in this.refs){var o=this.refs[i];if(i===this.state.activeRef){switch(t.action){case"PUSH":r=this.props.pushCloseAnimation;break;case"REPLACE":r="immediate";break;case"POP":break;case"POPUP":case"RECYCLE":return}o.close?(o.on("closed",function(){n.recycleUnusedPanels()}),o.close(r)):o.hide&&o.hide();break}}}}},{key:"componentDidUpdate",value:function(){this.debug("did update: activeRef, action:",this.state.activeRef,this.state.action);var e="";for(var t in this.refs){var n=this.refs[t];if(t===this.state.activeRef){switch(this.state.action){case"POP":e=this.props.popOpenAnimation;break;case"PUSH":break;case"POPUP":e="bottom-to-up";break;case"REPLACE":e="immediate";break;case"RECYCLE":return}1===this.state.panels.length&&(e="immediate"),n.open?n.open(e):n.show&&n.show();break}}}},{key:"updatePanels",value:function(){var e=this;this.debug("updatePanels:");var t=this.history.location,n=this.history.action;y.default.resolve(this.props.routes,t).then(function(t){if("REPLACE"!==n)e.state.activeRef&&t.ref!==e.state.activeRef&&(e.parentRefs[t.ref]=e.state.activeRef);else if(e.state.activeRef){var r=e.parentRefs[e.state.activeRef];r&&(e.parentRefs[t.ref]=r)}for(var i in e.refs)if(t.ref===i){var o=-1;e.state.panels.some(function(e,n){return e.ref===t.ref&&(o=n,!0)}),e.state.panels[o]=t;var a={panels:e.state.panels,activeRef:t.ref,action:n};return void e.setState(a)}var s={panels:e.state.panels.concat([t]),activeRef:t.ref,action:n};e.setState(s)})}},{key:"hasChildPanel",value:function(e){for(var t in this.parentRefs)if(e===this.parentRefs[t])return!0;return!1}},{key:"recycleUnusedPanels",value:function(){this.debug("recycleUnusedPanels: activeRef:",this.state.activeRef);var e=[];for(var t in this.refs){var n=this.refs[t];this.debug("try to remove:",n.name),!this.hasChildPanel(t)&&n.isClosed()&&(e.push(t),delete this.parentRefs[t])}var r=this.state.panels.filter(function(t){return!(e.indexOf(t.ref)>=0)});this.setState({panels:r,action:"RECYCLE"})}},{key:"componentDidMount",value:function(){var e=this;this.debug("did mount");var t=(0,u.default)();this.history=t,t.listen(function(t,n){switch(n){case"PUSH":e.updatePanels();break;case"POP":if(e.state.panels.length<=1)return;y.default.resolve(e.props.routes,e.history.location).then(function(t){for(var r in e.refs)if(t.ref===r)return void e.setState({activeRef:t.ref,action:n})});break;case"REPLACE":e.updatePanels()}}),h.default.register("popup",this),h.default.register("focus",this),h.default.register("back",this),h.default.register("push",this),h.default.register("replace",this),h.default.registerState("isTransitioning",this),h.default.registerState("canGoBack",this),this.router=y.default,this.updatePanels()}},{key:"isTransitioning",value:function(){var e=this,t=Object.values(this.refs).some(function(t){return e.debug("check isTransitioning:",t.name),t.isTransitioning()});return this.debug("isTransitioning:",t),t}},{key:"popup",value:function(e,t){var n=this;return this.debug("popup: url, data:",e,t),new Promise(function(r){var i={pathname:e,search:"",hash:"",state:void 0,key:void 0};y.default.resolve(n.props.routes,i).then(function(e){n.requestQueue.push(r),n.refs[n.state.activeRef].openPopup(c.default.cloneElement(e,t))}).catch(function(e){})}).catch(function(e){})}},{key:"canGoBack",value:function(){var e=this.state.activeRef,t=this.refs[e];if(!t)return!1;var n=t.getTopMost();return n!==t&&!n.isTransitioning()||this.history.length>1}},{key:"back",value:function(){this.debug("back:");var e=this.state.activeRef,t=this.refs[e],n=null;this.requestQueue.length&&(n=this.requestQueue.splice(this.requestQueue.length-1,1),n=n[0]);var r=t.getTopMost();if(r===t||r.isTransitioning()?this.history.goBack():(r.close("up-to-bottom"),t.focus()),n){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];n(o)}}},{key:"focus",value:function(){for(var e in this.refs){var t=this.refs[e];if(e===this.state.activeRef){var n=t.getTopMost();n.isTransitioning()||(t=n),t.focus?t.focus():f.default.findDOMNode(t).focus();break}}}},{key:"push",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.debug("push: url, data:",e,n),new Promise(function(r){t.requestQueue.push(r),t.history.push({pathname:e,search:JSON.stringify(n)})}).catch(function(e){})}},{key:"replace",value:function(e,t){this.history.replace(e,t)}},{key:"render",value:function(){var e=this.state.panels.map(function(e){return c.default.cloneElement(e,{ref:e.ref,key:e.ref,exitOnClose:!!e.props&&e.props.exitOnClose})});return c.default.createElement("div",{className:"app-content"},e)}}]),t}(m.default);b.defaultProps={routes:[],pushCloseAnimation:"center-to-left",popOpenAnimation:"left-to-center"},b.propTypes={routes:c.default.PropTypes.array,popAnimation:c.default.PropTypes.string,backAnimation:c.default.PropTypes.string},exports.default=b},function(e,exports,t){"use strict";function n(e,t){var n=[],r=(0,o.default)(e,n),i=r.exec(t);if(!i)return null;for(var a=Object.create(null),s=1;s<i.length;s++)a[n[s-1].name]=void 0!==i[s]?i[s]:void 0;return a}function r(e,t){return new Promise(function(r,i){for(var o=0;o<e.length;o++){var a=e[o],s=t.error?"/error":t.pathname,u=n(a.path,s);if(u){var l=t.search?JSON.parse(t.search.replace("?","")):{};return Object.assign(u,l),void r(a.action(u))}}i("not found")})}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(127),o=function(e){return e&&e.__esModule?e:{default:e}}(i);exports.default={resolve:r}},function(e,exports,t){"use strict";var n=t(4),r=t(63),i={focusDOMComponent:function(){r(n.getNodeFromInstance(this))}};e.exports=i},function(e,exports,t){"use strict";function n(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function r(e){switch(e){case O.topCompositionStart:return x.compositionStart;case O.topCompositionEnd:return x.compositionEnd;case O.topCompositionUpdate:return x.compositionUpdate}}function i(e,t){return e===O.topKeyDown&&t.keyCode===w}function o(e,t){switch(e){case O.topKeyUp:return-1!==b.indexOf(t.keyCode);case O.topKeyDown:return t.keyCode!==w;case O.topKeyPress:case O.topMouseDown:case O.topBlur:return!0;default:return!1}}function a(e){var t=e.detail;return"object"===(void 0===t?"undefined":d(t))&&"data"in t?t.data:null}function s(e,t,n,s){var u,l;if(_?u=r(e):T?o(e,n)&&(u=x.compositionEnd):i(e,n)&&(u=x.compositionStart),!u)return null;C&&(T||u!==x.compositionStart?u===x.compositionEnd&&T&&(l=T.getData()):T=v.getPooled(s));var c=m.getPooled(u,t,n,s);if(l)c.data=l;else{var d=a(n);null!==d&&(c.data=d)}return p.accumulateTwoPhaseDispatches(c),c}function u(e,t){switch(e){case O.topCompositionEnd:return a(t);case O.topKeyPress:return t.which!==P?null:(M=!0,S);case O.topTextInput:var n=t.data;return n===S&&M?null:n;default:return null}}function l(e,t){if(T){if(e===O.topCompositionEnd||o(e,t)){var r=T.getData();return v.release(T),T=null,r}return null}switch(e){case O.topPaste:return null;case O.topKeyPress:return t.which&&!n(t)?String.fromCharCode(t.which):null;case O.topCompositionEnd:return C?null:t.data;default:return null}}function c(e,t,n,r){var i;if(!(i=E?u(e,n):l(e,n)))return null;var o=g.getPooled(x.beforeInput,t,n,r);return o.data=i,p.accumulateTwoPhaseDispatches(o),o}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=t(14),p=t(27),h=t(7),v=t(142),m=t(181),g=t(184),y=t(16),b=[9,13,27,32],w=229,_=h.canUseDOM&&"CompositionEvent"in window,k=null;h.canUseDOM&&"documentMode"in document&&(k=document.documentMode);var E=h.canUseDOM&&"TextEvent"in window&&!k&&!function(){var e=window.opera;return"object"===(void 0===e?"undefined":d(e))&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}(),C=h.canUseDOM&&(!_||k&&k>8&&k<=11),P=32,S=String.fromCharCode(P),O=f.topLevelTypes,x={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[O.topCompositionEnd,O.topKeyPress,O.topTextInput,O.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[O.topBlur,O.topCompositionEnd,O.topKeyDown,O.topKeyPress,O.topKeyUp,O.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[O.topBlur,O.topCompositionStart,O.topKeyDown,O.topKeyPress,O.topKeyUp,O.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[O.topBlur,O.topCompositionUpdate,O.topKeyDown,O.topKeyPress,O.topKeyUp,O.topMouseDown]}},M=!1,T=null,N={eventTypes:x,extractEvents:function(e,t,n,r){return[s(e,t,n,r),c(e,t,n,r)]}};e.exports=N},function(e,exports,t){"use strict";var n=t(68),r=t(7),i=(t(8),t(108),t(190)),o=t(114),a=t(118),s=(t(1),a(function(e){return o(e)})),u=!1,l="cssFloat";if(r.canUseDOM){var c=document.createElement("div").style;try{c.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(l="styleFloat")}var d={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];null!=o&&(n+=s(r)+":",n+=i(r,o,t)+";")}return n||null},setValueForStyles:function(e,t,r){var o=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=i(a,t[a],r);if("float"!==a&&"cssFloat"!==a||(a=l),s)o[a]=s;else{var c=u&&n.shorthandPropertyExpansions[a];if(c)for(var d in c)o[d]="";else o[a]=""}}}};e.exports=d},function(e,exports,t){"use strict";function n(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function r(e){var t=E.getPooled(M.change,N,e,C(e));b.accumulateTwoPhaseDispatches(t),k.batchedUpdates(i,t)}function i(e){y.enqueueEvents(e),y.processEventQueue(!1)}function o(e,t){T=e,N=t,T.attachEvent("onchange",r)}function a(){T&&(T.detachEvent("onchange",r),T=null,N=null)}function s(e,t){if(e===x.topChange)return t}function u(e,t,n){e===x.topFocus?(a(),o(t,n)):e===x.topBlur&&a()}function l(e,t){T=e,N=t,I=e.value,R=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(T,"value",L),T.attachEvent?T.attachEvent("onpropertychange",d):T.addEventListener("propertychange",d,!1)}function c(){T&&(delete T.value,T.detachEvent?T.detachEvent("onpropertychange",d):T.removeEventListener("propertychange",d,!1),T=null,N=null,I=null,R=null)}function d(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==I&&(I=t,r(e))}}function f(e,t){if(e===x.topInput)return t}function p(e,t,n){e===x.topFocus?(c(),l(t,n)):e===x.topBlur&&c()}function h(e,t){if((e===x.topSelectionChange||e===x.topKeyUp||e===x.topKeyDown)&&T&&T.value!==I)return I=T.value,N}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function m(e,t){if(e===x.topClick)return t}var g=t(14),y=t(26),b=t(27),w=t(7),_=t(4),k=t(12),E=t(15),C=t(54),P=t(56),S=t(95),O=t(16),x=g.topLevelTypes,M={change:{phasedRegistrationNames:{bubbled:O({onChange:null}),captured:O({onChangeCapture:null})},dependencies:[x.topBlur,x.topChange,x.topClick,x.topFocus,x.topInput,x.topKeyDown,x.topKeyUp,x.topSelectionChange]}},T=null,N=null,I=null,R=null,A=!1;w.canUseDOM&&(A=P("change")&&(!("documentMode"in document)||document.documentMode>8));var D=!1;w.canUseDOM&&(D=P("input")&&(!("documentMode"in document)||document.documentMode>11));var L={get:function(){return R.get.call(this)},set:function(e){I=""+e,R.set.call(this,e)}},j={eventTypes:M,extractEvents:function(e,t,r,i){var o,a,l=t?_.getNodeFromInstance(t):window;if(n(l)?A?o=s:a=u:S(l)?D?o=f:(o=h,a=p):v(l)&&(o=m),o){var c=o(e,t);if(c){var d=E.getPooled(M.change,c,r,i);return d.type="change",b.accumulateTwoPhaseDispatches(d),d}}a&&a(e,l,t)}};e.exports=j},function(e,exports,t){"use strict";function n(e){return e.substring(1,e.indexOf(" "))}var r=t(23),i=t(7),o=t(111),a=t(10),s=t(65),u=t(0),l=/^(<[^ \/>]+)/,c={dangerouslyRenderMarkup:function(e){i.canUseDOM||u(!1);for(var t,r={},c=0;c<e.length;c++)e[c]||u(!1),t=n(e[c]),t=s(t)?t:"*",r[t]=r[t]||[],r[t][c]=e[c];var d=[],f=0;for(t in r)if(r.hasOwnProperty(t)){var p,h=r[t];for(p in h)if(h.hasOwnProperty(p)){var v=h[p];h[p]=v.replace(l,'$1 data-danger-index="'+p+'" ')}for(var m=o(h.join(""),a),g=0;g<m.length;++g){var y=m[g];y.hasAttribute&&y.hasAttribute("data-danger-index")&&(p=+y.getAttribute("data-danger-index"),y.removeAttribute("data-danger-index"),d.hasOwnProperty(p)&&u(!1),d[p]=y,f+=1)}}return f!==d.length&&u(!1),d.length!==e.length&&u(!1),d},dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM||u(!1),t||u(!1),"HTML"===e.nodeName&&u(!1),"string"==typeof t){var n=o(t,a)[0];e.parentNode.replaceChild(n,e)}else r.replaceChildWithTree(e,t)}};e.exports=c},function(e,exports,t){"use strict";var n=t(16),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({BeforeInputEventPlugin:null})];e.exports=r},function(e,exports,t){"use strict";var n=t(14),r=t(27),i=t(4),o=t(38),a=t(16),s=n.topLevelTypes,u={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[s.topMouseOut,s.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[s.topMouseOut,s.topMouseOver]}},l={eventTypes:u,extractEvents:function(e,t,n,a){if(e===s.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==s.topMouseOut&&e!==s.topMouseOver)return null;var l;if(a.window===a)l=a;else{var c=a.ownerDocument;l=c?c.defaultView||c.parentWindow:window}var d,f;if(e===s.topMouseOut){d=t;var p=n.relatedTarget||n.toElement;f=p?i.getClosestInstanceFromNode(p):null}else d=null,f=t;if(d===f)return null;var h=null==d?l:i.getNodeFromInstance(d),v=null==f?l:i.getNodeFromInstance(f),m=o.getPooled(u.mouseLeave,d,n,a);m.type="mouseleave",m.target=h,m.relatedTarget=v;var g=o.getPooled(u.mouseEnter,f,n,a);return g.type="mouseenter",g.target=v,g.relatedTarget=h,r.accumulateEnterLeaveDispatches(m,g,d,f),[m,g]}};e.exports=l},function(e,exports,t){"use strict";function n(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=t(2),i=t(17),o=t(93);r(n.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),i.addPoolingTo(n),e.exports=n},function(e,exports,t){"use strict";var n=t(20),r=n.injection.MUST_USE_PROPERTY,i=n.injection.HAS_BOOLEAN_VALUE,o=n.injection.HAS_SIDE_EFFECTS,a=n.injection.HAS_NUMERIC_VALUE,s=n.injection.HAS_POSITIVE_NUMERIC_VALUE,u=n.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+n.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|i,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,coords:0,crossOrigin:0,data:0,dateTime:0,default:i,defer:i,dir:0,disabled:i,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|i,muted:r|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,rel:0,required:i,reversed:i,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:r|i,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:r|o,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};e.exports=l},function(e,exports,t){"use strict";var n=t(2),r=t(71),i=t(73),o=t(72),a=t(153),s=t(11),u=(t(77),t(86)),l=t(88),c=t(196),d=(t(1),s.createElement),f=s.createFactory,p=s.cloneElement,h=n,v={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:c},Component:i,createElement:d,cloneElement:p,isValidElement:s.isValidElement,PropTypes:u,createClass:o.createClass,createFactory:f,createMixin:function(e){return e},DOM:a,version:l,__spread:h};e.exports=v},function(e,exports,t){"use strict";function n(e,t,n){var r=void 0===e[n];null!=t&&r&&(e[n]=i(t))}var r=t(24),i=t(94),o=(t(45),t(58)),a=t(59),s=(t(1),{instantiateChildren:function(e,t,r){if(null==e)return null;var i={};return a(e,n,i),i},updateChildren:function(e,t,n,a,s){if(t||e){var u,l;for(u in t)if(t.hasOwnProperty(u)){l=e&&e[u];var c=l&&l._currentElement,d=t[u];if(null!=l&&o(c,d))r.receiveComponent(l,d,a,s),t[u]=l;else{l&&(n[u]=r.getNativeNode(l),r.unmountComponent(l,!1));var f=i(d);t[u]=f}}for(u in e)!e.hasOwnProperty(u)||t&&t.hasOwnProperty(u)||(l=e[u],n[u]=r.getNativeNode(l),r.unmountComponent(l,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r.unmountComponent(i,t)}}});e.exports=s},function(e,exports,t){"use strict";function n(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function r(e){}function i(e){return e.prototype&&e.prototype.isReactComponent}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=t(2),s=t(47),u=t(18),l=t(11),c=t(48),d=t(49),f=(t(8),t(84)),p=t(37),h=(t(36),t(24)),v=t(87),m=t(31),g=t(0),y=t(58);t(1);r.prototype.render=function(){var e=d.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return t};var b=1,w={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._nativeParent=null,this._nativeContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,a){this._context=a,this._mountOrder=b++,this._nativeParent=t,this._nativeContainerInfo=n;var s,u=this._processProps(this._currentElement.props),c=this._processContext(a),f=this._currentElement.type,p=this._constructComponent(u,c);i(f)||null!=p&&null!=p.render||(s=p,null===p||!1===p||l.isValidElement(p)||g(!1),p=new r(f));p.props=u,p.context=c,p.refs=m,p.updater=v,this._instance=p,d.set(p,this);var h=p.state;void 0===h&&(p.state=h=null),("object"!==(void 0===h?"undefined":o(h))||Array.isArray(h))&&g(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var y;return y=p.unstable_handleError?this.performInitialMountWithErrorHandling(s,t,n,e,a):this.performInitialMount(s,t,n,e,a),p.componentDidMount&&e.getReactMountReady().enqueue(p.componentDidMount,p),y},_constructComponent:function(e,t){return this._constructComponentWithoutOwner(e,t)},_constructComponentWithoutOwner:function(e,t){var n=this._currentElement.type;return i(n)?new n(e,t,v):n(e,t,v)},performInitialMountWithErrorHandling:function(e,t,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(e,t,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(e,t,n,r,i)}return o},performInitialMount:function(e,t,n,r,i){var o=this._instance;return o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent()),this._renderedNodeType=f.getType(e),this._renderedComponent=this._instantiateReactComponent(e),h.mountComponent(this._renderedComponent,r,t,n,this._processChildContext(i))},getNativeNode:function(){return h.getNativeNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";c.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,d.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return m;var r={};for(var i in n)r[i]=e[i];return r},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"object"!==o(t.childContextTypes)&&g(!1);for(var i in r)i in t.childContextTypes||g(!1);return a({},e,r)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,r){var i=this.getName();for(var o in e)if(e.hasOwnProperty(o)){var a;try{"function"!=typeof e[o]&&g(!1),a=e[o](t,o,i,r)}catch(e){a=e}if(a instanceof Error){n(this);p.prop}}},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,i){var o,a,s=this._instance,u=!1;this._context===i?o=s.context:(o=this._processContext(i),u=!0),t===n?a=n.props:(a=this._processProps(n.props),u=!0),u&&s.componentWillReceiveProps&&s.componentWillReceiveProps(a,o);var l=this._processPendingState(a,o),c=!0;!this._pendingForceUpdate&&s.shouldComponentUpdate&&(c=s.shouldComponentUpdate(a,l,o)),this._updateBatchNumber=null,c?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,a,l,o,e,i)):(this._currentElement=n,this._context=i,s.props=a,s.state=l,s.context=o)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=a({},i?r[0]:n.state),s=i?1:0;s<r.length;s++){var u=r[s];a(o,"function"==typeof u?u.call(n,o,e,t):u)}return o},_performComponentUpdate:function(e,t,n,r,i,o){var a,s,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(a=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,r),this._currentElement=e,this._context=o,l.props=t,l.state=n,l.context=r,this._updateRenderedComponent(i,o),c&&i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,u),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(y(r,i))h.receiveComponent(n,i,e,this._processChildContext(t));else{var o=h.getNativeNode(n);h.unmountComponent(n,!1),this._renderedNodeType=f.getType(i),this._renderedComponent=this._instantiateReactComponent(i);var a=h.mountComponent(this._renderedComponent,e,this._nativeParent,this._nativeContainerInfo,this._processChildContext(t));this._replaceNodeWithMarkup(o,a,n)}},_replaceNodeWithMarkup:function(e,t,n){s.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;u.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{u.current=null}return null===e||!1===e||l.isValidElement(e)||g(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&g(!1);var r=t.getPublicInstance();(n.refs===m?n.refs={}:n.refs)[e]=r},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof r?null:e},_instantiateReactComponent:null},_={Mixin:w};e.exports=_},function(e,exports,t){"use strict";var n=t(4),r=t(166),i=t(81),o=t(24),a=t(12),s=t(88),u=t(191),l=t(92),c=t(198);t(1);r.inject();var d={findDOMNode:u,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:s,unstable_batchedUpdates:a.batchedUpdates,unstable_renderSubtreeIntoContainer:c};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:n.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=l(e)),e?n.getNodeFromInstance(e):null}},Mount:i,Reconciler:o});e.exports=d},function(e,exports,t){"use strict";var n=t(33),r={getNativeProps:n.getNativeProps};e.exports=r},function(e,exports,t){"use strict";function n(e,t){t&&(X[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&A(!1),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&A(!1),"object"===d(t.dangerouslySetInnerHTML)&&q in t.dangerouslySetInnerHTML||A(!1)),null!=t.style&&"object"!==d(t.style)&&A(!1))}function r(e,t,n,r){if(!(r instanceof I)){var o=e._nativeContainerInfo,a=o._node&&o._node.nodeType===W,s=a?o._node:o._ownerDocument;U(t,s),r.getReactMountReady().enqueue(i,{inst:e,registrationName:t,listener:n})}}function i(){var e=this;w.putListener(e.inst,e.registrationName,e.listener)}function o(){var e=this;x.postMountWrapper(e)}function a(){var e=this;e._rootNodeID||A(!1);var t=F(e);switch(t||A(!1),e._tag){case"iframe":case"object":e._wrapperState.listeners=[k.trapBubbledEvent(b.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in H)H.hasOwnProperty(n)&&e._wrapperState.listeners.push(k.trapBubbledEvent(b.topLevelTypes[n],H[n],t));break;case"img":e._wrapperState.listeners=[k.trapBubbledEvent(b.topLevelTypes.topError,"error",t),k.trapBubbledEvent(b.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[k.trapBubbledEvent(b.topLevelTypes.topReset,"reset",t),k.trapBubbledEvent(b.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[k.trapBubbledEvent(b.topLevelTypes.topInvalid,"invalid",t)]}}function s(){M.postUpdateWrapper(this)}function u(e){J.call(Q,e)||(Z.test(e)||A(!1),Q[e]=!0)}function l(e,t){return e.indexOf("-")>=0||null!=t.is}function c(e){var t=e.type;u(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._nativeNode=null,this._nativeParent=null,this._rootNodeID=null,this._domID=null,this._nativeContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=t(2),p=t(135),h=t(137),v=t(23),m=t(70),g=t(20),y=t(43),b=t(14),w=t(26),_=t(34),k=t(35),E=t(74),C=t(148),P=t(75),S=t(4),O=t(156),x=t(158),M=t(76),T=t(161),N=(t(8),t(171)),I=t(175),R=(t(10),t(40)),A=t(0),D=(t(56),t(16)),L=(t(66),t(60),t(1),P),j=w.deleteListener,F=S.getNodeFromInstance,U=k.listenTo,z=_.registrationNameModules,V={string:!0,number:!0},B=D({style:null}),q=D({__html:null}),K={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},W=11,H={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},G={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Y={listing:!0,pre:!0,textarea:!0},X=f({menuitem:!0},G),Z=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Q={},J={}.hasOwnProperty,ee=1;c.displayName="ReactDOMComponent",c.Mixin={mountComponent:function(e,t,r,i){this._rootNodeID=ee++,this._domID=r._idCounter++,this._nativeParent=t,this._nativeContainerInfo=r;var s=this._currentElement.props;switch(this._tag){case"iframe":case"object":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(a,this);break;case"button":s=C.getNativeProps(this,s,t);break;case"input":O.mountWrapper(this,s,t),s=O.getNativeProps(this,s),e.getReactMountReady().enqueue(a,this);break;case"option":x.mountWrapper(this,s,t),s=x.getNativeProps(this,s);break;case"select":M.mountWrapper(this,s,t),s=M.getNativeProps(this,s),e.getReactMountReady().enqueue(a,this);break;case"textarea":T.mountWrapper(this,s,t),s=T.getNativeProps(this,s),e.getReactMountReady().enqueue(a,this)}n(this,s);var u,l;null!=t?(u=t._namespaceURI,l=t._tag):r._tag&&(u=r._namespaceURI,l=r._tag),(null==u||u===m.svg&&"foreignobject"===l)&&(u=m.html),u===m.html&&("svg"===this._tag?u=m.svg:"math"===this._tag&&(u=m.mathml)),this._namespaceURI=u;var c;if(e.useCreateElement){var d,f=r._ownerDocument;if(u===m.html)if("script"===this._tag){var h=f.createElement("div"),g=this._currentElement.type;h.innerHTML="<"+g+"></"+g+">",d=h.removeChild(h.firstChild)}else d=f.createElement(this._currentElement.type,s.is||null);else d=f.createElementNS(u,this._currentElement.type);S.precacheNode(this,d),this._flags|=L.hasCachedChildNodes,this._nativeParent||y.setAttributeForRoot(d),this._updateDOMProperties(null,s,e);var b=v(d);this._createInitialChildren(e,s,i,b),c=b}else{var w=this._createOpenTagMarkupAndPutListeners(e,s),_=this._createContentMarkup(e,s,i);c=!_&&G[this._tag]?w+"/>":w+">"+_+"</"+this._currentElement.type+">"}switch(this._tag){case"button":case"input":case"select":case"textarea":s.autoFocus&&e.getReactMountReady().enqueue(p.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(o,this)}return c},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(null!=o)if(z.hasOwnProperty(i))o&&r(this,i,o,e);else{i===B&&(o&&(o=this._previousStyleCopy=f({},t.style)),o=h.createMarkupForStyles(o,this));var a=null;null!=this._tag&&l(this._tag,t)?K.hasOwnProperty(i)||(a=y.createMarkupForCustomAttribute(i,o)):a=y.createMarkupForProperty(i,o),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._nativeParent||(n+=" "+y.createMarkupForRoot()),n+=" "+y.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=V[d(t.children)]?t.children:null,a=null!=o?null:t.children;if(null!=o)r=R(o);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return Y[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&v.queueHTML(r,i.__html);else{var o=V[d(t.children)]?t.children:null,a=null!=o?null:t.children;if(null!=o)v.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),u=0;u<s.length;u++)v.queueChild(r,s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,r,i){var o=t.props,a=this._currentElement.props;switch(this._tag){case"button":o=C.getNativeProps(this,o),a=C.getNativeProps(this,a);break;case"input":O.updateWrapper(this),o=O.getNativeProps(this,o),a=O.getNativeProps(this,a);break;case"option":o=x.getNativeProps(this,o),a=x.getNativeProps(this,a);break;case"select":o=M.getNativeProps(this,o),a=M.getNativeProps(this,a);break;case"textarea":T.updateWrapper(this),o=T.getNativeProps(this,o),a=T.getNativeProps(this,a)}n(this,a),this._updateDOMProperties(o,a,e),this._updateDOMChildren(o,a,e,i),"select"===this._tag&&e.getReactMountReady().enqueue(s,this)},_updateDOMProperties:function(e,t,n){var i,o,a;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&null!=e[i])if(i===B){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(a=a||{},a[o]="");this._previousStyleCopy=null}else z.hasOwnProperty(i)?e[i]&&j(this,i):(g.properties[i]||g.isCustomAttribute(i))&&y.deleteValueForProperty(F(this),i);for(i in t){var u=t[i],c=i===B?this._previousStyleCopy:null!=e?e[i]:void 0;if(t.hasOwnProperty(i)&&u!==c&&(null!=u||null!=c))if(i===B)if(u?u=this._previousStyleCopy=f({},u):this._previousStyleCopy=null,c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(a=a||{},a[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(a=a||{},a[o]=u[o])}else a=u;else if(z.hasOwnProperty(i))u?r(this,i,u,n):c&&j(this,i);else if(l(this._tag,t))K.hasOwnProperty(i)||y.setValueForAttribute(F(this),i,u);else if(g.properties[i]||g.isCustomAttribute(i)){var d=F(this);null!=u?y.setValueForProperty(d,i,u):y.deleteValueForProperty(d,i)}}a&&h.setValueForStyles(F(this),a,this)},_updateDOMChildren:function(e,t,n,r){var i=V[d(e.children)]?e.children:null,o=V[d(t.children)]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=i?null:e.children,l=null!=o?null:t.children,c=null!=i||null!=a,f=null!=o||null!=s;null!=u&&null==l?this.updateChildren(null,n,r):c&&!f&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},getNativeNode:function(){return F(this)},unmountComponent:function(e){switch(this._tag){case"iframe":case"object":case"img":case"form":case"video":case"audio":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":A(!1)}this.unmountChildren(e),S.uncacheNode(this),w.deleteAllListeners(this),E.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._domID=null,this._wrapperState=null},getPublicInstance:function(){return F(this)}},f(c.prototype,c.Mixin,N.Mixin),e.exports=c},function(e,exports,t){"use strict";function n(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===r?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var r=(t(60),9);e.exports=n},function(e,exports,t){"use strict";var n=t(163),r=(t(1),[]),i={addDevtool:function(e){r.push(e)},removeDevtool:function(e){for(var t=0;t<r.length;t++)r[t]===e&&(r.splice(t,1),t--)},onCreateMarkupForProperty:function(e,t){},onSetValueForProperty:function(e,t,n){},onDeleteValueForProperty:function(e,t){}};i.addDevtool(n),e.exports=i},function(e,exports,t){"use strict";var n=t(2),r=t(23),i=t(4),o=function(e){this._currentElement=null,this._nativeNode=null,this._nativeParent=null,this._nativeContainerInfo=null,this._domID=null};n(o.prototype,{mountComponent:function(e,t,n,o){var a=n._idCounter++;this._domID=a,this._nativeParent=t,this._nativeContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var u=n._ownerDocument,l=u.createComment(s);return i.precacheNode(this,l),r(l)}return e.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getNativeNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),e.exports=o},function(e,exports,t){"use strict";function n(e){return r.createFactory(e)}var r=t(11),i=(t(77),t(117)),o=i({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},n);e.exports=o},function(e,exports,t){"use strict";var n={useCreateElement:!0};e.exports=n},function(e,exports,t){"use strict";var n=t(42),r=t(4),i={dangerouslyProcessChildrenUpdates:function(e,t){var i=r.getNodeFromInstance(e);n.processUpdates(i,t)}};e.exports=i},function(e,exports,t){"use strict";function n(){this._rootNodeID&&d.updateWrapper(this)}function r(e){var t=this._currentElement.props,r=s.executeOnChange(t,e);l.asap(n,this);var i=t.name;if("radio"===t.type&&null!=i){for(var o=u.getNodeFromInstance(this),a=o;a.parentNode;)a=a.parentNode;for(var d=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0;f<d.length;f++){var p=d[f];if(p!==o&&p.form===o.form){var h=u.getInstanceFromNode(p);h||c(!1),l.asap(n,h)}}}return r}var i=t(2),o=t(33),a=t(43),s=t(46),u=t(4),l=t(12),c=t(0),d=(t(1),{getNativeProps:function(e,t){var n=s.getValue(t),r=s.getChecked(t);return i({type:void 0},o.getNativeProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=n?n:null,listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&a.setValueForProperty(u.getNodeFromInstance(e),"checked",n||!1);var r=s.getValue(t);null!=r&&a.setValueForProperty(u.getNodeFromInstance(e),"value",""+r)}});e.exports=d},function(e,exports,t){"use strict";var n=t(151);e.exports={debugTool:n}},function(e,exports,t){"use strict";var n=t(2),r=t(71),i=t(4),o=t(76),a=(t(1),{mountWrapper:function(e,t,n){var r=null;if(null!=n){var i=n;"optgroup"===i._tag&&(i=i._nativeParent),null!=i&&"select"===i._tag&&(r=o.getSelectValueContext(i))}var a=null;if(null!=r)if(a=!1,Array.isArray(r)){for(var s=0;s<r.length;s++)if(""+r[s]==""+t.value){a=!0;break}}else a=""+r==""+t.value;e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){i.getNodeFromInstance(e).setAttribute("value",t.value)}},getNativeProps:function(e,t){var i=n({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(i.selected=e._wrapperState.selected);var o="";return r.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(o+=e))}),o&&(i.children=o),i}});e.exports=a},function(e,exports,t){"use strict";function n(e,t,n,r){return e===n&&t===r}function r(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length;return{start:o,end:o+r}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var r=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var u=n(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),l=u?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var d=n(c.startContainer,c.startOffset,c.endContainer,c.endOffset),f=d?0:c.toString().length,p=f+l,h=document.createRange();h.setStart(r,i),h.setEnd(o,a);var v=h.collapsed;return{start:v?p:f,end:v?f:p}}function o(e,t){var n,r,i=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function a(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,i=Math.min(t.start,r),o=void 0===t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=u(e,i),c=u(e,o);if(s&&c){var d=document.createRange();d.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(d),n.extend(c.node,c.offset)):(d.setEnd(c.node,c.offset),n.addRange(d))}}}var s=t(7),u=t(194),l=t(93),c=s.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:c?r:i,setOffsets:c?o:a};e.exports=d},function(e,exports,t){"use strict";var n=t(2),r=t(42),i=t(23),o=t(4),a=(t(8),t(40)),s=t(0),u=(t(60),function(e){this._currentElement=e,this._stringText=""+e,this._nativeNode=null,this._nativeParent=null,this._domID=null,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});n(u.prototype,{mountComponent:function(e,t,n,r){var s=n._idCounter++,u=" react-text: "+s+" ";if(this._domID=s,this._nativeParent=t,e.useCreateElement){var l=n._ownerDocument,c=l.createComment(u),d=l.createComment(" /react-text "),f=i(l.createDocumentFragment());return i.queueChild(f,i(c)),this._stringText&&i.queueChild(f,i(l.createTextNode(this._stringText))),i.queueChild(f,i(d)),o.precacheNode(this,c),this._closingComment=d,f}var p=a(this._stringText);return e.renderToStaticMarkup?p:"\x3c!--"+u+"--\x3e"+p+"\x3c!-- /react-text --\x3e"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=this.getNativeNode();r.replaceDelimitedText(i[0],i[1],n)}}},getNativeNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=o.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n&&s(!1),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._nativeNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,o.uncacheNode(this)}}),e.exports=u},function(e,exports,t){"use strict";function n(){this._rootNodeID&&d.updateWrapper(this)}function r(e){var t=this._currentElement.props,r=s.executeOnChange(t,e);return l.asap(n,this),r}var i=t(2),o=t(33),a=t(43),s=t(46),u=t(4),l=t(12),c=t(0),d=(t(1),{getNativeProps:function(e,t){return null!=t.dangerouslySetInnerHTML&&c(!1),i({},o.getNativeProps(e,t),{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var n=t.defaultValue,i=t.children;null!=i&&(null!=n&&c(!1),Array.isArray(i)&&(i.length<=1||c(!1),i=i[0]),n=""+i),null==n&&(n="");var o=s.getValue(t);e._wrapperState={initialValue:""+(null!=o?o:n),listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=s.getValue(t);null!=n&&a.setValueForProperty(u.getNodeFromInstance(e),"value",""+n)}});e.exports=d},function(e,exports,t){"use strict";function n(e,t){"_nativeNode"in e||s(!1),"_nativeNode"in t||s(!1);for(var n=0,r=e;r;r=r._nativeParent)n++;for(var i=0,o=t;o;o=o._nativeParent)i++;for(;n-i>0;)e=e._nativeParent,n--;for(;i-n>0;)t=t._nativeParent,i--;for(var a=n;a--;){if(e===t)return e;e=e._nativeParent,t=t._nativeParent}return null}function r(e,t){"_nativeNode"in e||s(!1),"_nativeNode"in t||s(!1);for(;t;){if(t===e)return!0;t=t._nativeParent}return!1}function i(e){return"_nativeNode"in e||s(!1),e._nativeParent}function o(e,t,n){for(var r=[];e;)r.push(e),e=e._nativeParent;var i;for(i=r.length;i-- >0;)t(r[i],!1,n);for(i=0;i<r.length;i++)t(r[i],!0,n)}function a(e,t,r,i,o){for(var a=e&&t?n(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._nativeParent;for(var u=[];t&&t!==a;)u.push(t),t=t._nativeParent;var l;for(l=0;l<s.length;l++)r(s[l],!0,i);for(l=u.length;l-- >0;)r(u[l],!1,o)}var s=t(0);e.exports={isAncestor:r,getLowestCommonAncestor:n,getParentInstance:i,traverseTwoPhase:o,traverseEnterLeave:a}},function(e,exports,t){"use strict";var n,r=(t(20),t(34),t(1),{onCreateMarkupForProperty:function(e,t){n(e)},onSetValueForProperty:function(e,t,r){n(t)},onDeleteValueForProperty:function(e,t){n(t)}});e.exports=r},function(e,exports,t){"use strict";var n=(t(7),t(120),t(1),[]),r={addDevtool:function(e){n.push(e)},removeDevtool:function(e){for(var t=0;t<n.length;t++)n[t]===e&&(n.splice(t,1),t--)},beginProfiling:function(){},endProfiling:function(){},getFlushHistory:function(){},onBeginFlush:function(){},onEndFlush:function(){},onBeginLifeCycleTimer:function(e,t){},onEndLifeCycleTimer:function(e,t){},onBeginReconcilerTimer:function(e,t){},onEndReconcilerTimer:function(e,t){},onBeginProcessingChildContext:function(){},onEndProcessingChildContext:function(){},onNativeOperation:function(e,t,n){},onSetState:function(){},onSetDisplayName:function(e,t){},onSetChildren:function(e,t){},onSetOwner:function(e,t){},onSetText:function(e,t){},onMountRootComponent:function(e){},onMountComponent:function(e){},onUpdateComponent:function(e){},onUnmountComponent:function(e){}};e.exports=r},function(e,exports,t){"use strict";function n(){this.reinitializeTransaction()}var r=t(2),i=t(12),o=t(39),a=t(10),s={initialize:a,close:function(){d.isBatchingUpdates=!1}},u={initialize:a,close:i.flushBatchedUpdates.bind(i)},l=[u,s];r(n.prototype,o.Mixin,{getTransactionWrappers:function(){return l}});var c=new n,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i,o){var a=d.isBatchingUpdates;d.isBatchingUpdates=!0,a?e(t,n,r,i,o):c.perform(e,null,t,n,r,i,o)}};e.exports=d},function(e,exports,t){"use strict";function n(){_||(_=!0,m.EventEmitter.injectReactEventListener(v),m.EventPluginHub.injectEventPluginOrder(o),m.EventPluginUtils.injectComponentTree(c),m.EventPluginUtils.injectTreeTraversal(f),m.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,SelectEventPlugin:b,BeforeInputEventPlugin:r}),m.NativeComponent.injectGenericComponentClass(l),m.NativeComponent.injectTextComponentClass(p),m.DOMProperty.injectDOMPropertyConfig(s),m.DOMProperty.injectDOMPropertyConfig(y),m.EmptyComponent.injectEmptyComponentFactory(function(e){return new d(e)}),m.Updates.injectReconcileTransaction(g),m.Updates.injectBatchingStrategy(h),m.Component.injectEnvironment(u))}var r=t(136),i=t(138),o=t(140),a=t(141),s=t(143),u=t(74),l=t(149),c=t(4),d=t(152),f=t(162),p=t(160),h=t(165),v=t(168),m=t(169),g=t(173),y=t(176),b=t(177),w=t(178),_=!1;e.exports={inject:n}},function(e,exports,t){"use strict";function n(e){r.enqueueEvents(e),r.processEventQueue(!1)}var r=t(26),i={handleTopLevel:function(e,t,i,o){n(r.extractEvents(e,t,i,o))}};e.exports=i},function(e,exports,t){"use strict";function n(e){for(;e._nativeParent;)e=e._nativeParent;var t=c.getNodeFromInstance(e),n=t.parentNode;return c.getClosestInstanceFromNode(n)}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){var t=f(e.nativeEvent),r=c.getClosestInstanceFromNode(t),i=r;do{e.ancestors.push(i),i=i&&n(i)}while(i);for(var o=0;o<e.ancestors.length;o++)r=e.ancestors[o],h._handleTopLevel(e.topLevelType,r,e.nativeEvent,f(e.nativeEvent))}function o(e){e(p(window))}var a=t(2),s=t(62),u=t(7),l=t(17),c=t(4),d=t(12),f=t(54),p=t(112);a(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(r,l.twoArgumentPooler);var h={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){h._handleTopLevel=e},setEnabled:function(e){h._enabled=!!e},isEnabled:function(){return h._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?s.listen(r,t,h.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?s.capture(r,t,h.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);s.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(h._enabled){var n=r.getPooled(e,t);try{d.batchedUpdates(i,n)}finally{r.release(n)}}}};e.exports=h},function(e,exports,t){"use strict";var n=t(20),r=t(26),i=t(44),o=t(47),a=t(72),s=t(78),u=t(35),l=t(83),c=t(12),d={Component:o.injection,Class:a.injection,DOMProperty:n.injection,EmptyComponent:s.injection,EventPluginHub:r.injection,EventPluginUtils:i.injection,EventEmitter:u.injection,NativeComponent:l.injection,Updates:c.injection};e.exports=d},function(e,exports,t){"use strict";var n=t(189),r=/\/?>/,i=/^<\!\-\-/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=n(e);return i.test(e)?e:e.replace(r," "+o.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var r=t.getAttribute(o.CHECKSUM_ATTR_NAME);return r=r&&parseInt(r,10),n(e)===r}};e.exports=o},function(e,exports,t){"use strict";function n(e,t,n){return{type:c.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function r(e,t,n){return{type:c.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:d.getNativeNode(e),toIndex:n,afterNode:t}}function i(e,t){return{type:c.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function o(e){return{type:c.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function a(e){return{type:c.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){l.processChildrenUpdates(e,t)}var l=t(47),c=(t(8),t(82)),d=(t(18),t(24)),f=t(145),p=(t(10),t(192)),h=t(0),v={Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return f.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,i){var o;return o=p(t),f.updateChildren(e,o,n,r,i),o},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=d.mountComponent(s,t,this,this._nativeContainerInfo,n);s._mountIndex=o++,i.push(u)}return i},updateTextContent:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&h(!1);u(this,[a(e)])},updateMarkup:function(e){var t=this._renderedChildren;f.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&h(!1);u(this,[o(e)])},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,i={},o=this._reconcilerUpdateChildren(r,e,i,t,n);if(o||r){var a,l=null,c=0,f=0,p=null;for(a in o)if(o.hasOwnProperty(a)){var h=r&&r[a],v=o[a];h===v?(l=s(l,this.moveChild(h,p,f,c)),c=Math.max(h._mountIndex,c),h._mountIndex=f):(h&&(c=Math.max(h._mountIndex,c)),l=s(l,this._mountChildAtIndex(v,p,f,t,n))),f++,p=d.getNativeNode(v)}for(a in i)i.hasOwnProperty(a)&&(l=s(l,this._unmountChild(r[a],i[a])));l&&u(this,l),this._renderedChildren=o}},unmountChildren:function(e){var t=this._renderedChildren;f.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,i){if(e._mountIndex<i)return r(e,t,n)},createChild:function(e,t,r){return n(r,t,e._mountIndex)},removeChild:function(e,t){return i(e,t)},_mountChildAtIndex:function(e,t,n,r,i){var o=d.mountComponent(e,r,this,this._nativeContainerInfo,i);return e._mountIndex=n,this.createChild(e,t,o)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}};e.exports=v},function(e,exports,t){"use strict";var n=t(0),r={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,i){r.isValidOwner(i)||n(!1),i.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,i){r.isValidOwner(i)||n(!1);var o=i.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&i.detachRef(t)}};e.exports=r},function(e,exports,t){"use strict";function n(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=e}var r=t(2),i=t(69),o=t(17),a=t(35),s=t(80),u=t(39),l={initialize:s.getSelectionInformation,close:s.restoreSelection},c={initialize:function(){var e=a.isEnabled();return a.setEnabled(!1),e},close:function(e){a.setEnabled(e)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f=[l,c,d],p={getTransactionWrappers:function(){return f},getReactMountReady:function(){return this.reactMountReady},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};r(n.prototype,u.Mixin,p),o.addPoolingTo(n),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=t(172),o={};o.attachRefs=function(e,t){if(null!==t&&!1!==t){var r=t.ref;null!=r&&n(r,e,t._owner)}},o.shouldUpdateRefs=function(e,t){var n=null===e||!1===e,r=null===t||!1===t;return n||r||t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){if(null!==t&&!1!==t){var n=t.ref;null!=n&&r(n,e,t._owner)}},e.exports=o},function(e,exports,t){"use strict";function n(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1}var r=t(2),i=t(17),o=t(39),a=[],s={enqueue:function(){}},u={getTransactionWrappers:function(){return a},getReactMountReady:function(){return s},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(n.prototype,o.Mixin,u),i.addPoolingTo(n),e.exports=n},function(e,exports,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){i.Properties[e]=0,r[e]&&(i.DOMAttributeNames[e]=r[e])}),e.exports=i},function(e,exports,t){"use strict";function n(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e,t){if(w||null==g||g!==c())return null;var r=n(g);if(!b||!p(b,r)){b=r;var i=l.getPooled(m.select,y,e,t);return i.type="select",i.target=g,o.accumulateTwoPhaseDispatches(i),i}return null}var i=t(14),o=t(27),a=t(7),s=t(4),u=t(80),l=t(15),c=t(64),d=t(95),f=t(16),p=t(66),h=i.topLevelTypes,v=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,m={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},g=null,y=null,b=null,w=!1,_=!1,k=f({onSelect:null}),E={eventTypes:m,extractEvents:function(e,t,n,i){if(!_)return null;var o=t?s.getNodeFromInstance(t):window;switch(e){case h.topFocus:(d(o)||"true"===o.contentEditable)&&(g=o,y=t,b=null);break;case h.topBlur:g=null,y=null,b=null;break;case h.topMouseDown:w=!0;break;case h.topContextMenu:case h.topMouseUp:return w=!1,r(n,i);case h.topSelectionChange:if(v)break;case h.topKeyDown:case h.topKeyUp:return r(n,i)}return null},didPutListener:function(e,t,n){t===k&&(_=!0)}};e.exports=E},function(e,exports,t){"use strict";var n=t(14),r=t(62),i=t(27),o=t(4),a=t(179),s=t(180),u=t(15),l=t(183),c=t(185),d=t(38),f=t(182),p=t(186),h=t(187),v=t(28),m=t(188),g=t(10),y=t(52),b=t(0),w=t(16),_=n.topLevelTypes,k={abort:{phasedRegistrationNames:{bubbled:w({onAbort:!0}),captured:w({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:w({onAnimationEnd:!0}),captured:w({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:w({onAnimationIteration:!0}),captured:w({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:w({onAnimationStart:!0}),captured:w({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:w({onBlur:!0}),captured:w({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:w({onCanPlay:!0}),captured:w({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:w({onCanPlayThrough:!0}),captured:w({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:w({onClick:!0}),captured:w({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:w({onContextMenu:!0}),captured:w({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:w({onCopy:!0}),captured:w({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:w({onCut:!0}),captured:w({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:w({onDoubleClick:!0}),captured:w({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:w({onDrag:!0}),captured:w({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:w({onDragEnd:!0}),captured:w({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:w({onDragEnter:!0}),captured:w({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:w({onDragExit:!0}),captured:w({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:w({onDragLeave:!0}),captured:w({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:w({onDragOver:!0}),captured:w({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:w({onDragStart:!0}),captured:w({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:w({onDrop:!0}),captured:w({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:w({onDurationChange:!0}),captured:w({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:w({onEmptied:!0}),captured:w({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:w({onEncrypted:!0}),captured:w({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:w({onEnded:!0}),captured:w({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:w({onError:!0}),captured:w({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:w({onFocus:!0}),captured:w({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:w({onInput:!0}),captured:w({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:w({onInvalid:!0}),captured:w({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:w({onKeyDown:!0}),captured:w({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:w({onKeyPress:!0}),captured:w({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:w({onKeyUp:!0}),captured:w({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:w({onLoad:!0}),captured:w({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:w({onLoadedData:!0}),captured:w({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:w({onLoadedMetadata:!0}),captured:w({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:w({onLoadStart:!0}),captured:w({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:w({onMouseDown:!0}),captured:w({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:w({onMouseMove:!0}),captured:w({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:w({onMouseOut:!0}),captured:w({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:w({onMouseOver:!0}),captured:w({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:w({onMouseUp:!0}),captured:w({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:w({onPaste:!0}),captured:w({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:w({onPause:!0}),captured:w({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:w({onPlay:!0}),captured:w({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:w({onPlaying:!0}),captured:w({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:w({onProgress:!0}),captured:w({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:w({onRateChange:!0}),captured:w({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:w({onReset:!0}),captured:w({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:w({onScroll:!0}),captured:w({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:w({onSeeked:!0}),captured:w({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:w({onSeeking:!0}),captured:w({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:w({onStalled:!0}),captured:w({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:w({onSubmit:!0}),captured:w({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:w({onSuspend:!0}),captured:w({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:w({onTimeUpdate:!0}),captured:w({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:w({onTouchCancel:!0}),captured:w({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:w({onTouchEnd:!0}),captured:w({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:w({onTouchMove:!0}),captured:w({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:w({onTouchStart:!0}),captured:w({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:w({onTransitionEnd:!0}),captured:w({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:w({onVolumeChange:!0}),captured:w({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:w({onWaiting:!0}),captured:w({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:w({onWheel:!0}),captured:w({onWheelCapture:!0})}}},E={topAbort:k.abort,topAnimationEnd:k.animationEnd,topAnimationIteration:k.animationIteration,topAnimationStart:k.animationStart,topBlur:k.blur,topCanPlay:k.canPlay,topCanPlayThrough:k.canPlayThrough,topClick:k.click,topContextMenu:k.contextMenu,topCopy:k.copy,topCut:k.cut,topDoubleClick:k.doubleClick,topDrag:k.drag,topDragEnd:k.dragEnd,topDragEnter:k.dragEnter,topDragExit:k.dragExit,topDragLeave:k.dragLeave,topDragOver:k.dragOver,topDragStart:k.dragStart,topDrop:k.drop,topDurationChange:k.durationChange,topEmptied:k.emptied,topEncrypted:k.encrypted,topEnded:k.ended,topError:k.error,topFocus:k.focus,topInput:k.input,topInvalid:k.invalid,topKeyDown:k.keyDown,topKeyPress:k.keyPress,topKeyUp:k.keyUp,topLoad:k.load,topLoadedData:k.loadedData,topLoadedMetadata:k.loadedMetadata,topLoadStart:k.loadStart,topMouseDown:k.mouseDown,topMouseMove:k.mouseMove,topMouseOut:k.mouseOut,topMouseOver:k.mouseOver,topMouseUp:k.mouseUp,topPaste:k.paste,topPause:k.pause,topPlay:k.play,topPlaying:k.playing,topProgress:k.progress,topRateChange:k.rateChange,topReset:k.reset,topScroll:k.scroll,topSeeked:k.seeked,topSeeking:k.seeking,topStalled:k.stalled,topSubmit:k.submit,topSuspend:k.suspend,topTimeUpdate:k.timeUpdate,topTouchCancel:k.touchCancel,topTouchEnd:k.touchEnd,topTouchMove:k.touchMove,topTouchStart:k.touchStart,topTransitionEnd:k.transitionEnd,topVolumeChange:k.volumeChange,topWaiting:k.waiting,topWheel:k.wheel};for(var C in E)E[C].dependencies=[C];var P=w({onClick:null}),S={},O={eventTypes:k,extractEvents:function(e,t,n,r){var o=E[e];if(!o)return null;var g;switch(e){case _.topAbort:case _.topCanPlay:case _.topCanPlayThrough:case _.topDurationChange:case _.topEmptied:case _.topEncrypted:case _.topEnded:case _.topError:case _.topInput:case _.topInvalid:case _.topLoad:case _.topLoadedData:case _.topLoadedMetadata:case _.topLoadStart:case _.topPause:case _.topPlay:case _.topPlaying:case _.topProgress:case _.topRateChange:case _.topReset:case _.topSeeked:case _.topSeeking:case _.topStalled:case _.topSubmit:case _.topSuspend:case _.topTimeUpdate:case _.topVolumeChange:case _.topWaiting:g=u;break;case _.topKeyPress:if(0===y(n))return null;case _.topKeyDown:case _.topKeyUp:g=c;break;case _.topBlur:case _.topFocus:g=l;break;case _.topClick:if(2===n.button)return null;case _.topContextMenu:case _.topDoubleClick:case _.topMouseDown:case _.topMouseMove:case _.topMouseOut:case _.topMouseOver:case _.topMouseUp:g=d;break;case _.topDrag:case _.topDragEnd:case _.topDragEnter:case _.topDragExit:case _.topDragLeave:case _.topDragOver:case _.topDragStart:case _.topDrop:g=f;break;case _.topTouchCancel:case _.topTouchEnd:case _.topTouchMove:case _.topTouchStart:g=p;break;case _.topAnimationEnd:case _.topAnimationIteration:case _.topAnimationStart:g=a;break;case _.topTransitionEnd:g=h;break;case _.topScroll:g=v;break;case _.topWheel:g=m;break;case _.topCopy:case _.topCut:case _.topPaste:g=s}g||b(!1);var w=g.getPooled(o,t,n,r);return i.accumulateTwoPhaseDispatches(w),w},didPutListener:function(e,t,n){if(t===P){var i=e._rootNodeID,a=o.getNodeFromInstance(e);S[i]||(S[i]=r.listen(a,"click",g))}},willDeleteListener:function(e,t){if(t===P){var n=e._rootNodeID;S[n].remove(),delete S[n]}}};e.exports=O},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(15),i={animationName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(15),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(15),i={data:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(38),i={dataTransfer:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(28),i={relatedTarget:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(15),i={data:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(28),i=t(52),o=t(193),a=t(53),s={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(n,s),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(28),i=t(53),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(n,o),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(15),i={propertyName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e,t,n,i){return r.call(this,e,t,n,i)}var r=t(38),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,i),e.exports=n},function(e,exports,t){"use strict";function n(e){for(var t=1,n=0,i=0,o=e.length,a=-4&o;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;i<o;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},function(e,exports,t){"use strict";function n(e,t,n){if(null==t||"boolean"==typeof t||""===t)return"";if(isNaN(t)||0===t||i.hasOwnProperty(e)&&i[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var r=t(68),i=(t(1),r.isUnitlessNumber);e.exports=n},function(e,exports,t){"use strict";function n(e){if(null==e)return null;if(1===e.nodeType)return e;var t=i.get(e);if(t)return t=o(t),t?r.getNodeFromInstance(t):null;a((e.render,!1))}var r=(t(18),t(4)),i=t(49),o=t(92),a=t(0);t(1);e.exports=n},function(e,exports,t){"use strict";function n(e,t,n){var r=e,i=void 0===r[n];i&&null!=t&&(r[n]=t)}function r(e){if(null==e)return e;var t={};return i(e,n,t),t}var i=(t(45),t(59));t(1);e.exports=r},function(e,exports,t){"use strict";function n(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var r=t(52),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=n},function(e,exports,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=t&&a>=t)return{node:i,offset:t-o};o=a}i=n(r(i))}}e.exports=i},function(e,exports,t){"use strict";function n(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function r(e){if(a[e])return a[e];if(!o[e])return e;var t=o[e];for(var n in t)if(t.hasOwnProperty(n)&&n in s)return a[e]=t[n];return""}var i=t(7),o={animationend:n("Animation","AnimationEnd"),animationiteration:n("Animation","AnimationIteration"),animationstart:n("Animation","AnimationStart"),transitionend:n("Transition","TransitionEnd")},a={},s={};i.canUseDOM&&(s=document.createElement("div").style,"AnimationEvent"in window||(delete o.animationend.animation,delete o.animationiteration.animation,delete o.animationstart.animation),"TransitionEvent"in window||delete o.transitionend.transition),e.exports=r},function(e,exports,t){"use strict";function n(e){return r.isValidElement(e)||i(!1),e}var r=t(11),i=t(0);e.exports=n},function(e,exports,t){"use strict";function n(e){return'"'+r(e)+'"'}var r=t(40);e.exports=n},function(e,exports,t){"use strict";var n=t(81);e.exports=n.renderSubtreeIntoContainer},function(e,exports,t){"use strict";function n(e){return"/"===e.charAt(0)}function r(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&n(e),s=t&&n(t),u=a||s;if(e&&n(e)?o=i:i.length&&(o.pop(),o=o.concat(i)),!o.length)return"/";var l=void 0;if(o.length){var c=o[o.length-1];l="."===c||".."===c||""===c}else l=!1;for(var d=0,f=o.length;f>=0;f--){var p=o[f];"."===p?r(o,f):".."===p?(r(o,f),d++):d&&(r(o,f),d--)}if(!u)for(;d--;d)o.unshift("..");!u||""===o[0]||o[0]&&n(o[0])||o.unshift("");var h=o.join("/");return l&&"/"!==h.substr(-1)&&(h+="/"),h}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={start:function(){this.settings=window.navigator.mozSettings},_lock:null,_observers:[],debug:function(){this.DEBUG},getSettingsLock:function(){return this._lock&&!this._lock.closed?this._lock:this._lock=this.settings.createLock()},get:function(e){var t=this;return new Promise(function(n,r){t.debug("reading "+e+" from settings db.");var i=t.getSettingsLock().get(e);i.addEventListener("success",function(){t.debug("...value is "+i.result[e]),n(i.result[e])}),i.addEventListener("error",function(){r()})})},set:function(e){var t=this;return new Promise(function(n,r){t.debug("writing "+JSON.stringify(e)+" to settings db.");var i=t.getSettingsLock(),o=i.set(e);o.addEventListener("success",function(){n()}),o.addEventListener("error",function(){r()})})},addObserver:function(e,t){if(this.debug("adding observer for "+t+" on "+e),t){if(!this.settings)return void window.setTimeout(function(){"observe"in t?t.observe.call(t,e,null):"function"==typeof t&&t(null)});var n=this,r=this.getSettingsLock().get(e);r.addEventListener("success",function(){n.debug("get settings "+e+" as "+r.result[e]),n.debug("now performing the observer in "+t.name),"observe"in t?t.observe.call(t,e,r.result[e]):"function"==typeof t&&t(r.result[e])});var i=function(e){n.debug("observing settings "+e.settingName+" changed to "+e.settingValue),n.debug("now performing the observer in "+t.name),"observe"in t?t.observe.call(t,e.settingName,e.settingValue):"function"==typeof t&&t(e.settingValue)};this.settings.addObserver(e,i),this._observers.push({name:e,context:t,observer:i})}else this.warn("irregular observer "+t.name+", stop oberseving")},removeObserver:function(e,t){var n=this.settings,r=this;this._observers.forEach(function(i,o){i.name===e&&i.context===t&&(n.removeObserver(e,i.observer),r._observers.splice(o,1))})}};n.start(),exports.default=n},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r,i,o){n(this,e),this.loopable=!0,this.selector=t,this.element=r,this.scrollSelector=i,this.initialFocusIndex=o||0,this.element.addEventListener("keydown",this),this._mutationObserver=new MutationObserver(this.refresh.bind(this)),this._mutationObserver.observe(this.element,{childList:!0,subtree:!0,attributes:!0}),this.element.addEventListener("focus",this),this.refresh([])}return r(e,[{key:"setFocus",value:function(e,t){this._currentFocus=e,this.element.activeElement=e,t||(this.scrollIntoView(e),this.element.contains(document.activeElement)&&e.focus())}},{key:"destroy",value:function(){this.element.removeEventListener("keydown",this),this.element.removeEventListener("focus",this),this._candidates=[],this._mutationObserver.disconnect(),this._currentFocus=null,this.element.activeElement=null,this.element=null}},{key:"updateCandidates",value:function(){this._candidates=Array.from(this.element.querySelectorAll(this.selector))}},{key:"isAriaHiddenByAncestor",value:function(){for(var e=!1,t=this.element;t!==document.body;){if("true"===t.getAttribute("aria-hidden")){e=!0;break}t=t.parentNode}return e}},{key:"refresh",value:function(e){var t=this,n=!1,r=this.initialFocusIndex;if(e.forEach(function(e){[].slice.call(e.removedNodes).forEach(function(e){e.contains(t._currentFocus)&&(n=!0,r=t.getElementIndex(t._currentFocus))})}),this.updateCandidates(),n||(!this._currentFocus||this._currentFocus===this.element)&&this._candidates.length||this.element===document.activeElement){var i=r===this._candidates.length?this._candidates[this.initialFocusIndex]:this._candidates[r];i?(this._currentFocus=i,this.element.activeElement=i):(this._currentFocus=this.element,this.element.activeElement=null)}this.element.contains(document.activeElement)&&this._currentFocus!==document.activeElement&&(this.scrollIntoView(this._currentFocus),this._currentFocus.focus())}},{key:"handleEvent",value:function(e){if("keydown"===e.type)this.onKeyDown(e);else if("focus"===e.type){if(this._currentFocus&&this._currentFocus!==this.element)return this.scrollIntoView(this._currentFocus),void this._currentFocus.focus();var t=this.findNext();t?(this.scrollIntoView(t),t.focus(),this._currentFocus=t,this.element.activeElement=t):(this._currentFocus=this.element,this.element.activeElement=null)}}},{key:"onKeyDown",value:function(e){var t=null,n=!1;switch(e.key){case"ArrowDown":n=!0,t=this.findNext();break;case"ArrowUp":n=!0,t=this.findPrev()}t&&(this.scrollIntoView(t),t.focus(),this._currentFocus=t,this.element.activeElement=t),n&&(e.stopPropagation(),e.preventDefault())}},{key:"scrollIntoView",value:function(e){if(this.scrollSelector){for(var t=e,n=!1;t!==document.body;){if(t.matches(this.scrollSelector)){n=!0,t.scrollIntoView(!1);break}t=t.parentNode}n||e.scrollIntoView(!1)}else e.scrollIntoView(!1)}},{key:"getInitialFocus",value:function(){var e=this._candidates;return e.length?e[this.initialFocusIndex]:null}},{key:"getElementIndex",value:function(e){var t=this._candidates;if(!t||!t.length||!e)return 0;var n=0;return t.some(function(r,i){return r===e&&(n=i%t.length,!0)}),n}},{key:"findNext",value:function(e){e=e||document.activeElement;var t=this._candidates;if(!t.length)return null;var n=0;return t.some(function(r,i){return r===e&&(n=(i+1)%t.length,!0)}),t[n]||this.loopable?t[n]||t[this.initialFocusIndex]:null}},{key:"findPrev",value:function(e){var t=this;e=e||document.activeElement;var n=this._candidates;if(!n.length)return null;var r=null;return n.some(function(i,o){return i===e&&(r=(n.length+o-1)%n.length,t.loopable||0!==o||(r=null),!0)}),n[r]||this.loopable?n[r]||n[this.initialFocusIndex]:null}}]),e}();exports.default=i},function(e,exports,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.__esModule=!0;var r="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},i=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var i=void 0===t?"undefined":r(t);if(i!==(void 0===n?"undefined":r(n)))return!1;if("object"===i){var o=t.valueOf(),a=n.valueOf();if(o!==t||a!==n)return e(o,a);var s=Object.keys(t),u=Object.keys(n);return s.length===u.length&&s.every(function(r){return e(t[r],n[r])})}return!1};exports.default=i},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t(9),a=n(o),s=t(19),u=n(s);t(104);var l=function(){function e(){r(this,e)}return i(e,[{key:"start",value:function(){if(!navigator.mozCameras)return void Promise.resolve().then(function(){return t(41)});var e=window.location.hash;if(e&&"#secure"!==e)return u.default.isActivity=!0,this.getActivity(),void this.load(0);a.default.load(),a.default.on("configured",this.onConfigured.bind(this)),this.content=document.querySelector("#root"),this.video=document.querySelector("#viewfinder-video"),this.frame=document.querySelector("#frame"),this.videoContainer=document.querySelector("#video-container"),window.addEventListener("DOMContentLoaded",this),window.addEventListener("largetextenabledchanged",this),this.onLargeText()}},{key:"getActivity",value:function(){navigator.mozSetMessageHandler("activity",function(e){u.default.activity=e})}},{key:"onLargeText",value:function(){document.body.classList.toggle("large-text",navigator.largeTextEnabled)}},{key:"handleEvent",value:function(e){"DOMContentLoaded"===e.type?(window.removeEventListener("DOMContentLoaded",this),u.default.isActivity||this.showView()):"largetextenabledchanged"===e.type&&this.onLargeText()}},{key:"setFlashModeIcon",value:function(e){var t=localStorage.getItem("setting:flashModesPicture"),n=document.querySelector(".flash-mode-icon");if(n){if(!t&&e.flashModes.length>1)return void(n.dataset.icon="flash-auto");switch(t){case"on":n.dataset.icon="flash-on";break;case"auto":n.dataset.icon="flash-auto";break;case"off":n.dataset.icon=""}}}},{key:"showView",value:function(){var e=document.createElement("div");e.innerHTML='<div id="indicators">\n         <div class="mode-icon flash-mode-display">\n          <div class="flash-mode-icon"></div>\n        </div>\n          <div class="mode-icon photo-mode-icon current-mode">\n          </div>\n          <div class="mode-icon video-mode-icon">\n          </div>\n        </div>\n\n        <div class="zoombar">\n          <div class="zoom-bar-slider">\n            <img class="zoom-in-out zoom-in-display"/>\n            <gaia-slider transparent="true"></gaia-slider>\n            <img class="zoom-in-out zoom-out-display"/>\n          </div>\n        </div>\n\n        <div class="controls">\n          <div class="controls-middle">\n            <div class="capture-button test-capture rotates js-capture"\n              data-icon="shutter" name="capture">\n            </div>\n          </div>\n          <div class="controls-right">\n            <div class="mode-options sk-button" name="options"\n              data-l10n-id="options"></div>\n          </div>\n        </div>\n      ',this.content.appendChild(e)}},{key:"onConfigured",value:function(e){this.setFlashModeIcon(e),this.activity?this.load(0):(a.default.loadStreamInto(this.video),this.configurePreview(),this.load(300)),a.default.offAll("configured")}},{key:"load",value:function(e){window.setTimeout(function(){Promise.resolve().then(function(){return t(41)})},e)}},{key:"configurePreview",value:function(){var e=a.default.getSensorAngle(),t="video"===a.default.mode?a.default.getRecorderProfile().video.size:a.default.previewSize(),n="front"===a.default.selectedCamera;this.updatePreview(t,e,n)}},{key:"updatePreview",value:function(e,t,n){e&&(this.width=window.innerWidth,this.height=window.innerHeight,this.container=t%180==0?{width:this.width,height:this.height,aspect:this.width/this.height}:{width:this.height,height:this.width,aspect:this.height/this.width},this.updatePreviewMetrics(e,t,n,"fill"))}},{key:"updatePreviewMetrics",value:function(e,t,n,r){this.scaleSizeTo={fill:u.default.scaleSizeToFillViewport,fit:u.default.scaleSizeToFitViewport};var i=this.scaleSizeTo[r](this.container,e),o={width:i.height,height:i.width};-1!==screen.orientation.type.indexOf("portrait")?(this.frame.style.width=o.width+"px",this.frame.style.height=o.height+"px"):(this.frame.style.width=i.width+"px",this.frame.style.height=i.height+"px");var a="";n&&(a+="scale(-1, 1) "),a+="rotate("+t+"deg)",this.videoContainer.style.width=i.width+"px",this.videoContainer.style.height=i.height+"px",this.videoContainer.style.transform=a,"fill"!==r&&this.frame.innerHTML.replace("fill",r)}}]),e}(),c=new l;c.start(),window._app=c},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l);t(235);var d=t(5),f=n(d),p=t(98),h=n(p),v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={secLeft:0},n.timer=null,f.default.register("showCaptureTimer",n),n}return o(t,e),a(t,[{key:"showCaptureTimer",value:function(e){this.element.classList.add("visible"),e>0?(h.default.player("timer"),this.setState({secLeft:e})):this.element.classList.remove("visible")}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:"captureTimer",className:"timer",ref:function(t){return e.element=t}},u.default.createElement("div",{className:"timer_circle-1"}),u.default.createElement("div",{className:"timer_circle-2"}),u.default.createElement("div",{className:"timer_count"},u.default.createElement("div",{className:"rotates js-count"}," ",this.state.secLeft," ")))}}]),t}(c.default);exports.default=v},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=t(3),l=n(u),c=t(6),d=n(c),f=t(5),p=n(f),h=t(130),v=n(h);t(236);var m=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dialog:!1,options:null},p.default.register("showDialog",n),p.default.register("hideDialog",n),n}return o(t,e),s(t,[{key:"showDialog",value:function(e){var t=this;this.refs.dialog.element.getElementsByClassName("content")[0].classList.remove("rename"),this.setState({dialog:!0,options:e},function(){"menu-rename"===e.header&&(t.refs.dialog.element.querySelector("input").setAttribute("maxlength","40"),t.refs.dialog.element.getElementsByClassName("content")[0].classList.add("rename")),t.refs.dialog.show()})}},{key:"hideDialog",value:function(){this.refs.dialog.hide()}},{key:"componentDidMount",value:function(){var e=this;this.refs.dialog.on("closed",function(){setTimeout(function(){e.state.options.onClosed?e.state.options.onClosed():p.default.request("focus")},100)})}},{key:"render",value:function(){return l.default.createElement("div",{id:"dialog-root",className:this.state.dialog?"p-pri":"p-pri hidden"},l.default.createElement(v.default,a({ref:"dialog"},this.state.options)))}}]),t}(d.default);exports.default=m},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l);t(237);var d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={},n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.setItem("ftu.opened","true"),setTimeout(function(){e.ftuInfo.focus()},100)}},{key:"shouldComponentUpdate",value:function(){return!this.element.classList.contains("hidden")}},{key:"componentDidUpdate",value:function(){"ftu"!==this.props.mode&&this.element.classList.add("hidden")}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"ftu-screen",ref:function(t){return e.element=t},role:"heading","aria-labelledby":"title content"},u.default.createElement("div",{className:"ftu-container"},u.default.createElement("div",{className:"ftu-image"}),u.default.createElement("div",{className:"ftu-content",ref:"ftu"},u.default.createElement("div",{id:"title",className:"ftu-title","data-l10n-id":"welcome","aria-hidden":"true"}),u.default.createElement("div",{id:"content",className:"ftu-info p-pri","data-l10n-id":"ftu-info","aria-hidden":"true",ref:function(t){return e.ftuInfo=t}}))))}}]),t}(c.default);exports.default=d},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l);t(103);var d=t(9),f=n(d),p=t(5),h=n(p),v=t(21),m=n(v),g=t(19),y=n(g),b=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},h.default.register("updateGridView",e),e}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.updateGridView()}},{key:"componentDidUpdate",value:function(){this.updateGridView()}},{key:"isVideoActivity",value:function(){return y.default.activity&&"videos"===y.default.activity.source.data.type}},{key:"updateGridView",value:function(){"on"!==m.default.settings.grid.selected("key")||"picture"!==f.default.mode||this.isVideoActivity()?this.refs.grid.classList.add("hidden"):this.refs.grid.classList.remove("hidden")}},{key:"render",value:function(){return u.default.createElement("div",{className:"viewfinder-grid hidden",ref:"grid"},u.default.createElement("div",{className:"row"}),u.default.createElement("div",{className:"row middle"}),u.default.createElement("div",{className:"row"}),u.default.createElement("div",{className:"column left"},u.default.createElement("div",{className:"cell top"}),u.default.createElement("div",{className:"cell middle"}),u.default.createElement("div",{className:"cell bottom"})),u.default.createElement("div",{className:"column middle"},u.default.createElement("div",{className:"cell top"}),u.default.createElement("div",{className:"cell middle"}),u.default.createElement("div",{className:"cell bottom"})),u.default.createElement("div",{className:"column right"},u.default.createElement("div",{className:"cell top"}),u.default.createElement("div",{className:"cell middle"}),u.default.createElement("div",{className:"cell bottom"})))}}]),t}(c.default);exports.default=b},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(5),u=n(s),l=t(3),c=n(l),d=t(21),f=n(d);t(238);var p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.default.register("setIndicatorsVisibility",n),u.default.register("updateFlashIcon",n),u.default.register("updateSelfTimerIcon",n),n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.activity||this.indicators.classList.remove("hidden"),"picture"===this.props.mode&&this.refs.photo.classList.add("current-mode"),this.setFlashModeIcon(),this.updateSelfTimerIcon(),this.mounted=!0}},{key:"componentDidUpdate",value:function(){switch(this.props.mode){case"picture":this.indicators.classList.remove("hidden"),this.refs.photo.classList.add("current-mode"),this.refs.video.classList.remove("current-mode");break;case"video":this.indicators.classList.remove("hidden"),this.refs.video.classList.add("current-mode"),this.refs.photo.classList.remove("current-mode");break;case"recording":this.indicators.classList.add("hidden")}this.setFlashModeIcon(),this.updateSelfTimerIcon(),1===f.default.getSupportedModes().length&&(this.refs.photo.classList.add("hidden"),this.refs.video.classList.add("hidden"))}},{key:"updateFlashIcon",value:function(){this.mounted&&this.setFlashModeIcon()}},{key:"setIndicatorsVisibility",value:function(e){e?this.indicators.classList.remove("hidden"):this.indicators.classList.add("hidden")}},{key:"setFlashModeIcon",value:function(){switch(f.default.settings.flashModes.selected("key")){case"on":case"torch":this.refs.flash.dataset.icon="flash-on";break;case"auto":this.refs.flash.dataset.icon="flash-auto";break;default:this.refs.flash.dataset.icon=""}}},{key:"updateSelfTimerIcon",value:function(){var e=f.default.settings.timer.selected("key");if("off"===e||"picture"!==this.props.mode)return void this.showSelfTimerIcon(!1);this.showSelfTimerIcon(!0),this.refs.selfTimerIconContainer.setAttribute("data-timer",e)}},{key:"showSelfTimerIcon",value:function(e){e&&"picture"===this.props.mode?this.refs.selfTimerIconContainer.classList.remove("hidden"):this.refs.selfTimerIconContainer.classList.add("hidden")}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"indicators hidden",ref:function(t){return e.indicators=t}},c.default.createElement("div",{className:"mode-icon flash-mode-display"},c.default.createElement("div",{className:"flash-mode-icon",ref:"flash"})),c.default.createElement("div",{className:"mode-icon photo-mode-icon",ref:"photo"}),c.default.createElement("div",{className:"mode-icon video-mode-icon",ref:"video"}),c.default.createElement("div",{className:"mode-icon self-timer-display",ref:"selfTimerIconContainer"}))}}]),t}(c.default.Component);exports.default=p},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l),d=t(131),f=n(d),p=t(5),h=n(p),v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={menu:!1,options:null},h.default.register("showOptionMenu",n),n}return o(t,e),a(t,[{key:"showOptionMenu",value:function(e){this.setState({menu:!0,options:e})}},{key:"componentDidUpdate",value:function(){var e=this;this.refs.menu?(this.refs.menu.show(this.state.options),this.refs.menu.on("closed",function(){e.state.options.onClosed?e.state.options.onClosed():h.default.request("focus")})):h.default.request("focus")}},{key:"render",value:function(){return u.default.createElement("div",{id:"menu-root"},this.state.menu?u.default.createElement(f.default,{ref:"menu"}):null)}}]),t}(c.default);exports.default=v},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l),d=t(5),f=n(d);t(101),t(102);var p=t(21),h=n(p),v=t(9),m=n(v),g=t(29),y=n(g),b=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected:"",active:n.props.data[2]},n.model=n.props.data[0],f.default.register("handleKeyEvt",n),n.currentKey=null,n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){h.default.refsHash[this.currentKey]=this.refs}},{key:"componentDidUpdate",value:function(){this.props.data[2]!==this.state.active&&this.setState({active:this.props.data[2]})}},{key:"handleKeyEvt",value:function(e){switch(e.key){case"Enter":this.onOptionClick(document.activeElement.querySelector(".current"))}}},{key:"onOptionClick",value:function(e){var t=e.getAttribute("data-key"),n=h.default.currentSettings;n.select(t);var r=document.querySelector(".active"),i=r.dataset.key,o=h.default.refsHash[i];for(var a in o)o[a].dataset.icon=a===t?"radio-on":"radio-off";switch(this.setState({selected:this.selectedKey}),n.key){case"cameras":m.default.setCamera(t);break;case"flashModes":case"flashModesPicture":case"flashModesVideo":var s=h.default.settings.flashModes.selected("key");m.default.setFlashMode(s),f.default.request("update");break;case"timer":f.default.request("updateSelfTimerIcon",this);break;case"grid":f.default.request("updateGridView",this);break;case"gallery":case"video":this.forward(n.key);break;case"mode":var u=h.default.settings.mode.selected("key");m.default.setMode(u),f.default.request("update");break;case"recorderProfiles":m.default.updateRecorderProfile(!0);break;case"pictureSizes":m.default.updatePictureSize(!0)}}},{key:"forward",value:function(e){"gallery"===e?new MozActivity({name:"browse",data:{type:"photos"}}):"video"===e&&new MozActivity({name:"browse",data:{type:["video/mp4"]}}),"record"===y.default.name&&window.close()}},{key:"render",value:function(){var e=this,t=this.props.data[0].get(),n=this.props.data[1];t.selected=this.props.data[0].selected(),t.value=t.selected&&t.selected.title,this.selectedKey=t.selected.key,this.currentKey=t.key;var r=[];t.options.forEach(function(t,n){var i=t.key===e.selectedKey;r.push(u.default.createElement("li",{id:t.title,"data-icon":t.forward?"":i?"radio-on":"radio-off","data-forward":t.forward,"data-index":n,className:i?"setting-option current":"setting-option","data-selected":i,"aria-hidden":!0,"data-key":t.key,"data-l10n-id":t.title,key:n},t.title))});var i=this.props.data[1]===this.state.active?"setting active":"setting";return u.default.createElement("li",{className:i,role:"option","data-icon":t.icon,tabIndex:-1,"data-index":n,"data-key":t.key,ref:function(t){e.element=t}},u.default.createElement("div",{className:"option"},u.default.createElement("h1",{id:t.key,"aria-level":"1",className:"settings_title","data-l10n-id":t.title,"aria-hidden":"true"},t.title),u.default.createElement("ul",{role:"listbox",className:"inner js-list"},r)))}}]),t}(c.default);exports.default=b},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l),d=t(5),f=n(d);t(239);var p=t(25),h=n(p),v=t(100),m=n(v),g=t(227),y=n(g),b=t(226),w=n(b),_=t(19),k=n(_);t(241);var E=t(29),C=n(E),P=t(30),S=n(P),O=t(9),x=n(O),M=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={index:m.default.currentItemIndex,mode:"preview"},n.type="photo",n.zoomLevel=0,n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){x.default.release(),this.checkVolumeKey(),this.frame=new MediaFrame(this.mediaFrame,!0,5242880,!0),this.frame.video.onplaying=this.onVideoPlaying.bind(this),this.frame.video.onpaused=this.onVideoPaused.bind(this),this.frame.image.setAttribute("aria-hidden","true"),this.updateCurrentPreview(),"pick"===C.default.name&&this.refs.count.classList.add("hidden"),window.performance.getEntriesByName("preview-lsk-start","mark").length>0&&(window.performance.mark("preview-lsk-end"),window.performance.measure("performance-preview-lsk","preview-lsk-start","preview-lsk-end"),window.performance.clearMeasures("performance-preview-lsk"),window.performance.clearMarks("preview-lsk-start"),window.performance.clearMarks("preview-lsk-end")),navigator.mozAudioChannelManager&&(navigator.mozAudioChannelManager.volumeControlChannel="content")}},{key:"componentWillUnmount",value:function(){h.default.unregister(this.element),this.clear()}},{key:"componentDidUpdate",value:function(){"preview"===this.state.mode?this.updateCurrentPreview():this.updateSoftKey(),"wallpaper"===this.state.mode?this.refs.count.classList.add("hidden"):this.refs.count.classList.remove("hidden")}},{key:"updateCurrentPreview",value:function(){var e=this;m.default.CheckCurrentPreviewItem().then(function(t){e.type=m.default.items[t].isVideo?"video":"photo",e.showCurrent(t),e.updateSoftKey()},function(t){if(0===m.default.items.length)e.backToViewfinder();else{var n=m.default.currentItemIndex,r=m.default.items[n].filePath;m.default.onItemDeleted(r),e.setState({})}e.updateSoftKey()})}},{key:"onVideoPlaying",value:function(){this.videoPlaying||(this.videoPlaying=!0,this.refs.count.classList.add("hidden"),"pick"!==C.default.name?h.default.register({left:"fullscreen",center:"icon=pause",right:window.isSecureMode&&("photo"===this.type||this.hasVolumeKey)?"delete":"options"},this.element):h.default.register({left:"retake",center:"icon=pause",right:"done"},this.element))}},{key:"onVideoPaused",value:function(){this.videoPlaying&&(this.videoPlaying=!1,this.refs.count.classList.remove("hidden"),this.exitFullScreen(),"pick"!==C.default.name?h.default.register({center:"icon=play",right:window.isSecureMode&&("photo"===this.type||this.hasVolumeKey)?"delete":"options"},this.element):h.default.register({left:"retake",center:"icon=play",right:"done"},this.element))}},{key:"checkVolumeKey",value:function(){var e=this;navigator.hasFeature&&navigator.hasFeature("device.capability.volume-key").then(function(t){e.hasVolumeKey=!!t})}},{key:"showCurrent",value:function(e){var t=m.default.items[e];t.isVideo?this.showVideo(t):this.showImage(t)}},{key:"showImage",value:function(e){this.frame.displayImage(e.blob,e.width,e.height,e.preview,e.rotation,e.mirrored)}},{key:"showVideo",value:function(e){this.frame.displayVideo(e.blob,e.poster.blob,e.width,e.height,e.rotation)}},{key:"updateSoftKey",value:function(){if("pick"===C.default.name)return void h.default.register({left:"retake",center:"video"===this.type?"icon=play":"",right:"done"},this.element);switch(this.state.mode){case"preview":h.default.register({left:"video"===this.type?"":"zoom",center:"video"===this.type?"icon=play":"",right:window.isSecureMode&&("photo"===this.type||this.hasVolumeKey)?"delete":"options"},this.element);break;case"zoom":0===this.zoomLevel?h.default.register({right:"zoom-in"},this.element):9===this.zoomLevel?h.default.register({left:"zoom-out"},this.element):h.default.register({left:"zoom-out",right:"zoom-in"},this.element);break;case"wallpaper":h.default.register({left:"cancel",right:"set"},this.element)}}},{key:"playOrPauseVideo",value:function(){this.videoPlaying?this.frame.video.pause():this.frame.video.play()}},{key:"onKeyDown",value:function(e){var t=this;if(this.fullscreen)return e.stopPropagation(),e.preventDefault(),void this.exitFullScreen();switch(e.key){case"Enter":switch(e.stopPropagation(),this.state.mode){case"preview":"video"===this.type&&this.playOrPauseVideo()}break;case"ArrowLeft":switch(this.state.mode){case"preview":m.default.currentItemIndex>0&&!this.videoPlaying&&(m.default.currentItemIndex-=1,m.default.CheckCurrentPreviewItem().then(function(e){t.showCurrent(e)}),this.setState({index:m.default.currentItemIndex}));break;case"zoom":this.move("left")}break;case"ArrowRight":switch(this.state.mode){case"preview":m.default.currentItemIndex<m.default.items.length-1&&!this.videoPlaying&&(m.default.currentItemIndex+=1,m.default.CheckCurrentPreviewItem().then(function(e){t.showCurrent(e)}),this.setState({index:m.default.currentItemIndex}));break;case"zoom":this.move("right")}break;case"ArrowUp":switch(this.state.mode){case"zoom":this.move("up");break;case"preview":"video"===this.type&&(navigator.volumeManager&&navigator.volumeManager.requestUp(),this.requestVolume("show"))}break;case"ArrowDown":switch(this.state.mode){case"zoom":this.move("down");break;case"preview":"video"===this.type&&(navigator.volumeManager&&navigator.volumeManager.requestDown(),this.requestVolume("show"))}break;case"SoftLeft":if("pick"===C.default.name)return x.default.load(),void f.default.request("back");switch(this.state.mode){case"preview":"photo"===this.type?(this.frame&&this.frame.displayingPreview&&(this.frame.displayingPreview=!1),this.zoomLevel=0,this.setState({mode:"zoom"})):this.videoPlaying&&this.enterFullScreen();break;case"zoom":this.zoom("out");break;case"wallpaper":this.setState({mode:"preview"})}break;case"SoftRight":if("pick"===C.default.name){var n=m.default.items[m.default.currentItemIndex],r={blob:n.blob};if(n.isVideo)r.type="video/3gpp",r.poster=n.poster.blob;else{r.type="image/jpeg";if(C.default.activity.source.data.width||C.default.activity.source.data.height)return void(0,w.default)({blob:n.blob,size:0}).then(function(e){r.blob=e,C.default.activity.postResult(r)})}return void C.default.activity.postResult(r)}switch(this.state.mode){case"preview":this.videoPlaying&&this.frame.video.pause(),window.isSecureMode&&("photo"===this.type||this.hasVolumeKey)?this.doDelete():this.openOptionMenu();break;case"zoom":this.zoom("in");break;case"wallpaper":this.doSetWallpaper()}break;case"Backspace":if("pick"===C.default.name)return;switch(e.preventDefault(),this.state.mode){case"preview":m.default.currentItemIndex=0,this.backToViewfinder();break;case"zoom":this.setState({mode:"preview"}),this.frame.reset();break;case"wallpaper":this.setState({mode:"preview"})}}}},{key:"enterFullScreen",value:function(){this.videoPlaying&&!this.fullscreen&&(this.fullscreen=!0,this.softKey=document.getElementById("softkeyPanel"),this.softKey.classList.remove("visible"),this.element.setAttribute("fullscreen","true"))}},{key:"exitFullScreen",value:function(){if(this.fullscreen)return this.fullscreen=!1,this.softKey.classList.add("visible"),this.element.setAttribute("fullscreen","false"),!0}},{key:"doSetWallpaper",value:function(){var e=m.default.currentItemIndex,t=m.default.items[e];navigator.mozSettings.createLock().set({"wallpaper.image":t.blob}),k.default.ShowToaster(navigator.mozL10n.get("wallpaper-set")),this.setState({mode:"preview"})}},{key:"doDelete",value:function(){var e=this;f.default.request("showDialog",{type:"confirm",header:"confirmation",content:"photo"===this.type?"delete-photo?":"delete-video?",ok:"delete",cancel:"cancel",onOk:function(){e.deleteCurrentItem()}})}},{key:"openOptionMenu",value:function(){var e=this,t={id:"share",callback:function(){e.shareCurrentItem()}},n={id:"delete",callback:function(){f.default.request("showDialog",{type:"confirm",header:"confirmation",content:"photo"===e.type?"delete-photo?":"delete-video?",ok:"delete",cancel:"cancel",onOk:function(){e.deleteCurrentItem()},onCancel:function(){e.setState({mode:"preview"})},onClosed:function(){(0!==m.default.items.length||C.default.name)&&f.default.request("focus")}})}},r={id:"set-as-wallpaper",callback:function(){e.setState({mode:"wallpaper"})}},i={id:"volume",callback:function(){e.requestVolume("show")}};navigator.mozSettings.createLock().get("dm.wallpaper.image").then(function(o){var a=void 0,s=o["dm.wallpaper.image"];a="photo"===e.type?s?[t,n]:[t,r,n]:window.isSecureMode?[i,n]:[i,t,n],f.default.request("showOptionMenu",{options:a})})}},{key:"requestVolume",value:function(e){var t=this;if(this.volumeIsAdjusting||"show"!==e||(this.volumeIsAdjusting=!0,this.volumeTimer=!0),this.volumeTimer){if(clearTimeout(this.volumeTimer),navigator.volumeManager)switch(e){case"up":navigator.volumeManager.requestUp();break;case"down":navigator.volumeManager.requestDown();break;case"show":navigator.volumeManager.requestShow();break;default:return}this.volumeTimer=setTimeout(function(){t.volumeIsAdjusting=!1,t.volumeTimer=null},2e3)}}},{key:"deleteCurrentItem",value:function(){var e=this,t=m.default.currentItemIndex,n=m.default.items[t];m.default.deleteItem(t).then(function(){0===m.default.items.length?e.backToViewfinder():(m.default.currentItemIndex>0&&(m.default.currentItemIndex-=1),e.setState({mode:"preview",index:m.default.currentItemIndex}))}),n.isVideo?S.default.deleteVideo(n.filePath).then(this.showDeleteToaster.bind(this)):S.default.deletePicture(n.filePath).then(this.showDeleteToaster.bind(this))}},{key:"showDeleteToaster",value:function(){"photo"===this.type?k.default.ShowToaster(navigator.mozL10n.get("photo-deleted")):k.default.ShowToaster(navigator.mozL10n.get("video-deleted"))}},{key:"shareCurrentItem",value:function(){var e=m.default.currentItemIndex,t=m.default.items[e],n=t.isVideo?"video/*":"image/*",r=y.default.lastPathComponent(t.filePath),i=function(e){var i=new window.MozActivity({name:"share",data:{type:n,number:1,blobs:[e],filenames:[r],filepaths:[t.filepath]}});i.onsuccess=function(){},i.onerror=function(e){}};if(t.isVideo)return void i(t.blob);m.default.stopItemDeletedEvent=!0,(0,w.default)({blob:t.blob,size:0}).then(function(e){m.default.stopItemDeletedEvent=!1,i(e)})}},{key:"zoom",value:function(e){var t=this.frame;if(t){var n=t.fit.scale,r=parseFloat(t.image.getAttribute("data-scale-delta")),i=parseInt(t.image.getAttribute("data-zoom-in")),o=parseInt(t.image.getAttribute("data-zoom-out"));"in"===e?i<9&&(i++,o--,n+=r):"out"===e&&o<0&&(i--,o++,n-=r),t.image.setAttribute("data-zoom-in",i),t.image.setAttribute("data-zoom-out",o),t.zoomFrame(n,0,0,200),this.zoomLevel=i,this.updateSoftKey()}}},{key:"move",value:function(e){var t=0,n=0;switch(e){case"up":n+=30;break;case"down":n-=30;break;case"left":t+=30;break;case"right":t-=30}this.frame.pan(t,n)}},{key:"backToViewfinder",value:function(){x.default.load(),f.default.request("back"),navigator.mozAudioChannelManager&&(navigator.mozAudioChannelManager.volumeControlChannel="notification")}},{key:"clear",value:function(){this.frame.clear(),this.frame.destroy()}},{key:"render",value:function(){var e=this,t=m.default.items.length;return u.default.createElement("div",{id:"previewGallery",tabIndex:"-1",className:"preview-gallery",zoom:"zoom"===this.state.mode,"zoom-level":"0",onKeyDown:function(t){return e.onKeyDown(t)},ref:function(t){e.element=t}},u.default.createElement("div",{className:"frame-container"},u.default.createElement("div",{className:"media-frame",ref:function(t){e.mediaFrame=t}})),u.default.createElement("div",{className:"count-text p-pri",ref:"count"},t-this.state.index+"/"+t))}}]),t}(c.default);exports.default=M},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(5),c=n(l),d=t(221),f=n(d);t(240);var p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={time:"00:00"},n.videoTimer=null,n.videoStart=0,n.lastDuration=0,c.default.register("showRecordingTime",n),c.default.register("hideRecordingTime",n),n}return o(t,e),a(t,[{key:"showRecordingTime",value:function(){this.element.classList.add("visible"),this.setState({time:"00:00"}),this.videoStart=(new Date).getTime(),this.videoTimer&&clearInterval(this.videoTimer),this.videoTimer=setInterval(this.updateVideoElapsed.bind(this),1e3)}},{key:"hideRecordingTime",value:function(){this.element.classList.remove("visible"),clearInterval(this.videoTimer)}},{key:"updateVideoElapsed",value:function(){var e=(new Date).getTime(),t=this.videoStart,n=(0,f.default)(e-t);n!==this.lastDuration&&(this.setState({time:n}),this.lastDuration=n)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"recording-timer p-pri",ref:function(t){e.element=t}},this.state.time)}}]),t}(u.default.Component);exports.default=p},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=t(3),l=n(u),c=t(6),d=n(c),f=t(5),p=n(f),h=t(25),v=n(h);t(101),t(102);var m=t(21),g=n(m),y=t(210),b=n(y),w=t(9),_=(n(w),function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:0},p.default.register("showSettings",n),n.tabSelected=0,n.keySelected=null,n.items=g.default.menuItems(),n.index=0,n.mode="picture",n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.updateSoftKey()}},{key:"componentDidUpdate",value:function(){this.updateSoftKey();var e=this.element.querySelector(".active"),t=e.querySelector(".current");this.setLabel(t),this.setLabelledBy(e)}},{key:"showSettings",value:function(e){var n=this;this.mode=e,this.items=g.default.menuItems(),this.reset(),this.setState({}),g.default.currentSettings=this.items[this.index],navigator.mozSettings.createLock().get("accessibility.screenreader").then(function(e){n.readoutEnabled=e["accessibility.screenreader"]}),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"updateSoftKey",value:function(){v.default.register({left:"",center:"select",right:""},this.element)}},{key:"onKeyDown",value:function(e){var t=this;if("EndCall"!==e.key){if(e.stopPropagation(),e.preventDefault(),this.readoutEnabled&&("ArrowLeft"===e.key||"ArrowRight"===e.key||"ArrowUp"===e.key||"ArrowDown"===e.key)){if(this.disableSwitch)return;this.disableSwitch=!0,this.timer=setTimeout(function(){t.disableSwitch=!1},500)}switch(e.key){case"Enter":p.default.request("handleKeyEvt",e),this.hide();break;case"ArrowLeft":this.next(!1,"active");break;case"ArrowRight":this.next(!0,"active");break;case"ArrowUp":this.next(!1,"current");break;case"ArrowDown":this.next(!0,"current");break;case"Backspace":this.hide()}}}},{key:"setLabel",value:function(e){if("true"!==e.getAttribute("data-forward")){var t=e.textContent;"false"===e.getAttribute("data-selected")?t+=" "+navigator.mozL10n.get("unselected"):t+=" "+navigator.mozL10n.get("selected"),e.setAttribute("aria-label",t)}}},{key:"setLabelledBy",value:function(e){var t=e.querySelector(".settings_title"),n=t.getAttribute("id"),r=e.querySelector(".current"),i=r.getAttribute("id"),o=n+" "+i;e.setAttribute("aria-labelledby",o)}},{key:"next",value:function(e,t){var n="active"===t?this.element:document.activeElement,r=n.querySelector("."+t);"active"===t&&"rtl"===document.dir&&(e=!e);var i=e?r.nextSibling:r.previousSibling;if(i||(i=e?r.parentNode.firstChild:r.parentNode.lastChild),r.classList.remove(t),i.classList.add(t),"active"===t){var o=i.querySelector(".current");this.setLabel(o),this.setLabelledBy(i);var a=i.getAttribute("data-key");if("mode"===a||"video"===a){var s=i.querySelector(".current"),u=s.getAttribute("id"),l=a+" "+u;i.setAttribute("aria-labelledby",l)}}if(i.scrollIntoView(!1),i.focus(),"current"===t){r.removeAttribute("aria-label"),this.setLabel(i);var c=this.refs.listbox.querySelector(".active"),d=i.getAttribute("id");c.setAttribute("aria-labelledby",d),c.setAttribute("role","option"),c.setAttribute("aria-hidden","false")}"active"===t&&(e?this.index<this.items.length-1?this.index++:this.index=0:this.index>0?this.index--:this.index=this.items.length-1),g.default.currentSettings=this.items[this.index]}},{key:"reset",value:function(){var e=this.element.querySelector(".active");e.classList.remove("active"),e.parentNode.firstChild.classList.add("active"),this.tabSelected=0,this.keySelected=this.getSelectedOptionsKey(),this.index=0;var t=this.element.querySelectorAll(".current");Array.from(t).forEach(function(e){Array.from(e.parentNode.childNodes).forEach(function(e){var t=e.getAttribute("data-selected");if("true"===t?e.classList.add("current"):e.classList.remove("current"),"true"!==e.getAttribute("data-forward")){var n="true"===t?"radio-on":"radio-off";e.setAttribute("data-icon",n)}})})}},{key:"getSelectedOptionsKey",value:function(){return("picture"===this.mode?g.default.settingsData.settingsMenuPhoto:g.default.settingsData.settingsMenuVideo).items[this.tabSelected].key}},{key:"hide",value:function(){p.default.request("focus"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}},{key:"render",value:function(){var e=this,t=[];return this.items.forEach(function(n,r){if(!n.supported())return!1;t.push(l.default.createElement(b.default,{key:r,data:[n,r,e.state.active],ref:"optionItem"}))}),l.default.createElement("div",{id:"settingsOption",tabIndex:"-1",className:"settings hidden",onKeyDown:function(t){return e.onKeyDown(t)},ref:function(t){e.element=t}},l.default.createElement("div",{className:"pane pane-1"},l.default.createElement("div",{className:"inner"},l.default.createElement("div",{className:"settings_inner"},l.default.createElement("div",{className:"settings_items"},l.default.createElement("ul",{className:"inner js-items",ref:"listbox"},t))))))}}]),t}(d.default));exports.default=_},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(6),c=n(l);t(103);var d=t(9),f=n(d),p=t(19),h=n(p),v=t(5),m=n(v),g=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={scaleType:"fill"},n.launched=!1,n.configured=!1,n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){this.camera=f.default,this.onpreviewchanged=this.onPreviewChanged.bind(this),this.oncameraconfigured=this.onCameraConfigured.bind(this),this.clearstreamsrc=this.clearStreamSrc.bind(this),this.onvisibilitychange=this.onVisibilityChange.bind(this),this.camera.on("previewChanged",this.onpreviewchanged),this.camera.on("configured",this.oncameraconfigured),this.camera.on("released",this.clearstreamsrc),window.addEventListener("visibilitychange",this.onvisibilitychange)}},{key:"componentWillUnmount",value:function(){this.camera.offAll("previewChanged"),this.camera.offAll("configured"),this.camera.offAll("released"),window.removeEventListener("visibilitychange",this.onvisibilitychange)}},{key:"onVisibilityChange",value:function(){document.hidden&&this.clearStreamSrc()}},{key:"onCameraConfigured",value:function(){this.clearStreamSrc(),this.configured=!0,this.camera.loadStreamInto(this.video),this.configurePreview(),m.default.request("updateGridView",this),window.performance.getEntriesByName("modechange-start","mark").length>0&&(window.performance.mark("modechange-end"),window.performance.measure("performance-modechange","modechange-start","modechange-end"),window.performance.clearMeasures("performance-modechange"),window.performance.clearMarks("modechange-start"),window.performance.clearMarks("modechange-end"))}},{key:"onPreviewChanged",value:function(e){if("started"===e&&!f.default.viewSwitched&&this.configured){f.default.viewSwitched=!0,this.refs.viewfinder.classList.add("visible");document.getElementById("fake-viewfinder").classList.remove("visible")}}},{key:"clearStreamSrc",value:function(){if(f.default.viewSwitched)this.video.mozSrcObject=null;else{document.querySelector("#viewfinder-video").mozSrcObject=null}}},{key:"configurePreview",value:function(){var e=this.camera.getSensorAngle(),t="video"===this.camera.mode?this.camera.getRecorderProfile().video.size:this.camera.previewSize(),n="front"===f.default.selectedCamera;this.updatePreview(t,e,n)}},{key:"updatePreview",value:function(e,t,n){e&&(this.width=window.innerWidth,this.height=window.innerHeight,this.container=t%180==0?{width:this.width,height:this.height,aspect:this.width/this.height}:{width:this.height,height:this.width,aspect:this.height/this.width},this.updatePreviewMetrics(e,t,n,"fill"))}},{key:"updatePreviewMetrics",value:function(e,t,n,r){this.scaleSizeTo={fill:h.default.scaleSizeToFillViewport,fit:h.default.scaleSizeToFitViewport};var i=this.scaleSizeTo[r](this.container,e),o={width:i.height,height:i.width};-1!==screen.orientation.type.indexOf("portrait")?(this.frame.style.width=o.width+"px",this.frame.style.height=o.height+"px"):(this.frame.style.width=i.width+"px",this.frame.style.height=i.height+"px");var a="";n&&(a+="scale(-1, 1) "),a+="rotate("+t+"deg)",this.videoContainer.style.width=i.width+"px",this.videoContainer.style.height=i.height+"px",this.videoContainer.style.transform=a,this.setState({scaleType:r})}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"viewfinder-root",tabIndex:"-1",ref:function(t){e.element=t}},u.default.createElement("div",{id:"viewfinder",className:"viewfinder",enabled:"true",ref:"viewfinder"},u.default.createElement("div",{id:"frame",className:"viewfinder-frame",ref:function(t){e.frame=t},"scale-type":this.state.scaleType},u.default.createElement("div",{id:"video-container",className:"viewfinder-video-container","aria-hidden":"true",ref:function(t){e.videoContainer=t}},u.default.createElement("video",{id:"viewfinder-video",className:"viewfinder-video",ref:function(t){e.video=t}})))))}}]),t}(c.default);exports.default=g},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t(3),u=n(s),l=t(5),c=n(l),d=t(99);n(d);t(242);var f=t(9),p=n(f),h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:0},n.interval=10,c.default.register("changeZoom",n),c.default.register("setZoomVisibility",n),n}return o(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("slider").innerHTML='<img class="zoom-in-out zoom-in-display" /> <gaia-slider transparent="true" id="gaiaSlider"></gaia-slider><img class="zoom-in-out zoom-out-display" />',this.slider=document.getElementById("gaiaSlider"),this.slider.setRange(0,100),this.resetZoom(),p.default.on("zoomconfigured",function(){e.resetZoom(),e.setZoomVisibility(!0)})}},{key:"resetZoom",value:function(){this.slider.value=0,this.value=0}},{key:"changeZoom",value:function(e){var t=e?this.value+this.interval:this.value-this.interval;this.setZoomValue(t,!0)}},{key:"setZoomVisibility",value:function(e){e?this.refs.zoom.classList.remove("hidden"):this.refs.zoom.classList.add("hidden")}},{key:"setZoomValue",value:function(e,t){var n=this.value;this.value=this.clamp(e,0,100),this.value!==n&&(this.slider.value=this.value,t&&p.default.handleZoomChange(this.value))}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"render",value:function(){return u.default.createElement("div",{className:"zoombar",ref:"zoom"},u.default.createElement("div",{id:"slider",className:"zoom-bar-slider"}))}}]),t}(u.default.Component);exports.default=h},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={globals:{CONFIG_MAX_IMAGE_PIXEL_SIZE:5242880,CONFIG_MAX_SNAPSHOT_PIXEL_SIZE:5242880,CONFIG_REQUIRED_EXIF_PREVIEW_WIDTH:0,CONFIG_REQUIRED_EXIF_PREVIEW_HEIGHT:0},viewfinder:{scaleType:"fill"},sounds:{list:[{name:"shutter",url:"./resources/sounds/shutter.ogg",setting:"camera.sound.enabled"},{name:"timer",url:"./resources/sounds/timer.opus",setting:"camera.sound.enabled"},{name:"recordingStart",url:"./resources/sounds/camcorder_start.ogg",setting:"camera.sound.enabled"},{name:"recordingEnd",url:"./resources/sounds/camcorder_end.ogg",setting:"camera.sound.enabled"}]},activity:{maxPixelSizeScaleFactor:2.5,maxPickPixelSize:0,maxSharePixelSize:0}};exports.default=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={mode:{title:"switch-modes",icon:"camera-switch-mode",options:[{key:"picture",title:"photo-mode"},{key:"video",title:"video-mode"}],persistent:!1},cameras:{title:"switch-camera",icon:"camera-switch",options:[{key:"back",title:"toggle-camera-rear-button"},{key:"front",title:"toggle-camera-front-button"}],persistent:!1},pictureSizesFront:{title:"camera-resolution",header:"camera-resolution-header",icon:"video-resolution",support:[{aspects:["4:3"]}],selected:"high",persistent:!0,optionsLocalizable:!1},pictureSizesBack:{title:"camera-resolution",header:"camera-resolution-header",icon:"video-resolution",support:[{aspects:["4:3"]}],selected:"high",persistent:!0,optionsLocalizable:!1},recorderProfilesBack:{title:"video-resolution",header:"video-resolution-header",icon:"video-resolution",options:[{key:"qcif"},{key:"cif"},{key:"480p"},{key:"720p"},{key:"qvga"}],persistent:!0,optionsLocalizable:!1},recorderProfilesFront:{title:"video-resolution",header:"video-resolution-header",icon:"video-resolution",options:[{key:"qcif"},{key:"cif"},{key:"480p"},{key:"qvga"}],persistent:!0,optionsLocalizable:!1},flashModesPicture:{title:"flash",header:"flash",icon:"flash-on",options:[{key:"auto",icon:"flash-auto",title:"flash-auto"},{key:"on",icon:"flash-on",title:"flash-on"},{key:"off",icon:"flash-off",title:"flash-off"}],persistent:!0},flashModesVideo:{title:"flash",header:"flash",icon:"flash-on",options:[{key:"off",icon:"flash-off",title:"flash-off"},{key:"torch",icon:"flash-on",title:"flash-on"}],persistent:!1},timer:{title:"self-timer",header:"self-timer-header",icon:"self-timer",options:[{key:"off",title:"self-timer-off",value:0},{key:"secs3",value:3,title:"self-timer-3-seconds"},{key:"secs5",value:5,title:"self-timer-5-seconds"},{key:"secs10",value:10,title:"self-timer-10-seconds"}],persistent:!1},grid:{title:"grid",header:"grid-header",icon:"grid",options:[{key:"off",title:"grid-off"},{key:"on",title:"grid-on"}],selected:0,persistent:!0},video:{title:"video",icon:"video-player",options:[{key:"video",title:"video-option",forward:!0}]},gallery:{title:"gallery",icon:"gallery",options:[{key:"gallery",title:"gallery-option",forward:!0}]},settingsMenuPhoto:{items:[{key:"cameras"},{key:"flashModesPicture"},{key:"timer"},{key:"grid"},{key:"gallery"},{key:"mode"}]},settingsMenuVideo:{items:[{key:"cameras"},{key:"flashModesVideo"},{key:"recorderProfiles"},{key:"video"},{key:"mode"}]}};exports.default=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={padLeft:function(e,t,n){n=n||" ";for(var r=t-(e+"").length;--r>-1;)e=n+e;return e}},r={dcfConfigLoaded:!1,defaultSeq:{file:1,dir:100},dcfConfig:{key:"dcf_key",seq:null,postFix:"KAIOS",prefix:{video:"VID_",image:"IMG_"},ext:{video:"3gp",image:"jpg"}},init:function(){var e=this;asyncStorage.getItem(this.dcfConfig.key,function(t){e.dcfConfigLoaded=!0,e.dcfConfig.seq=t||e.defaultSeq})},getFilePath:function(e,t,r){var i=this,o="DCIM/"+this.dcfConfig.seq.dir+this.dcfConfig.postFix+"/",a=this.dcfConfig.prefix[t]+n.padLeft(this.dcfConfig.seq.file,4,"0")+"."+this.dcfConfig.ext[t],s=o+a;e.get(s).then(function(){i.dcfConfig.seq.file=1,i.dcfConfig.seq.dir+=1,asyncStorage.setItem(i.dcfConfig.key,i.dcfConfig.seq,function(){i.getFilePath(e,t,r)})},function(){r([s,a,o]),i.dcfConfig.seq.file<9999?i.dcfConfig.seq.file+=1:(i.dcfConfig.seq.file=1,i.dcfConfig.seq.dir+=1),asyncStorage.setItem(i.dcfConfig.key,i.dcfConfig.seq)})},createDCFFilename:function(e,t){var n=this;return new Promise(function(r){n.getFilePath(e,t,r)})}};exports.default=r},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(e,t){function n(e,t){return Math.round(e*t/1e6)}function r(e,t){var n=function e(t,n){return 0===n?t:e(n,t%n)}(e,t);return e/n+":"+t/n}var i=t&&t.maxPixelSize,o=t&&t.support||{},a=[],s=[],u=[];return e.forEach(function(e){var t=e.width,s=e.height,l=t+"x"+s,c=t*s,d=!1,f=[];if(e.aspect=r(t,s),!(c<76800)){if(i&&c>i)return void u.push({key:l,aspects:f,pixelSize:c,data:e});if(o.forEach(function(t){f=t.aspects,t.aspects&&t.aspects.forEach(function(t){-1!==t.indexOf(e.aspect)&&(d=!0)})}),!d)return void u.push({key:l,aspects:f,pixelSize:c,data:e});e.mp=n(t,s),a.push({key:l,aspects:f,pixelSize:c,data:e})}}),a.length<=0&&(u.sort(function(e,t){return e.pixelSize-t.pixelSize}),u[0].pixelSize>i?a.push(u[0]):a.push(u[u.length-1])),a.sort(function(e,t){return e.pixelSize-t.pixelSize}),a[0].title="low-resolution",a[0].key="low",s.push(a[0]),2===a.length&&(a[a.length-1].title="standard-resolution",a[a.length-1].key="medium",s.push(a[a.length-1])),a.length>=3&&(a[a.length-2].title="standard-resolution",a[a.length-2].key="medium",s.push(a[a.length-2]),a[a.length-1].title="high-resolution",a[a.length-1].key="high",s.push(a[a.length-1])),s};exports.default=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(e,t){var n=t,r=[],i=[],o=void 0,a=void 0,s=void 0;for(var u in e){(function(t){if(!e.hasOwnProperty(t))return"continue";a=e[t],s=a.video,n.forEach(function(e){if(e.key!==t)return!1;o=s.width*s.height,r.push({key:t,title:t+" "+s.width+"x"+s.height,pixelSize:o,raw:a})})})(u)}return r.sort(function(e,t){return e.pixelSize-t.pixelSize}),r[0].title="low-resolution",i.push(r[0]),2===r.length&&(r[r.length-1].title="standard-resolution",i.push(r[r.length-1])),r.length>=3&&(r[r.length-2].title="standard-resolution",i.push(r[r.length-2]),r[r.length-1].title="high-resolution",i.push(r[r.length-1])),i};exports.default=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(e){function t(e){return n(e,2,"0")}function n(e,t,n){n=n||" ";for(var r=t-(e+"").length;--r>-1;)e=n+e;return e}var r=e/1e3,i=Math.round(r%60),o=Math.floor(r/60),a=void 0;return o<60?t(o)+":"+t(i):(a=Math.floor(o/60),o=Math.round(o%60),a+":"+t(o)+":"+t(i))};exports.default=n},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.watcher=null,this.position=null}return r(e,[{key:"watch",value:function(){this.watcher||(this.watcher=navigator.geolocation.watchPosition(this.setPosition.bind(this)))}},{key:"stopWatching",value:function(){navigator.geolocation.clearWatch(this.watcher),this.watcher=null}},{key:"setPosition",value:function(e){this.position={timestamp:e.timestamp,altitude:e.coords.altitude,latitude:e.coords.latitude,longitude:e.coords.longitude}}}]),e}(),o=new i;exports.default=o},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(e,t){function n(n){function i(){var e=a.videoWidth,i=a.videoHeight,o=document.createElement("canvas");o.width=e,o.height=i;var u=o.getContext("2d",{willReadFrequently:!0});u.drawImage(a,0,0),r.revokeObjectURL(s),a.removeAttribute("src"),a.load(),o.toBlob(function(r){o.width=0,o=u=null,t(null,{width:e,height:i,rotation:n,poster:{blob:r}})},"image/jpeg")}function o(){r.revokeObjectURL(s),a.removeAttribute("src"),a.load(),t("error")}"number"!=typeof n&&(n=0);var a=document.createElement("video"),s=r.createObjectURL(e);a.preload="metadata",a.src=s,a.onerror=o,a.onloadeddata=i}var r=window.URL;getVideoRotation(e,n)};exports.default=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(e,t,n){function r(t,r,i){try{if(255!==t.getUint8(r))return void n("Malformed JPEG file: bad segment header");var o=t.getUint8(r+1),a=t.getUint16(r+2)+2,s=t.sliceOffset+t.viewOffset+r,u=s+a>=e.size,l=u?a:a+4;t.getMore(s,l,function(e){i(o,a,e,u)})}catch(e){n(e.toString()+"\n"+e.stack)}}function i(e,a,s,u){try{switch(e){case 192:case 193:case 194:case 195:d.height=s.getUint16(5),d.width=s.getUint16(7),194===e&&(d.progressive=!0),t(d);break;case 225:o(s);default:if(u)return void n("unexpected end of JPEG file");r(s,a,i)}}catch(e){n(e.toString()+"\n"+e.stack)}}function o(e){if(1165519206===e.getUint32(4,!1)){var t=a(e);if(t.THUMBNAIL&&t.THUMBNAILLENGTH){var n=e.sliceOffset+e.viewOffset+10+t.THUMBNAIL;d.preview={start:n,end:n+t.THUMBNAILLENGTH}}switch(t.ORIENTATION){case 1:default:d.rotation=0,d.mirrored=!1;break;case 2:d.rotation=0,d.mirrored=!0;break;case 3:d.rotation=180,d.mirrored=!1;break;case 4:d.rotation=180,d.mirrored=!0;break;case 5:d.rotation=90,d.mirrored=!0;break;case 6:d.rotation=90,d.mirrored=!1;break;case 7:d.rotation=270,d.mirrored=!0;break;case 8:d.rotation=270,d.mirrored=!1}}}function a(e){var t={},n=e.getUint8(10);if(77===n)n=!1;else{if(73!==n)throw Error("invalid byteorder in EXIF segment");n=!0}if(42!==e.getUint16(12,n))throw Error("bad magic number in EXIF segment");var r=e.getUint32(14,n);s(e,r+10,n,t,!0);var i=e.getUint16(r+10,n),o=e.getUint32(r+12+12*i,n);return 0!==o&&s(e,o+10,n,t,!0),t}function s(t,n,r,i,o){for(var a=t.getUint16(n,r),l=0;l<a;l++)u(t,n+2+12*l,r,i);if(!o){var c=t.getUint32(n+2+12*a,r);0!==c&&c<e.size&&s(t,c+10,r,i)}}function u(e,t,n,r){var i=e.getUint16(t,n),o=p[i];if(o&&!r[o]){var a=e.getUint16(t+2,n),s=e.getUint32(t+4,n),u=s*f[a],c=u<=4?t+8:e.getUint32(t+8,n);r[o]=l(e,c,a,s,n)}}function l(e,t,n,r,i){if(2===n){for(var o=[],a=0;a<r-1;a++)o[a]=e.getUint8(t+a);return String.fromCharCode.apply(String,o)}if(1==r)return c(e,t,n,i);for(var s=[],u=f[n],l=0;l<r;l++)s[l]=c(e,t+u*l,n,i);return s}function c(e,t,n,r){switch(n){case 1:case 7:return e.getUint8(t);case 2:return null;case 3:return e.getUint16(t,r);case 4:return e.getUint32(t,r);case 5:return e.getUint32(t,r)/e.getUint32(t+4,r);case 6:return e.getInt8(t);case 8:return e.getInt16(t,r);case 9:return e.getInt32(t,r);case 10:return e.getInt32(t,r)/e.getInt32(t+4,r);case 11:return e.getFloat32(t,r);case 12:return e.getFloat64(t,r)}return null}var d={};BlobView.get(e,0,Math.min(16384,e.size),function(e){if(e.byteLength<2||255!==e.getUint8(0)||216!==e.getUint8(1))return void n("Not a JPEG file");r(e,2,i)});var f=[0,1,1,2,4,8,1,1,2,4,8,4,8],p={274:"ORIENTATION",513:"THUMBNAIL",514:"THUMBNAILLENGTH"}};exports.default=n},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=t(224),r=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(e){return new Promise(function(t,n){function i(i){function o(e){i.preview.width=e.width,i.preview.height=e.height,t(i)}function a(){n("error")}if(i.blob=e,!i.preview)return void t(i);var s=i.preview.start,u=i.preview.end,l=e.slice(s,u,"image/jpeg");(0,r.default)(l,o,a)}(0,r.default)(e,i,function(e){})})};exports.default=i},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=t(30),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){return new Promise(function(t){var r=e.blob,o=e.width&&e.height?{width:e.width,height:e.height}:e.size||null;cropResizeRotate(r,null,o,null,function(e,o){return e?void t(r):o===r?void t(r):void i.default.deletePicture(r.name).then(function(e){if(e)return void t(r);i.default.addPicture(o,{filepath:r.name}).then(function(e){var r=n(e,3),i=(r[0],r[1],r[2]);t(i)})})})})};exports.default=o},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={toCamelCase:function(e){return e=e.toLowerCase().replace(/_/g,"-"),e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},toHyphenate:function(e){return e.replace(/([a-z][A-Z])/g,function(e){return e[0]+"-"+e[1].toLowerCase()})},lastPathComponent:function(e){var t=e.split("/");return t[t.length-1]}};exports.default=n},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){},function(e,exports){}]);
//# sourceMappingURL=bundle.js.map