define(["require","shared/wifi_helper"],function(e){var t=e("shared/wifi_helper"),n=t.getWifiManager(),i={_networks:{},_scanning:!1,_cachedCallbacks:[],get:function(e){this._scanning?this._cachedCallbacks.push(e):e(this._networks)},scan:function(e){var i,o=n.getKnownNetworks();this._scanning=!0,o.onsuccess=function(){this._networks={},this._scanning=!1;var n=o.result;for(i=0;i<n.length;++i){var r=n[i],a=r.ssid+"+"+t.getSecurity(r).join("+");this._networks[a]=r}for(var s;this._cachedCallbacks.length>0;)s=this._cachedCallbacks.pop(),s(this._networks);e&&e(this._networks)}.bind(this),o.onerror=function(e){this._scanning=!1,console.warn("Error : ",e),console.warn("could not retrieve any known network.")}.bind(this)}};return i.scan(),i});