define("panels/frame/panel",["require","modules/settings_panel","modules/settings_service"],function(e){var t=e("modules/settings_panel"),n=e("modules/settings_service");return function(){var e,i,o;return t({onInit:function(t){e=t},onBeforeShow:function(e,t){if(o)return o=!1,void 0;var n=this;i=document.createElement("iframe"),i.setAttribute("mozapp",t.mozapp),i.setAttribute("mozbrowser",!0),i.src=t.src,i.addEventListener("mozbrowserclose",this._onBrowserClose),i.addEventListener("mozbrowsershowmodalprompt",function(e){var t=n._escapeHTML(e.detail.message),i=e.detail.initialValue,o=e.detail.promptType;switch(o){case"alert":window.alert(t);break;case"prompt":e.detail.returnValue=window.prompt(t,i);break;case"confirm":e.detail.returnValue=window.confirm(t)}}),e.appendChild(i)},onHide:function(){return document.hidden?(o=!0,void 0):(e.removeChild(i),void 0)},_onBrowserClose:function(){n.back()},_escapeHTML:function(e){var t=document.createElement("span");return t.textContent=e,t.innerHTML=t.innerHTML.replace(/\n/g,"<br/>"),t.innerHTML}})}});