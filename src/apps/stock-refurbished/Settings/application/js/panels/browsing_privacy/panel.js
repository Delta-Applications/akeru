define("panels/browsing_privacy/panel",["require","modules/settings_panel"],function(e){var t=e("modules/settings_panel"),n=null,i=null,o=null,r=!1;return function(){function e(e){n=e.querySelector(".clear-history-data_button"),i=e.querySelector(".clear-private-data-button")}function a(){o="clear.browser.history",c()}function s(){o="clear.browser.private-data",c()}function c(){r=!0;var e=null,t=null;"clear.browser.history"===o?(t="clear-browsing-history-header",e="confirm-clear-browsing-history"):(t="clear-cookies-and-stored-data-title",e="confirm-clear-cookies-and-stored-data");var n={title:{id:t,args:{}},body:{id:e,args:{}},backcallback:function(){r=!1},cancel:{l10nId:"cancel",callback:function(){r=!1}},confirm:{l10nId:"clear",callback:function(){r=!1,"clear.browser.history"===o?d():u()}}},i=new ConfirmDialogHelper(n);i.show(document.getElementById("app-confirmation-dialog"))}function u(){navigator.mozSettings.createLock().set({"clear.browser.private-data":!0}),showToast("cookies-stored-data-cleared")}function d(){navigator.mozSettings.createLock().set({"clear.browser.history":!0}),showToast("browsing-history-cleared")}function l(){window.removeEventListener("keydown",p)}function f(){window.addEventListener("keydown",p)}function p(e){var t=e.key;if(r===!1)if("BrowserBack"===t||"Backspace"==t){var i=null,o=document.querySelectorAll(".current [data-href]");null!=o&&void 0!=o&&(i=o[0].getAttribute("data-href")),null!=i&&void 0!=i&&(Settings.currentPanel=i)}else if("Enter"==t||"Accept"==t){var c=document.querySelector("#browsingPrivacy li.focus p");null!==c&&(c===n?a():s())}}return t({onInit:e,onBeforeShow:f,onBeforeHide:l})}});