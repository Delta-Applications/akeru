define(["require","modules/apps_cache"],function(e){function t(e){this._enabled=!1,this._element=e,this._themeCount=0,this._boundUpdateThemes=this._updateThemes.bind(this),this.init()}var n=e("modules/apps_cache");return t.prototype={set enabled(e){this._enabled!==e&&(this._enabled=e,this._enabled&&this._updateThemeSectionVisibility())},get enabled(){return this._enabled},init:function(){var e=this;return n.addEventListener("install",this._boundUpdateThemes),n.addEventListener("uninstall",this._boundUpdateThemes),n.apps().then(function(t){t.some(function(t){e._isThemeApp(t)&&(e._themeCount+=1)}),e._updateThemeSectionVisibility()})},_isThemeApp:function(e){var t=e.manifest||e.updateManifest;return"theme"===t.role},_updateThemes:function(e){var t=e&&e.application,n=e.type;this._isThemeApp(t)&&("install"===n?this._themeCount+=1:"uninstall"===n&&(this._themeCount-=1),this._updateThemeSectionVisibility())},_updateThemeSectionVisibility:function(){this._element.hidden=this._themeCount<2}},function(e){return new t(e)}});