define(["require","modules/settings_panel"],function(e){var t=e("modules/settings_panel");return function(){function e(){var e={menuClassName:"menu-button",header:{l10nId:"message"},items:[{name:"Select",l10nId:"select",priority:2,method:function(){}}]};SettingsSoftkey.init(e),SettingsSoftkey.show()}return navigator.mozMobileConnections,t({onInit:function(){this.header=document.getElementById("simcard-id"),this.name=document.getElementById("current-simcard-name"),this.index=0,this.carrier=null,this.currentName=null},getSimcardInfo:function(e){var t=this,n=navigator.mozSettings.createLock().get("custom.simcards.name");n.onsuccess=function(){var i=navigator.mozMobileConnections[e],o=i.iccId,r=n.result["custom.simcards.name"];if(r&&o&&r[o])t.currentName=r[o];else{var a=navigator.mozIccManager,s=a.getIccById(o);if(s){var c=MobileOperator.userFacingInfo(i);t.currentName=c.operator?c.operator:navigator.mozL10n.get("no-operator")}}navigator.mozL10n.setAttributes(t.header,"sim-with-index",{index:t.index+1}),navigator.mozL10n.setAttributes(t.name,"current-sim-name",{name:t.currentName})}},onBeforeShow:function(){e(),this.index=DsdsSettings.getIccCardIndexForCellAndDataSettings(),this.getSimcardInfo(this.index)},onBeforeHide:function(){}})}});