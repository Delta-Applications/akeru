var Settings={get mozSettings(){var e=window.navigator.mozSettings;return e&&"function"==typeof e.createLock?e:null},isTabletAndLandscape:function(){return this.ScreenLayout.getCurrentLayout("tabletAndLandscaped")},_isTabletAndLandscapeLastTime:null,rotate:function(){var e,t=Settings.isTabletAndLandscape();Settings._isTabletAndLandscapeLastTime!==t&&(e=document.querySelectorAll('section[role="region"].current'),1===e.length&&"root"===e[0].id&&(Settings.currentPanel=Settings.initialPanelForTablet)),Settings._isTabletAndLandscapeLastTime=t},initialPanelForTablet:"#wifi",_currentPanel:null,isBackHref:!1,get currentPanel(){return this._currentPanel},set currentPanel(e){if(e.startsWith("#")||(e="#"+e),e===this._currentPanel)return this.isBackHref=!1,void 0;if("#mediaStorageDesc"===e)return this.isBackHref=!1,void 0;"#wifi"===e&&(window.performance.mark("wifiListStart"),PerformanceTestingHelper.dispatch("start-wifi-list-test")),"#display"===e&&window.performance.mark("settings-display-start");var t=e;t.startsWith("#")&&(t=t.substring(1)),this._currentPanel=e,this.SettingsService.navigate(t)},init:function(e){this.mozSettings&&navigator.mozSetMessageHandler&&(this.SettingsService=e.SettingsService,this.ScreenLayout=e.ScreenLayout,this.currentPanel=window.LaunchContext.initialPanelId,setTimeout(function(){this.ScreenLayout.watch("tabletAndLandscaped","(min-width: 768px) and (orientation: landscape)"),window.addEventListener("screenlayoutchange",this.rotate),this.isTabletAndLandscape()&&(this.currentPanel=this.initialPanelForTablet),window.addEventListener("keydown",this.handleSpecialKeys)}.bind(this)),PerformanceTestingHelper.dispatch("startup-path-done"))},handleSpecialKeys:function(e){if("#root"!=Settings.currentPanel&&e.keyCode===e.DOM_VK_ESCAPE){e.preventDefault(),e.stopPropagation();var t=document.querySelector("#dialogs .active");t?(t.classList.remove("active"),document.body.classList.remove("dialog")):Settings.currentPanel="#root"}else e.keyCode===e.DOM_VK_RETURN&&(e.stopPropagation(),e.preventDefault())}};