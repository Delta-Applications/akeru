!function(t){const e="statechange",n="airplaneMode.enabled",r="airplaneMode.status";var i={_mozSettings:window.navigator.mozSettings,_callbacks:[],_cachedStatus:"",ready:function(t){if(""===this._cachedStatus){var n=this;this.addEventListener(e,function r(){""!==n._cachedStatus&&(n.removeEventListener(e,r),t())})}else t()},getStatus:function(){return this._cachedStatus},addEventListener:function(t,n){t===e&&this._callbacks.push(n)},removeEventListener:function(t,n){if(t===e){var r=this._callbacks.indexOf(n);r>=0&&this._callbacks.splice(r,1)}},setEnabled:function(t){this.ready(function(){var e=this.getStatus();if("enabling"===e||"disabling"===e);else{if(t&&"enabled"===e||!t&&"disabled"===e)return;var r={};r[n]=t,this._mozSettings.createLock().set(r)}}.bind(this))},init:function(){var t=this,e=window.navigator.mozSettings.createLock(),n=e.get(r);n.onsuccess=function(){t._cachedStatus=n.result[r],t._callbacks.forEach(function(e){e(t._cachedStatus)})},this._mozSettings.addObserver(r,function(e){var n=e.settingValue;t._cachedStatus=n,t._callbacks.forEach(function(t){t(n)})})}};t.AirplaneModeHelper=i,i.init()}(this);