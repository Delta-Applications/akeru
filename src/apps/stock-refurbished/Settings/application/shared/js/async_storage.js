this.asyncStorage=function(){function e(t){if(f)t();else{var n=indexedDB.open(s,u);n.onerror=function(){console.error("asyncStorage: can't open database:",n.error.name),window.close()},n.onupgradeneeded=function(){n.result.createObjectStore(l)},n.onsuccess=function(){f=n.result,f.objectStoreNames.contains(l)?(localStorage.async_storage_db_ver=u,t()):d--&&(f.close(),f=null,u++,e(t))}}}function t(t,n,r){e(function(){var e=f.transaction(l,t);r&&(e.oncomplete=r),n(e.objectStore(l))})}function n(e,n){var r;t("readonly",function(t){r=t.get(e),r.onerror=function(){console.error("Error in asyncStorage.getItem(): ",r.error.name)}},function(){var e=r.result;void 0===e&&(e=null),n(e)})}function r(e,n,r){t("readwrite",function(t){var r=t.put(n,e);r.onerror=function(){console.error("Error in asyncStorage.setItem(): ",r.error.name)}},r)}function o(e,n){t("readwrite",function(t){var n=t.delete(e);n.onerror=function(){console.error("Error in asyncStorage.removeItem(): ",n.error.name)}},n)}function i(e){t("readwrite",function(e){var t=e.clear();t.onerror=function(){console.error("Error in asyncStorage.clear(): ",t.error.name)}},e)}function a(e){var n;t("readonly",function(e){n=e.count(),n.onerror=function(){console.error("Error in asyncStorage.length(): ",n.error.name)}},function(){e(n.result)})}function c(e,n){if(0>e)return n(null),void 0;var r;t("readonly",function(t){var n=!1;r=t.openCursor(),r.onsuccess=function(){var t=r.result;t&&(0===e||n||(n=!0,t.advance(e)))},r.onerror=function(){console.error("Error in asyncStorage.key(): ",r.error.name)}},function(){var e=r.result;n(e?e.key:null)})}var s="asyncStorage",u=localStorage.async_storage_db_ver||1,l="keyvaluepairs",f=null,d=3;return{getItem:n,setItem:r,removeItem:o,clear:i,length:a,key:c}}();