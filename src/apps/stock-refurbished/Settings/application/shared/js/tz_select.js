function tzSelect(e,t,n,o){function i(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onerror=t,n.onload=function(){t(n.response)},n.onerror=function(){console.error("Error getting file"),t(n.response)},n.send()}function r(e){if(e){for(var t,n,o="America/New_York",c=d,a=window.navigator.mozMobileConnections||[navigator.mozMobileConnection],s=0;s<a.length;++s){var v=a[s];if(v&&v.voice&&v.voice.network&&v.voice.connected){t=v.voice.network.mcc,n=v.voice.network.mnc,c=l;break}}return!t&&IccHelper&&IccHelper.iccInfo&&(t=IccHelper.iccInfo.mcc,n=IccHelper.iccInfo.mnc,c=f,"ready"!==IccHelper.cardState&&IccHelper.addEventListener("iccinfochange",function p(){IccHelper.iccInfo.mcc&&IccHelper.removeEventListener("iccinfochange",p),r(e)})),t?(i(u,function(i){if(i){var r=i[t];if("string"==typeof r)return e(r,c),void 0;if(r&&n in r)return e(r[n],c),void 0}e(o,d)}),void 0):(e(o,d),void 0)}}function c(n,r,c){function a(e,t){e.innerHTML="",t.sort(function(e,t){return e.text>t.text});for(var n=0;n<t.length;n++){var o=document.createElement("option");o.textContent=t[n].text,o.selected=t[n].selected,o.value=t[n].value,e.appendChild(o)}}function u(e){var t=e.querySelectorAll("option");return t[e.selectedIndex].textContent}function d(){var t=navigator.mozL10n.get,n=[];for(var o in A)n.push({text:t("tzRegion-"+o)||o,value:o,selected:o===h});a(e,n),f()}function f(){h=e.value;for(var n=A[h],o=[],i=0;i<n.length;i++)o.push({text:n[i].name||n[i].city.replace(/_/g," "),value:i,selected:n[i].city===E});a(t,o),m()}function m(){return c===p?(o&&o(g(),!0),void 0):(n(g(),{changedByUser:c===v,needsConfirmation:c!==v&&c!==l}),void 0)}function g(){var n=A[h][t.value];E=n.city;var o=n.offset.split(",");return{id:n.id||h+"/"+n.city,region:u(e),city:u(t),cc:n.cc,utcOffset:o[0],dstOffset:o[1]}}var h=r.replace(/\/.*/,""),E=r.replace(/.*?\//,""),A=null;e.onchange=function(){c=v,f()},t.onchange=function(){c=v,m()},i(s,function(e){A=e,d()})}function a(){function i(e,t){d.tz=e,d.needsConfirmation=t.needsConfirmation;var n=u.createLock().set({"time.timezone":e.id});n.onsuccess=function(){t.changedByUser?u.createLock().set({"time.timezone.user-selected":e.id}):o&&o(e,t.needsConfirmation)}}function a(e,t){n&&window.addEventListener("moztimechange",d),n&&window.addEventListener("unload",function(){window.removeEventListener("moztimechange",d)}),c(i,e,t)}function s(n){e.value=n.replace(/\/.*/,""),t.value=n.replace(/.*?\//,"")}var u=window.navigator.mozSettings;if(u){u.addObserver("time.timezone",function(e){s(e.settingValue)});var d=function(){n(d.tz,d.needsConfirmation)},l=u.createLock().get("time.timezone");l.onsuccess=function(){var e=u.createLock().get("time.timezone.user-selected");e.onsuccess=function(){var t=e.result["time.timezone.user-selected"];t?a(t,p):r(a)}}}}const s="/shared/resources/tz.json",u="/shared/resources/apn_tz.json",d="NONE",l="NETWORK",f="SIM",v="USER",p="PREVIOUS_SETTING";a()}