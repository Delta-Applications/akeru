!function(t){var e=navigator.mozIccManager,n=null;if(Object.defineProperty(t,"IccHelper",{configurable:!0,get:function(){return n},set:function(t){n=t}}),e&&e.getIccById){var r=null,i={},o={},a=["cardstatechange","iccinfochange","stkcommand","stksessionend"],s=["iccInfo","cardState"],c=["sendStkResponse","sendStkMenuSelection","sendStkTimerExpiration","sendStkEventDownload"],u=["getCardLock","unlockCardLock","setCardLock","getCardLockRetryCount","readContacts","updateContact","iccOpenChannel","iccExchangeAPDU","iccCloseChannel"],l=function(t){return function(){return r?r[t]:null}},d=function(t){return function(){return r?r[t].apply(r,arguments):void 0}},f=function(){var t={addEventListener:function(t,e){if("function"==typeof e&&-1!==a.indexOf(t)){var n=i[t];null==n&&(n=i[t]=[]),-1===n.indexOf(e)&&n.push(e)}},removeEventListener:function(t,e){var n=i[t];if(n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}};return s.forEach(function(e){Object.defineProperty(t,e,{enumerable:!0,get:l(e)})}),c.forEach(function(e){t[e]=d(e)}),u.forEach(function(e){t[e]=d(e)}),a.forEach(function(e){Object.defineProperty(t,"on"+e,{enumerable:!0,set:function(n){var r=o[e];r&&t.removeEventListener(e,r),o[e]=n,n&&t.addEventListener(e,n)},get:function(){return o[e]}})}),t};n=f(),e.iccIds&&e.iccIds.length&&(r=e.getIccById(e.iccIds[0]),r&&a.forEach(function(t){r.addEventListener(t,function(e){var n=i[t];n&&n.forEach(function(t){t(e)})})})),e.oniccdetected=function(t){null==n.cardState&&(r=e.getIccById(t.iccId),r&&(a.forEach(function(t){r.addEventListener(t,function(e){var n=i[t];n&&n.forEach(function(t){t(e)})})}),["cardstatechange","iccinfochange"].forEach(function(t){i[t]&&i[t].forEach(function(t){t()})})))}}else n=e}(window);