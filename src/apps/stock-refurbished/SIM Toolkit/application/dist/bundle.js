!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n=window.webpackJsonp;window.webpackJsonp=function(t,r,s){for(var o,a,u=0,c=[];u<t.length;u++)a=t[u],i[a]&&c.push(i[a][0]),i[a]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);for(n&&n(t,r,s);c.length;)c.shift()()};var r={},i={1:0};t.e=function(e){function n(){a.onerror=a.onload=null,clearTimeout(u);var t=i[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),i[e]=void 0)}var r=i[e];if(0===r)return new Promise(function(e){e()});if(r)return r[2];var s=new Promise(function(t,n){r=i[e]=[t,n]});r[2]=s;var o=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,t.nc&&a.setAttribute("nonce",t.nc),a.src=t.p+""+e+".bundle.js";var u=setTimeout(n,12e4);return a.onerror=a.onload=n,o.appendChild(a),s},t.m=e,t.c=r,t.i=function(e){return e},t.d=function(exports,e,n){t.o(exports,e)||Object.defineProperty(exports,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="dist/",t.oe=function(e){throw e},t(t.s=5)}([function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(1),u=n(a),c=t(7),l=n(c),f=function(e){function t(){var e,n,s,o;r(this,t);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return n=s=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),s.carrierObj=null,s.stkItems=null,s.iccManager=null,s.simNumber=0,s.objEntriesList=null,s.settings=null,s.isObserver=!1,s.laststkItems=null,s.objList=[],s.stkLastSelectedText="",s.indexOfEntries=0,s.goBackTimer={timer:null,timeout:0},s.selectTimer={timer:null,timeout:0},s.focusChain=[],o=n,i(s,o)}return s(t,e),o(t,[{key:"start",value:function(){return this.getCarrierObject()}},{key:"getCarrierObject",value:function(){var e=this;return new Promise(function(t,n){navigator.mozSettings.createLock().get("icc.applications").then(function(r){var i=r["icc.applications"],s=i&&JSON.parse(i);e.carrierObj=JSON.stringify(s),null!==e.carrierObj?(e.emit("started"),t(e.carrierObj)):n(Error("It broke"))})})}},{key:"getCachedStkCmd",value:function(){var e=this;return new Promise(function(t){navigator.mozSettings.createLock().get("icc.data").then(function(n){var r=n["icc.data"];e.cmd=r,t(r)})})}},{key:"getEntries",value:function(e){if(void 0==e){var t=JSON.parse(this.carrierObj);return this.getStkObjects(t)}this.objEntriesList=e;var n={iccId:e.iccId,entries:{presentationType:e.presentationType,items:e.command.options.items,title:e.command.options.title,isHelpAvailable:e.command.options.isHelpAvailable}},r=[n];this.stkItems=this.getStkObjects(r)}},{key:"getStkObjects",value:function(e){var t=[];return Object.keys(e).forEach(function(n){var r=new l.default;r.setStkObject(n,e[n].iccId,e[n].entries.items,e[n].entries.title,e[n].entries.iconSelfExplanatory,e[n].entries.icons,e[n].entries.isHelpAvailable),t.push(r)},this),t}},{key:"getIcc",value:function(e){return this.iccManager=window.navigator.mozIccManager,this.iccManager.getIccById(e)}}]),t}(u.default),h=new f;exports.default=h},function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=t(3),u=n(a),c=t(2),l=n(c),f=t(4),h=n(f),v=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.EVENT_PREFIX="",e.service=window.Service||l.default,e.EVENTS&&e.EVENTS.forEach(function(e){window.addEventListener(e,this)},e),e.SERVICES&&e.SERVICES.forEach(function(e){this.service.register(e,this)},e),e.STATES&&e.STATES.forEach(function(e){this.service.registerState(e,this)},e),e.SETTINGS&&(e._settings={},e.SETTINGS.forEach(function(e){h.default.addObserver(e,this)},e)),e}return s(t,e),o(t,[{key:"publish",value:function(e,t,n){var r=n?"":this.EVENT_PREFIX,i=new CustomEvent(r+e,{bubbles:!0,detail:t||this});this.debug("publishing: "+r+e),window.dispatchEvent(i)}},{key:"handleEvent",value:function(e){if("function"==typeof this._pre_handleEvent){if(!1===this._pre_handleEvent(e))return}else this.debug("no handle event pre found. skip");"function"==typeof this["_handle_"+e.type]&&(this.debug("handling "+e.type),this["_handle_"+e.type](e)),"function"==typeof this._post_handleEvent&&this._post_handleEvent(e)}},{key:"observe",value:function(e,t){this.debug("observing "+e+" : "+t),this._settings||(this._settings={}),this._settings[e]=t,"function"==typeof this["_observe_"+e]&&(this.debug("observer for "+e+" found, invoking."),this["_observe_"+e](t))}},{key:"debug",value:function(){this.DEBUG?this.TRACE:window.DUMP&&DUMP("["+this.name+"]"+Array.slice(arguments).concat())}}]),t}(u.default);exports.default=v},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={_providers:new Map,_services:new Map,_requestsByService:new Map,_requestsByProvider:new Map,request:function(e){var t=e.split(":"),n=Array.prototype.slice.call(arguments,1),r=this;if(this.debug(t),t.length>1){var i=t[0],s=t[1];return this._providers.get(i)?(this.debug("service: "+s+" is online, perform the request with "+n.concat()),Promise.resolve(this._providers.get(i)[s].apply(r._providers.get(i),n))):new Promise(function(t,o){r.debug("service: "+e+" is offline, queue the task."),r._requestsByProvider.has(i)||r._requestsByProvider.set(i,[]),r._requestsByProvider.get(i).push({service:s,resolve:t,args:n})})}if(this._services.has(e)){var o=this._services.get(e);return this.debug("service ["+e+"] provider ["+o.name+"] is online, perform the task."),Promise.resolve(o[e].apply(o,n))}return this.debug("service: "+e+" is offline, queue the task."),new Promise(function(t,i){r.debug("storing the requests..."),r._requestsByService.has(e)||r._requestsByService.set(e,[]),r._requestsByService.get(e).push({service:e,resolve:t,args:n})})},register:function(e,t){var n=this;if(this._providers.has(t.name)||this._providers.set(t.name,t),this.debug((t.name||"(Anonymous)")+" is registering service: ["+e+"]"),this.debug("checking awaiting requests by server.."),this._requestsByProvider.has(t.name)&&(this._requestsByProvider.get(t.name).forEach(function(e){n.debug("resolving..",t,t.name,e.service,e.args);var r="function"==typeof t[e.service]?t[e.service].apply(t,e.args):t[e.service];e.resolve(r)}),this._requestsByProvider.delete(t.name)),this._services.has(e))return void this.debug("the service ["+e+"] has already been registered by other server:",this._services.get(e).name);this._services.set(e,t),this.debug("checking awaiting requests by service.."),this._requestsByService.has(e)&&(this._requestsByService.get(e).forEach(function(e){n.debug("resolving..",t,e.service);var r=t[e.service].apply(t,e.args);e.resolve(r)}),this._requestsByService.delete(e))},unregister:function(e,t){this._providers.delete(t.name);var n=this._services.get(e);n&&t===n&&this._services.delete(e)},_states:new Map,_statesByState:new Map,registerState:function(e,t){this._states.set(t.name,t),t.name,this._statesByState.set(e,t)},unregisterState:function(e,t){this._states.delete(t.name),this._statesByState.get(e)===t&&this._statesByState.delete(e)},query:function(e){this.debug(e);var t,n,r=e.split(".");if(r.length>1?(n=this._states.get(r[0]),t=r[1]):(t=r[0],n=this._statesByState.get(t)),!n)return void this.debug("Provider not ready, return undefined state.");if("function"==typeof n[t]){var i=Array.prototype.slice.call(arguments,1);return n[t].apply(n,i)}return n[t]},_start:(new Date).getTime()/1e3,currentTime:function(){return((new Date).getTime()/1e3-this._start).toFixed(3)},debug:function(){}};exports.default=n},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){if(!e||"string"!=typeof e)throw new Error("Event name should be a valid non-empty string!")}function i(e){if("function"!=typeof e)throw new Error("Handler should be a function!")}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.listeners=new Map}return s(e,[{key:"on",value:function(e,t){r(e),i(t);var n=this.listeners.get(e);n||(n=new Set,this.listeners.set(e,n)),n.add(t)}},{key:"off",value:function(e,t){r(e),i(t);var n=this.listeners.get(e);n&&(n.delete(t),n.size||this.listeners.delete(e))}},{key:"offAll",value:function(e){if(void 0===e)return void this.listeners.clear();r(e);var t=this.listeners.get(e);t&&(t.clear(),this.listeners.delete(e))}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r(e);var s=this.listeners.get(e);s&&s.forEach(function(e){try{e.apply(null,n)}catch(e){}})}}]),e}();exports.default=o},function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={start:function(){this.settings=window.navigator.mozSettings},_lock:null,_observers:[],debug:function(){this.DEBUG},getSettingsLock:function(){return this._lock&&!this._lock.closed?this._lock:this._lock=this.settings.createLock()},get:function(e){var t=this;return new Promise(function(n,r){t.debug("reading "+e+" from settings db.");var i=t.getSettingsLock().get(e);i.addEventListener("success",function(){t.debug("...value is "+i.result[e]),n(i.result[e])}),i.addEventListener("error",function(){r()})})},set:function(e){var t=this;return new Promise(function(n,r){t.debug("writing "+JSON.stringify(e)+" to settings db.");var i=t.getSettingsLock(),s=i.set(e);s.addEventListener("success",function(){n()}),s.addEventListener("error",function(){r()})})},addObserver:function(e,t){if(this.debug("adding observer for "+t+" on "+e),t){if(!this.settings)return void window.setTimeout(function(){"observe"in t?t.observe.call(t,e,null):"function"==typeof t&&t(null)});var n=this,r=this.getSettingsLock().get(e);r.addEventListener("success",function(){n.debug("get settings "+e+" as "+r.result[e]),n.debug("now performing the observer in "+t.name),"observe"in t?t.observe.call(t,e,r.result[e]):"function"==typeof t&&t(r.result[e])});var i=function(e){n.debug("observing settings "+e.settingName+" changed to "+e.settingValue),n.debug("now performing the observer in "+t.name),"observe"in t?t.observe.call(t,e.settingName,e.settingValue):"function"==typeof t&&t(e.settingValue)};this.settings.addObserver(e,i),this._observers.push({name:e,context:t,observer:i})}else this.warn("irregular observer "+t.name+", stop oberseving")},removeObserver:function(e,t){var n=this.settings,r=this;this._observers.forEach(function(i,s){i.name===e&&i.context===t&&(n.removeObserver(e,i.observer),r._observers.splice(s,1))})}};n.start(),exports.default=n},function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i),o=function(){function e(){n(this,e)}return r(e,[{key:"start",value:function(){this.load(),s.default.start().then(function(){})}},{key:"load",value:function(){window.requestAnimationFrame(function(){window.setTimeout(function(){t.e(0).then(t.bind(null,6))})})}}]),e}(),a=new o;a.start(),window._app=a},,function(e,exports,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(){n(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.id=0,e.iccId=0,e.items=[],e.title="",e.isHelpAvailable=!1,e}return i(t,e),s(t,[{key:"setStkObject",value:function(e,t,n,r,i,s){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.id=e,this.iccId=t,this.items=n,this.title=r,this.iconSelfExplanatory=i,this.icons=s,this.isHelpAvailable=o}}]),t}(a.default);exports.default=u}]);
//# sourceMappingURL=bundle.js.map