
var _optionMenu=function(){this.options=[];this.element=document.querySelector('.option-menu-container');this.content=document.querySelector('.option-menu-container .content')};_optionMenu.prototype={init:function(){this.onKeyDown=this.onKeyDown.bind(this);this.element.addEventListener('keydown',this.onKeyDown);this.navigator=new SimpleNavigationHelper('.menu-item',this.element);this.updateSoftKeys();},updateSoftKeys:function(){SoftKeyStore.register({left:'',center:'select',right:''},this.element);},isActive:function(){return!this.element.classList.contains('hidden');},show:function(options,c){options&&this.buildOptions(options);this.cancelCallback=c;this.element.classList.remove('hidden');this.element.focus();},buildOptions:function(options){var fragment=document.createDocumentFragment();this.content.innerHTML='';this.options=options;this.options.forEach((option,index)=>{var container=document.createElement('div');container.className='menu-item p-pri';container.setAttribute('tabindex','-1');container.setAttribute('data-index',index);var div=document.createElement('div');div.className='content';div.setAttribute('data-l10n-id',option.id||'');div.setAttribute('data-l10n-args',option.l10nArgs||null);div.setAttribute('role','menuitem');if(index===0){div.id='option-menu-first-item';div.setAttribute('aria-labelledby','option-menu-header option-menu-first-item');}
container.appendChild(div);fragment.appendChild(container);});this.content.appendChild(fragment);},hide:function(){this.element.classList.add('hidden');},cancel:function(){this.hide();this.cancelCallback&&this.cancelCallback();},onKeyDown(e){switch(e.key){case'Enter':e.stopPropagation();e.preventDefault();this.hide();var option=this.options[+e.target.dataset.index];option&&option.callback&&option.callback();break;case'Backspace':e.stopPropagation();e.preventDefault();this.cancel();break;}}};var OptionMenu=new _optionMenu();OptionMenu.init();