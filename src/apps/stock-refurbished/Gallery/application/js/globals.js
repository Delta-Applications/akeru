'use strict';var picking=(window.location.hash==='#pick');var photodb;var isInitThumbnail=false;var isSelectAll=true;var thumbnailList;var selectedInvalid=0;var endKeyPressed=false;var shareProcess=false;var galleryErrorLargeSrc='/style/images/gallery_error.png';let currentActiveDialog;let infoDialog;let currentView;const NEED_NAV='need_nav';const PAGE_SIZE=15;const BATCH_SIZE=12;let lowMemory=false;let CONFIG_MAX_IMAGE_PIXEL_SIZE=5*1024*1024;let CONFIG_MAX_SNAPSHOT_PIXEL_SIZE=5*1024*1024;let LOW_MAX_IMAGE_PIXEL_SIZE_NO_JPEG=1431136;let CONFIG_MAX_PICK_PIXEL_SIZE=0;let CONFIG_MAX_EDIT_PIXEL_SIZE=0;const CONFIG_REQUIRED_EXIF_PREVIEW_WIDTH=0;const CONFIG_REQUIRED_EXIF_PREVIEW_HEIGHT=0;const DM_WALLPAPER_IMAGE='dm.wallpaper.image';let dmWallpaperImage=false;(()=>{navigator.getFeature('hardware.memory').then((memOnDevice)=>{if(memOnDevice===256){lowMemory=true;CONFIG_MAX_IMAGE_PIXEL_SIZE=2*1024*1024;CONFIG_MAX_SNAPSHOT_PIXEL_SIZE=1600*1200;CONFIG_MAX_PICK_PIXEL_SIZE=800*600;CONFIG_MAX_EDIT_PIXEL_SIZE=800*600;}});window.addEventListener('largetextenabledchanged',()=>{document.body.classList.toggle('large-text',navigator.largeTextEnabled);});})();