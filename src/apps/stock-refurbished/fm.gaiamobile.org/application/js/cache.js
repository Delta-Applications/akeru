
(function(exports){'use strict';let csh=null;exports.FMCache={saveFromNode:function cache_saveFromNode(moduleId,node){let html=node.outerHTML;this.save(moduleId,html);},save:function cache_save(moduleId,html){let id=moduleId;let langDir=document.querySelector('html').getAttribute('dir');let lang=navigator.language;let cachedSoftkeyHtml;if(csh){cachedSoftkeyHtml=csh;}else{let softkey=document.getElementById('fm-softkey-panel');let cachedSoftkeyNode=this.cloneAsInertNodeAvoidingCustomElementHorrors(softkey);cachedSoftkeyNode.setAttribute('id','cachedSoftkeyPanel');cachedSoftkeyHtml=cachedSoftkeyNode.outerHTML;if(softkey.innerText.length>0){csh=cachedSoftkeyHtml;}}
html=window.HTML_CACHE_VERSION+(langDir?','+langDir:'')+
(lang?','+lang:'')+','+cachedSoftkeyHtml+':'+html;try{localStorage.setItem('html_cache_'+id,html);}catch(e){console.error('Failed save cache:'+e);}},clear:function cache_clear(moduleId){localStorage.removeItem('html_cache_'+moduleId);},cloneAsInertNodeAvoidingCustomElementHorrors:function cache_cloneAsInertNodeAvoidingCustomElementHorrors(node){let templateNode=document.createElement('template');let cacheDoc=templateNode.content.ownerDocument;return cacheDoc.importNode(node,true);}};})(this);